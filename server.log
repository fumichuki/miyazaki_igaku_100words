nohup: ignoring input
2026-02-01 23:09:12 - __main__ - INFO - ğŸš€ ã¿ã‚„å¡¾ã€€è‹±ä½œæ–‡ç‰¹è¨“è¬›åº§ã€€å®®å´å¤§å­¦åŒ»å­¦éƒ¨ï¼ˆå’Œæ–‡è‹±è¨³ï¼‰ v3.0.0 èµ·å‹•: http://localhost:8001
2026-02-01 23:09:12 - __main__ - INFO - ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹: data/miyazaki_igaku_eisakubun.db
2026-02-01 23:09:12 - __main__ - INFO - ğŸ¯ æœ‰åŠ¹æ©Ÿèƒ½: 4/4
 * Serving Flask app 'app'
 * Debug mode: on
2026-02-01 23:09:12 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8001
 * Running on http://10.0.11.2:8001
2026-02-01 23:09:12 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2026-02-01 23:09:12 - werkzeug - INFO -  * Restarting with stat
2026-02-01 23:09:13 - __main__ - INFO - ğŸš€ ã¿ã‚„å¡¾ã€€è‹±ä½œæ–‡ç‰¹è¨“è¬›åº§ã€€å®®å´å¤§å­¦åŒ»å­¦éƒ¨ï¼ˆå’Œæ–‡è‹±è¨³ï¼‰ v3.0.0 èµ·å‹•: http://localhost:8001
2026-02-01 23:09:13 - __main__ - INFO - ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹: data/miyazaki_igaku_eisakubun.db
2026-02-01 23:09:13 - __main__ - INFO - ğŸ¯ æœ‰åŠ¹æ©Ÿèƒ½: 4/4
2026-02-01 23:09:13 - werkzeug - WARNING -  * Debugger is active!
2026-02-01 23:09:13 - werkzeug - INFO -  * Debugger PIN: 110-605-718
2026-02-01 23:09:30 - werkzeug - INFO - 127.0.0.1 - - [01/Feb/2026 23:09:30] "GET / HTTP/1.1" 200 -
2026-02-01 23:09:30 - werkzeug - INFO - 127.0.0.1 - - [01/Feb/2026 23:09:30] "GET /static/style.css?v=20260121m HTTP/1.1" 200 -
2026-02-01 23:09:30 - werkzeug - INFO - 127.0.0.1 - - [01/Feb/2026 23:09:30] "GET /static/textarea-resize.png HTTP/1.1" 200 -
2026-02-01 23:09:30 - werkzeug - INFO - 127.0.0.1 - - [01/Feb/2026 23:09:30] "GET /static/main.js?v=1769831932 HTTP/1.1" 200 -
2026-02-01 23:09:35 - database - INFO - Excluded themes: ['ç ”ç©¶ç´¹ä»‹', 'å­¦è¡“', 'ãƒ¬ãƒ“ãƒ¥ãƒ¼', 'ãƒ–ãƒ­ã‚°', 'ã‚³ãƒ©ãƒ ', 'æ™‚äº‹', 'å›³è¡¨']
2026-02-01 23:09:35 - llm_service - INFO - ç¿»è¨³å•é¡Œã‚’ç”Ÿæˆä¸­...
2026-02-01 23:09:35 - llm_service - INFO - ğŸ“Š ç›´è¿‘10å•ã®ã‚µãƒ–ãƒˆãƒ”ãƒƒã‚¯: ['ç ”ç©¶ç´¹ä»‹:C', 'å­¦è¡“:ä¸æ˜', 'å­¦è¡“:D', 'ãƒ¬ãƒ“ãƒ¥ãƒ¼:C', 'å­¦è¡“:E', 'ãƒ–ãƒ­ã‚°:F', 'ã‚³ãƒ©ãƒ :C', 'å­¦è¡“:H', 'å­¦è¡“:B', 'æ™‚äº‹:D']
2026-02-01 23:09:35 - llm_service - INFO - ğŸ“Š ç›´è¿‘30å•ã®åˆ†å¸ƒ: ã‚³ãƒ©ãƒ =20.0%, ãƒ–ãƒ­ã‚°=6.7%, ãƒ¬ãƒ“ãƒ¥ãƒ¼=6.7%, å›³è¡¨=10.0%, å­¦è¡“=23.3%, æ™‚äº‹=10.0%, ç ”ç©¶ç´¹ä»‹=23.3%
2026-02-01 23:09:35 - llm_service - INFO - ğŸ¯ ã‚·ã‚¹ãƒ†ãƒ ãŒé¸æŠã—ãŸtheme: ã‚³ãƒ©ãƒ 
2026-02-01 23:09:36 - llm_service - INFO - ğŸ“Š ç›´è¿‘10å•ã®åˆ†å¸ƒ: P1_ONLY=50.0%, P2_P3=30.0%, P3_ONLY=20.0%, P4_P5=0.0%
2026-02-01 23:09:36 - llm_service - INFO - ğŸ¯ P2_P3ãŒ20.0%ä¸è¶³ â†’ å„ªå…ˆçš„ã«é¸æŠ
2026-02-01 23:09:36 - llm_service - INFO - ğŸ¯ ã‚·ã‚¹ãƒ†ãƒ ãŒé¸æŠã—ãŸexcerpt_type: P2_P3
2026-02-01 23:09:43 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-01 23:09:43 - llm_service - INFO - OpenAI API response (attempt 1): {
  "theme": "ã‚³ãƒ©ãƒ ",
  "topic_label": "A",
  "excerpt_type": "P2_P3",
  "japanese_paragraphs": [
    "ä¸€æ–¹ã€éŸ³ã®å•é¡Œã¯æ—¥å¸¸ç”Ÿæ´»ã§è¦‹éã”ã•ã‚ŒãŒã¡ã§ã™ãŒã€å®Ÿéš›ã«ã¯æ·±åˆ»ãªå½±éŸ¿ã‚’åŠã¼ã™ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚ä¾‹ãˆã°ã€å¤œé–“ã®é¨’éŸ³ã¯ç¡çœ ã‚’å¦¨ã’ã€ç¿Œæ—¥ã®é›†ä¸­åŠ›ã‚’ä½ä¸‹ã•ã›ã‚‹åŸå› ã¨ãªã‚Šã¾ã™ã€‚ã•ã‚‰ã«ã€é•·æœŸé–“ã«ã‚ãŸã‚‹é¨’éŸ³æ›éœ²ã¯ã€ã‚¹...
2026-02-01 23:09:43 - llm_service - INFO - [DEBUG] Full LLM response for correction:
{
  "theme": "ã‚³ãƒ©ãƒ ",
  "topic_label": "A",
  "excerpt_type": "P2_P3",
  "japanese_paragraphs": [
    "ä¸€æ–¹ã€éŸ³ã®å•é¡Œã¯æ—¥å¸¸ç”Ÿæ´»ã§è¦‹éã”ã•ã‚ŒãŒã¡ã§ã™ãŒã€å®Ÿéš›ã«ã¯æ·±åˆ»ãªå½±éŸ¿ã‚’åŠã¼ã™ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚ä¾‹ãˆã°ã€å¤œé–“ã®é¨’éŸ³ã¯ç¡çœ ã‚’å¦¨ã’ã€ç¿Œæ—¥ã®é›†ä¸­åŠ›ã‚’ä½ä¸‹ã•ã›ã‚‹åŸå› ã¨ãªã‚Šã¾ã™ã€‚ã•ã‚‰ã«ã€é•·æœŸé–“ã«ã‚ãŸã‚‹é¨’éŸ³æ›éœ²ã¯ã€ã‚¹ãƒˆãƒ¬ã‚¹ã‚„é«˜è¡€åœ§ã®åŸå› ã«ã‚‚ãªã‚‹ã“ã¨ãŒçŸ¥ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚",
    "ã¾ãŸã€å…¬å…±ã®å ´ã§ã®ã‚¹ãƒãƒ›ã®ä½¿ç”¨ã«é–¢ã—ã¦ã‚‚ã€éŸ³ã«ã‚ˆã‚‹è¿·æƒ‘ãŒå•é¡Œè¦–ã•ã‚Œã¦ã„ã¾ã™ã€‚ä¾‹ãˆã°ã€é›»è»Šå†…ã§ã®éŸ³æ¼ã‚Œã‚„ã€å…¬å…±æ–½è¨­ã§ã®å¤§éŸ³é‡ã®é€šçŸ¥éŸ³ã¯ä»–äººã«ä¸å¿«æ„Ÿã‚’ä¸ãˆã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã«å¯¾å‡¦ã™ã‚‹ãŸã‚ã«ã¯ã€å€‹ã€…äººãŒéŸ³ã«ã¤ã„ã¦ã®æ„è­˜ã‚’æŒã¡ã€å‘¨å›²ã¸ã®é…æ…®ã‚’å¿ƒãŒã‘ã‚‹ã“ã¨ãŒæ±‚ã‚ã‚‰ã‚Œã¾ã™ã€‚"
  ],
  "hints": [
    {"en": "exposure", "ja": "æ›éœ²", "kana": "ãƒã‚¯ãƒ­", "pos": "åè©", "usage": "noise exposureã€Œé¨’éŸ³æ›éœ²ã€"},
    {"en": "concentration", "ja": "é›†ä¸­åŠ›", "kana": "ã‚·ãƒ¥ã‚¦ãƒãƒ¥ã‚¦ãƒªãƒ§ã‚¯", "pos": "åè©", "usage": "improve concentrationã€Œé›†ä¸­åŠ›ã‚’é«˜ã‚ã‚‹ã€"},
    {"en": "public facility", "ja": "å…¬å…±æ–½è¨­", "kana": "ã‚³ã‚¦ã‚­ãƒ§ã‚¦ã‚·ã‚»ãƒ„", "pos": "åè©", "usage": "use a public facilityã€Œå…¬å…±æ–½è¨­ã‚’åˆ©ç”¨ã™ã‚‹ã€"},
    {"en": "courtesy", "ja": "é…æ…®", "kana": "ãƒã‚¤ãƒªãƒ§", "pos": "åè©", "usage": "show courtesyã€Œé…æ…®ã‚’ç¤ºã™ã€"},
    {"en": "awareness", "ja": "æ„è­˜", "kana": "ã‚¤ã‚·ã‚­", "pos": "åè©", "usage": "raise awarenessã€Œæ„è­˜ã‚’é«˜ã‚ã‚‹ã€"}
  ],
  "target_words": {"min": 100, "max": 120}
}
2026-02-01 23:09:43 - llm_service - INFO - Cleaned JSON (attempt 1): {
  "theme": "ã‚³ãƒ©ãƒ ",
  "topic_label": "A",
  "excerpt_type": "P2_P3",
  "japanese_paragraphs": [
    "ä¸€æ–¹ã€éŸ³ã®å•é¡Œã¯æ—¥å¸¸ç”Ÿæ´»ã§è¦‹éã”ã•ã‚ŒãŒã¡ã§ã™ãŒã€å®Ÿéš›ã«ã¯æ·±åˆ»ãªå½±éŸ¿ã‚’åŠã¼ã™ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚ä¾‹ãˆã°ã€å¤œé–“ã®é¨’éŸ³ã¯ç¡çœ ã‚’å¦¨ã’ã€ç¿Œæ—¥ã®é›†ä¸­åŠ›ã‚’ä½ä¸‹ã•ã›ã‚‹åŸå› ã¨ãªã‚Šã¾ã™ã€‚ã•ã‚‰ã«ã€é•·æœŸé–“ã«ã‚ãŸã‚‹é¨’éŸ³æ›éœ²ã¯ã€ã‚¹ãƒˆãƒ¬ã‚¹ã‚„é«˜è¡€åœ§ã®åŸå› ã«ã‚‚ãªã‚‹ã“ã¨ãŒçŸ¥ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚",
    "ã¾ãŸã€å…¬å…±ã®å ´ã§ã®ã‚¹ãƒãƒ›ã®ä½¿ç”¨ã«é–¢ã—ã¦ã‚‚ã€éŸ³ã«ã‚ˆã‚‹è¿·æƒ‘ãŒå•é¡Œè¦–ã•ã‚Œã¦ã„ã¾ã™ã€‚ä¾‹ãˆã°ã€é›»è»Šå†…ã§ã®éŸ³æ¼ã‚Œã‚„ã€å…¬å…±æ–½è¨­ã§ã®å¤§éŸ³é‡ã®é€šçŸ¥éŸ³ã¯ä»–...
2026-02-01 23:09:43 - llm_service - INFO - âœ… excerpt_typeæ¤œè¨¼æˆåŠŸ: P2_P3
2026-02-01 23:09:43 - llm_service - INFO - âœ… themeæ¤œè¨¼æˆåŠŸ: ã‚³ãƒ©ãƒ 
2026-02-01 23:09:43 - llm_service - INFO - Successfully generated question: ã‚³ãƒ©ãƒ , excerpt_type: P2_P3
2026-02-01 23:09:43 - database - INFO - Question saved: q_20260201_4acdf6cf - ã‚³ãƒ©ãƒ  (P2_P3)
2026-02-01 23:09:43 - database - INFO - Theme recorded: ã‚³ãƒ©ãƒ  (mode: general)
2026-02-01 23:09:43 - werkzeug - INFO - 127.0.0.1 - - [01/Feb/2026 23:09:43] "POST /api/question HTTP/1.1" 200 -
2026-02-01 23:09:51 - __main__ - INFO - question_text is empty, fetching from DB: q_20260201_4acdf6cf
2026-02-01 23:09:51 - __main__ - INFO - Retrieved japanese_paragraphs from DB: ä¸€æ–¹ã€éŸ³ã®å•é¡Œã¯æ—¥å¸¸ç”Ÿæ´»ã§è¦‹éã”ã•ã‚ŒãŒã¡ã§ã™ãŒã€å®Ÿéš›ã«ã¯æ·±åˆ»ãªå½±éŸ¿ã‚’åŠã¼ã™ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚ä¾‹ãˆã°ã€å¤œé–“ã®é¨’éŸ³ã¯ç¡çœ ã‚’å¦¨ã’ã€ç¿Œæ—¥ã®é›†ä¸­åŠ›ã‚’ä½ä¸‹ã•ã›ã‚‹åŸå› ã¨ãªã‚Šã¾ã™ã€‚ã•ã‚‰ã«ã€é•·æœŸé–“ã«ã‚ãŸã‚‹é¨’éŸ³æ›éœ²ã¯ã€ã‚¹ãƒˆ...
2026-02-01 23:09:59 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-01 23:09:59 - llm_service - INFO - OpenAI API response (attempt 1): {
  "model_answer": "On the other hand, sound issues are often overlooked in daily life, but they can actually have serious impacts.\n\nFor example, noise at night can disrupt sleep, leading to reduce...
2026-02-01 23:09:59 - llm_service - INFO - Model answer JSON (attempt 1): {
  "model_answer": "On the other hand, sound issues are often overlooked in daily life, but they can actually have serious impacts.\n\nFor example, noise at night can disrupt sleep, leading to reduced concentration the next day.\n\nFurthermore, long-term exposure to noise is known to cause stress a...
2026-02-01 23:09:59 - llm_service - INFO - Japanese sentences from original: ['ä¸€æ–¹ã€éŸ³ã®å•é¡Œã¯æ—¥å¸¸ç”Ÿæ´»ã§è¦‹éã”ã•ã‚ŒãŒã¡ã§ã™ãŒã€å®Ÿéš›ã«ã¯æ·±åˆ»ãªå½±éŸ¿ã‚’åŠã¼ã™ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚', 'ä¾‹ãˆã°ã€å¤œé–“ã®é¨’éŸ³ã¯ç¡çœ ã‚’å¦¨ã’ã€ç¿Œæ—¥ã®é›†ä¸­åŠ›ã‚’ä½ä¸‹ã•ã›ã‚‹åŸå› ã¨ãªã‚Šã¾ã™ã€‚', 'ã•ã‚‰ã«ã€é•·æœŸé–“ã«ã‚ãŸã‚‹é¨’éŸ³æ›éœ²ã¯ã€ã‚¹ãƒˆãƒ¬ã‚¹ã‚„é«˜è¡€åœ§ã®åŸå› ã«ã‚‚ãªã‚‹ã“ã¨ãŒçŸ¥ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚', 'ã¾ãŸã€å…¬å…±ã®å ´ã§ã®ã‚¹ãƒãƒ›ã®ä½¿ç”¨ã«é–¢ã—ã¦ã‚‚ã€éŸ³ã«ã‚ˆã‚‹è¿·æƒ‘ãŒå•é¡Œè¦–ã•ã‚Œã¦ã„ã¾ã™ã€‚', 'ä¾‹ãˆã°ã€é›»è»Šå†…ã§ã®éŸ³æ¼ã‚Œã‚„ã€å…¬å…±æ–½è¨­ã§ã®å¤§éŸ³é‡ã®é€šçŸ¥éŸ³ã¯ä»–äººã«ä¸å¿«æ„Ÿã‚’ä¸ãˆã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚', 'ã“ã‚Œã«å¯¾å‡¦ã™ã‚‹ãŸã‚ã«ã¯ã€å€‹ã€…äººãŒéŸ³ã«ã¤ã„ã¦ã®æ„è­˜ã‚’æŒã¡ã€å‘¨å›²ã¸ã®é…æ…®ã‚’å¿ƒãŒã‘ã‚‹ã“ã¨ãŒæ±‚ã‚ã‚‰ã‚Œã¾ã™ã€‚']
2026-02-01 23:09:59 - llm_service - INFO - Fixed explanation with original Japanese sentences
2026-02-01 23:09:59 - llm_service - INFO - Generated model answer word count: 97
2026-02-01 23:09:59 - llm_service - WARNING - Word count 97 is below 100. Will retry generation.
2026-02-01 23:10:06 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-01 23:10:06 - llm_service - INFO - OpenAI API response (attempt 1): {
  "model_answer": "On the other hand, sound issues are often overlooked in daily life, but they can actually have serious effects.\n\nFor example, nighttime noise can disturb sleep and cause a decre...
2026-02-01 23:10:06 - llm_service - INFO - Model answer JSON (attempt 2): {
  "model_answer": "On the other hand, sound issues are often overlooked in daily life, but they can actually have serious effects.\n\nFor example, nighttime noise can disturb sleep and cause a decrease in concentration the following day.\n\nMoreover, prolonged exposure to noise is known to cause s...
2026-02-01 23:10:06 - llm_service - INFO - Japanese sentences from original: ['ä¸€æ–¹ã€éŸ³ã®å•é¡Œã¯æ—¥å¸¸ç”Ÿæ´»ã§è¦‹éã”ã•ã‚ŒãŒã¡ã§ã™ãŒã€å®Ÿéš›ã«ã¯æ·±åˆ»ãªå½±éŸ¿ã‚’åŠã¼ã™ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚', 'ä¾‹ãˆã°ã€å¤œé–“ã®é¨’éŸ³ã¯ç¡çœ ã‚’å¦¨ã’ã€ç¿Œæ—¥ã®é›†ä¸­åŠ›ã‚’ä½ä¸‹ã•ã›ã‚‹åŸå› ã¨ãªã‚Šã¾ã™ã€‚', 'ã•ã‚‰ã«ã€é•·æœŸé–“ã«ã‚ãŸã‚‹é¨’éŸ³æ›éœ²ã¯ã€ã‚¹ãƒˆãƒ¬ã‚¹ã‚„é«˜è¡€åœ§ã®åŸå› ã«ã‚‚ãªã‚‹ã“ã¨ãŒçŸ¥ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚', 'ã¾ãŸã€å…¬å…±ã®å ´ã§ã®ã‚¹ãƒãƒ›ã®ä½¿ç”¨ã«é–¢ã—ã¦ã‚‚ã€éŸ³ã«ã‚ˆã‚‹è¿·æƒ‘ãŒå•é¡Œè¦–ã•ã‚Œã¦ã„ã¾ã™ã€‚', 'ä¾‹ãˆã°ã€é›»è»Šå†…ã§ã®éŸ³æ¼ã‚Œã‚„ã€å…¬å…±æ–½è¨­ã§ã®å¤§éŸ³é‡ã®é€šçŸ¥éŸ³ã¯ä»–äººã«ä¸å¿«æ„Ÿã‚’ä¸ãˆã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚', 'ã“ã‚Œã«å¯¾å‡¦ã™ã‚‹ãŸã‚ã«ã¯ã€å€‹ã€…äººãŒéŸ³ã«ã¤ã„ã¦ã®æ„è­˜ã‚’æŒã¡ã€å‘¨å›²ã¸ã®é…æ…®ã‚’å¿ƒãŒã‘ã‚‹ã“ã¨ãŒæ±‚ã‚ã‚‰ã‚Œã¾ã™ã€‚']
2026-02-01 23:10:06 - llm_service - INFO - Fixed explanation with original Japanese sentences
2026-02-01 23:10:06 - llm_service - INFO - Generated model answer word count: 95
2026-02-01 23:10:06 - llm_service - WARNING - Word count 95 is below 100. Will retry generation.
2026-02-01 23:10:17 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-01 23:10:17 - llm_service - INFO - OpenAI API response (attempt 1): {
  "model_answer": "On the other hand, sound issues are often overlooked in daily life, but they can actually have serious effects.\n\nFor example, noise at night can disrupt sleep and cause a decrea...
2026-02-01 23:10:17 - llm_service - INFO - Model answer JSON (attempt 3): {
  "model_answer": "On the other hand, sound issues are often overlooked in daily life, but they can actually have serious effects.\n\nFor example, noise at night can disrupt sleep and cause a decrease in concentration the next day.\n\nFurthermore, long-term exposure to noise is known to cause stre...
2026-02-01 23:10:17 - llm_service - INFO - Japanese sentences from original: ['ä¸€æ–¹ã€éŸ³ã®å•é¡Œã¯æ—¥å¸¸ç”Ÿæ´»ã§è¦‹éã”ã•ã‚ŒãŒã¡ã§ã™ãŒã€å®Ÿéš›ã«ã¯æ·±åˆ»ãªå½±éŸ¿ã‚’åŠã¼ã™ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚', 'ä¾‹ãˆã°ã€å¤œé–“ã®é¨’éŸ³ã¯ç¡çœ ã‚’å¦¨ã’ã€ç¿Œæ—¥ã®é›†ä¸­åŠ›ã‚’ä½ä¸‹ã•ã›ã‚‹åŸå› ã¨ãªã‚Šã¾ã™ã€‚', 'ã•ã‚‰ã«ã€é•·æœŸé–“ã«ã‚ãŸã‚‹é¨’éŸ³æ›éœ²ã¯ã€ã‚¹ãƒˆãƒ¬ã‚¹ã‚„é«˜è¡€åœ§ã®åŸå› ã«ã‚‚ãªã‚‹ã“ã¨ãŒçŸ¥ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚', 'ã¾ãŸã€å…¬å…±ã®å ´ã§ã®ã‚¹ãƒãƒ›ã®ä½¿ç”¨ã«é–¢ã—ã¦ã‚‚ã€éŸ³ã«ã‚ˆã‚‹è¿·æƒ‘ãŒå•é¡Œè¦–ã•ã‚Œã¦ã„ã¾ã™ã€‚', 'ä¾‹ãˆã°ã€é›»è»Šå†…ã§ã®éŸ³æ¼ã‚Œã‚„ã€å…¬å…±æ–½è¨­ã§ã®å¤§éŸ³é‡ã®é€šçŸ¥éŸ³ã¯ä»–äººã«ä¸å¿«æ„Ÿã‚’ä¸ãˆã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚', 'ã“ã‚Œã«å¯¾å‡¦ã™ã‚‹ãŸã‚ã«ã¯ã€å€‹ã€…äººãŒéŸ³ã«ã¤ã„ã¦ã®æ„è­˜ã‚’æŒã¡ã€å‘¨å›²ã¸ã®é…æ…®ã‚’å¿ƒãŒã‘ã‚‹ã“ã¨ãŒæ±‚ã‚ã‚‰ã‚Œã¾ã™ã€‚']
2026-02-01 23:10:17 - llm_service - INFO - Fixed explanation with original Japanese sentences
2026-02-01 23:10:17 - llm_service - INFO - Generated model answer word count: 100
2026-02-01 23:10:17 - llm_service - INFO - Successfully generated model answer with 100 words
2026-02-01 23:10:17 - werkzeug - INFO - 127.0.0.1 - - [01/Feb/2026 23:10:17] "POST /api/model_answer HTTP/1.1" 200 -
2026-02-01 23:12:33 - database - INFO - Excluded themes: ['ã‚³ãƒ©ãƒ ', 'ç ”ç©¶ç´¹ä»‹', 'å­¦è¡“', 'ãƒ¬ãƒ“ãƒ¥ãƒ¼', 'ãƒ–ãƒ­ã‚°', 'æ™‚äº‹', 'å›³è¡¨']
2026-02-01 23:12:33 - llm_service - INFO - ç¿»è¨³å•é¡Œã‚’ç”Ÿæˆä¸­...
2026-02-01 23:12:33 - llm_service - INFO - ğŸ“Š ç›´è¿‘10å•ã®ã‚µãƒ–ãƒˆãƒ”ãƒƒã‚¯: ['ã‚³ãƒ©ãƒ :A', 'ç ”ç©¶ç´¹ä»‹:C', 'å­¦è¡“:ä¸æ˜', 'å­¦è¡“:D', 'ãƒ¬ãƒ“ãƒ¥ãƒ¼:C', 'å­¦è¡“:E', 'ãƒ–ãƒ­ã‚°:F', 'ã‚³ãƒ©ãƒ :C', 'å­¦è¡“:H', 'å­¦è¡“:B']
2026-02-01 23:12:33 - llm_service - INFO - ğŸ“Š ç›´è¿‘30å•ã®åˆ†å¸ƒ: ã‚³ãƒ©ãƒ =23.3%, ãƒ–ãƒ­ã‚°=6.7%, ãƒ¬ãƒ“ãƒ¥ãƒ¼=6.7%, å›³è¡¨=10.0%, å­¦è¡“=23.3%, æ™‚äº‹=6.7%, ç ”ç©¶ç´¹ä»‹=23.3%
2026-02-01 23:12:33 - llm_service - INFO - ğŸ¯ ã‚·ã‚¹ãƒ†ãƒ ãŒé¸æŠã—ãŸtheme: å›³è¡¨
2026-02-01 23:12:33 - llm_service - INFO - ğŸ“Š ç›´è¿‘10å•ã®åˆ†å¸ƒ: P1_ONLY=40.0%, P2_P3=40.0%, P3_ONLY=20.0%, P4_P5=0.0%
2026-02-01 23:12:33 - llm_service - INFO - ğŸ¯ ã‚·ã‚¹ãƒ†ãƒ ãŒé¸æŠã—ãŸexcerpt_type: P4_P5
2026-02-01 23:12:33 - database - INFO - Excluded themes: ['ã‚³ãƒ©ãƒ ', 'ç ”ç©¶ç´¹ä»‹', 'å­¦è¡“', 'ãƒ¬ãƒ“ãƒ¥ãƒ¼', 'ãƒ–ãƒ­ã‚°', 'æ™‚äº‹', 'å›³è¡¨']
2026-02-01 23:12:33 - llm_service - INFO - ç¿»è¨³å•é¡Œã‚’ç”Ÿæˆä¸­...
2026-02-01 23:12:33 - llm_service - INFO - ğŸ“Š ç›´è¿‘10å•ã®ã‚µãƒ–ãƒˆãƒ”ãƒƒã‚¯: ['ã‚³ãƒ©ãƒ :A', 'ç ”ç©¶ç´¹ä»‹:C', 'å­¦è¡“:ä¸æ˜', 'å­¦è¡“:D', 'ãƒ¬ãƒ“ãƒ¥ãƒ¼:C', 'å­¦è¡“:E', 'ãƒ–ãƒ­ã‚°:F', 'ã‚³ãƒ©ãƒ :C', 'å­¦è¡“:H', 'å­¦è¡“:B']
2026-02-01 23:12:33 - llm_service - INFO - ğŸ“Š ç›´è¿‘30å•ã®åˆ†å¸ƒ: ã‚³ãƒ©ãƒ =23.3%, ãƒ–ãƒ­ã‚°=6.7%, ãƒ¬ãƒ“ãƒ¥ãƒ¼=6.7%, å›³è¡¨=10.0%, å­¦è¡“=23.3%, æ™‚äº‹=6.7%, ç ”ç©¶ç´¹ä»‹=23.3%
2026-02-01 23:12:33 - llm_service - INFO - ğŸ¯ ã‚·ã‚¹ãƒ†ãƒ ãŒé¸æŠã—ãŸtheme: ç ”ç©¶ç´¹ä»‹
2026-02-01 23:12:33 - llm_service - INFO - ğŸ“Š ç›´è¿‘10å•ã®åˆ†å¸ƒ: P1_ONLY=40.0%, P2_P3=40.0%, P3_ONLY=20.0%, P4_P5=0.0%
2026-02-01 23:12:33 - llm_service - INFO - ğŸ¯ ã‚·ã‚¹ãƒ†ãƒ ãŒé¸æŠã—ãŸexcerpt_type: P2_P3
2026-02-01 23:12:40 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-01 23:12:40 - llm_service - INFO - OpenAI API response (attempt 1): {
  "theme": "å›³è¡¨",
  "excerpt_type": "P4_P5",
  "topic_label": "E",
  "japanese_paragraphs": [
    "å…¨ä½“ã¨ã—ã¦ã€é‹å‹•é »åº¦ãŒé«˜ã„äººã»ã©å¥åº·è¨ºæ–­ã®çµæœãŒè‰¯å¥½ã§ã‚ã‚‹ã“ã¨ãŒç¤ºã•ã‚Œã¾ã—ãŸã€‚ã“ã®å‚¾å‘ã¯ç‰¹ã«ä¸­å¹´å±¤ã§é¡•è‘—ã§ã€å®šæœŸçš„ãªé‹å‹•ãŒå¥åº·ç¶­æŒã«æœ‰åŠ¹ã§ã‚ã‚‹ã“ã¨ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚",
    "ã“ã®ã‚ˆã†ãªãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ã€...
2026-02-01 23:12:40 - llm_service - INFO - [DEBUG] Full LLM response for correction:
{
  "theme": "å›³è¡¨",
  "excerpt_type": "P4_P5",
  "topic_label": "E",
  "japanese_paragraphs": [
    "å…¨ä½“ã¨ã—ã¦ã€é‹å‹•é »åº¦ãŒé«˜ã„äººã»ã©å¥åº·è¨ºæ–­ã®çµæœãŒè‰¯å¥½ã§ã‚ã‚‹ã“ã¨ãŒç¤ºã•ã‚Œã¾ã—ãŸã€‚ã“ã®å‚¾å‘ã¯ç‰¹ã«ä¸­å¹´å±¤ã§é¡•è‘—ã§ã€å®šæœŸçš„ãªé‹å‹•ãŒå¥åº·ç¶­æŒã«æœ‰åŠ¹ã§ã‚ã‚‹ã“ã¨ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚",
    "ã“ã®ã‚ˆã†ãªãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ã€æ”¿åºœã‚„ä¼æ¥­ã¯é‹å‹•ã‚’å¥¨åŠ±ã™ã‚‹æ–½ç­–ã‚’å¼·åŒ–ã™ã‚‹ã¹ãã§ã‚ã‚‹ã¨è€ƒãˆã‚‰ã‚Œã¾ã™ã€‚ç‰¹ã«ä¸­å¹´å±¤ã‚’ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã«ã—ãŸå¥åº·ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®å……å®ŸãŒå¿…è¦ã§ã™ã€‚"
  ],
  "hints": [
    {"en": "frequency", "ja": "é »åº¦", "kana": "ãƒ•ãƒªãƒ¼ã‚¯ã‚¨ãƒ³ã‚·ãƒ¼", "pos": "åè©", "usage": "é‹å‹•é »åº¦ã‚’å¢—ã‚„ã™ã€Œincrease exercise frequencyã€"},
    {"en": "health checkup", "ja": "å¥åº·è¨ºæ–­", "kana": "ãƒ˜ãƒ«ã‚¹ ãƒã‚§ãƒƒã‚¯ã‚¢ãƒƒãƒ—", "pos": "åè©", "usage": "å¹´ä¸€å›ã®å¥åº·è¨ºæ–­ã€Œannual health checkupã€"},
    {"en": "effective", "ja": "æœ‰åŠ¹", "kana": "ã‚¨ãƒ•ã‚§ã‚¯ãƒ†ã‚£ãƒ–", "pos": "å½¢å®¹è©", "usage": "ã€œã«æœ‰åŠ¹ã§ã‚ã‚‹ã€Œis effective forã€œã€"},
    {"en": "encourage", "ja": "å¥¨åŠ±ã™ã‚‹", "kana": "ã‚¨ãƒ³ã‚«ãƒ¬ãƒƒã‚¸", "pos": "å‹•è©", "usage": "æ”¿åºœãŒé‹å‹•ã‚’å¥¨åŠ±ã™ã‚‹ã€Œthe government encourages exerciseã€"},
    {"en": "program", "ja": "ãƒ—ãƒ­ã‚°ãƒ©ãƒ ", "kana": "ãƒ—ãƒ­ã‚°ãƒ©ãƒ ", "pos": "åè©", "usage": "å¥åº·ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’å°å…¥ã™ã‚‹ã€Œimplement a health programã€"}
  ],
  "target_words": {"min": 100, "max": 120}
}
2026-02-01 23:12:40 - llm_service - INFO - Cleaned JSON (attempt 1): {
  "theme": "å›³è¡¨",
  "excerpt_type": "P4_P5",
  "topic_label": "E",
  "japanese_paragraphs": [
    "å…¨ä½“ã¨ã—ã¦ã€é‹å‹•é »åº¦ãŒé«˜ã„äººã»ã©å¥åº·è¨ºæ–­ã®çµæœãŒè‰¯å¥½ã§ã‚ã‚‹ã“ã¨ãŒç¤ºã•ã‚Œã¾ã—ãŸã€‚ã“ã®å‚¾å‘ã¯ç‰¹ã«ä¸­å¹´å±¤ã§é¡•è‘—ã§ã€å®šæœŸçš„ãªé‹å‹•ãŒå¥åº·ç¶­æŒã«æœ‰åŠ¹ã§ã‚ã‚‹ã“ã¨ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚",
    "ã“ã®ã‚ˆã†ãªãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ã€æ”¿åºœã‚„ä¼æ¥­ã¯é‹å‹•ã‚’å¥¨åŠ±ã™ã‚‹æ–½ç­–ã‚’å¼·åŒ–ã™ã‚‹ã¹ãã§ã‚ã‚‹ã¨è€ƒãˆã‚‰ã‚Œã¾ã™ã€‚ç‰¹ã«ä¸­å¹´å±¤ã‚’ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã«ã—ãŸå¥åº·ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®å……å®ŸãŒå¿…è¦ã§ã™ã€‚"
  ],
  "hints": [
    {"en": "frequ...
2026-02-01 23:12:40 - llm_service - INFO - âœ… excerpt_typeæ¤œè¨¼æˆåŠŸ: P4_P5
2026-02-01 23:12:40 - llm_service - INFO - âœ… themeæ¤œè¨¼æˆåŠŸ: å›³è¡¨
2026-02-01 23:12:40 - llm_service - INFO - Successfully generated question: å›³è¡¨, excerpt_type: P4_P5
2026-02-01 23:12:40 - database - INFO - Question saved: q_20260201_f85a6441 - å›³è¡¨ (P4_P5)
2026-02-01 23:12:40 - database - INFO - Theme recorded: å›³è¡¨ (mode: general)
2026-02-01 23:12:40 - werkzeug - INFO - 127.0.0.1 - - [01/Feb/2026 23:12:40] "POST /api/question HTTP/1.1" 200 -
2026-02-01 23:12:40 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-01 23:12:40 - llm_service - INFO - OpenAI API response (attempt 1): {
  "theme": "ç ”ç©¶ç´¹ä»‹",
  "topic_label": "E",
  "excerpt_type": "P2_P3",
  "japanese_paragraphs": [
    "ãã®ç ”ç©¶ã§ã¯ã€è¢«é¨“è€…ã«ç•°ãªã‚‹é£Ÿäº‹ç¿’æ…£ã‚’è©¦ã™ã‚ˆã†æŒ‡ç¤ºã—ãŸã€‚Aç¾¤ã«ã¯é«˜ã‚«ãƒ•ã‚§ã‚¤ãƒ³é£Ÿã‚’ã€Bç¾¤ã«ã¯ä½ã‚«ãƒ•ã‚§ã‚¤ãƒ³é£Ÿã‚’ä¸ãˆã€ãã‚Œãã‚Œã®åå¿œã‚’æ¸¬å®šã—ãŸã€‚",
    "ã¾ãŸã€å„è¢«é¨“è€…ã®æ—¥ä¸­ã®ç–²åŠ´æ„Ÿã‚„é›†ä¸­åŠ›ã‚’æ¯æ—¥...
2026-02-01 23:12:40 - llm_service - INFO - [DEBUG] Full LLM response for correction:
{
  "theme": "ç ”ç©¶ç´¹ä»‹",
  "topic_label": "E",
  "excerpt_type": "P2_P3",
  "japanese_paragraphs": [
    "ãã®ç ”ç©¶ã§ã¯ã€è¢«é¨“è€…ã«ç•°ãªã‚‹é£Ÿäº‹ç¿’æ…£ã‚’è©¦ã™ã‚ˆã†æŒ‡ç¤ºã—ãŸã€‚Aç¾¤ã«ã¯é«˜ã‚«ãƒ•ã‚§ã‚¤ãƒ³é£Ÿã‚’ã€Bç¾¤ã«ã¯ä½ã‚«ãƒ•ã‚§ã‚¤ãƒ³é£Ÿã‚’ä¸ãˆã€ãã‚Œãã‚Œã®åå¿œã‚’æ¸¬å®šã—ãŸã€‚",
    "ã¾ãŸã€å„è¢«é¨“è€…ã®æ—¥ä¸­ã®ç–²åŠ´æ„Ÿã‚„é›†ä¸­åŠ›ã‚’æ¯æ—¥è¨˜éŒ²ã•ã›ã€æ¯”è¼ƒã‚’è¡Œã£ãŸã€‚ä¸€æ–¹ã§ã€ã‚«ãƒ•ã‚§ã‚¤ãƒ³æ‘‚å–é‡ãŒä¸ãˆã‚‹å½±éŸ¿ã«ã¯å€‹äººå·®ãŒå¤§ãã„ã“ã¨ã‚‚è€ƒæ…®ã•ã‚ŒãŸã€‚"
  ],
  "hints": [
    {"en": "subject", "ja": "è¢«é¨“è€…", "kana": "ãƒ’ã‚±ãƒ³ã‚·ãƒ£", "pos": "åè©", "usage": "The subject participated in the experiment.ã€Œè¢«é¨“è€…ãŒå®Ÿé¨“ã«å‚åŠ ã—ãŸã€‚ã€"},
    {"en": "diet", "ja": "é£Ÿäº‹", "kana": "ã‚·ãƒ§ã‚¯ã‚¸", "pos": "åè©", "usage": "A balanced diet is important.ã€Œãƒãƒ©ãƒ³ã‚¹ã®å–ã‚ŒãŸé£Ÿäº‹ãŒé‡è¦ã§ã‚ã‚‹ã€‚ã€"},
    {"en": "caffeine", "ja": "ã‚«ãƒ•ã‚§ã‚¤ãƒ³", "kana": "ã‚«ãƒ•ã‚§ã‚¤ãƒ³", "pos": "åè©", "usage": "Caffeine can affect sleep patterns.ã€Œã‚«ãƒ•ã‚§ã‚¤ãƒ³ã¯ç¡çœ ãƒ‘ã‚¿ãƒ¼ãƒ³ã«å½±éŸ¿ã‚’ä¸ãˆã‚‹ã“ã¨ãŒã‚ã‚‹ã€‚ã€"},
    {"en": "record", "ja": "è¨˜éŒ²ã™ã‚‹", "kana": "ã‚­ãƒ­ã‚¯ã‚¹ãƒ«", "pos": "å‹•è©", "usage": "Please record your daily activities.ã€Œæ—¥å¸¸ã®æ´»å‹•ã‚’è¨˜éŒ²ã—ã¦ãã ã•ã„ã€‚ã€"},
    {"en": "fatigue", "ja": "ç–²åŠ´æ„Ÿ", "kana": "ãƒ’ãƒ­ã‚¦ã‚«ãƒ³", "pos": "åè©", "usage": "He felt a sense of fatigue after the long trip.ã€Œé•·æ—…ã®å¾Œã€å½¼ã¯ç–²åŠ´æ„Ÿã‚’è¦šãˆãŸã€‚ã€"}
  ],
  "target_words": {"min": 100, "max": 120}
}
2026-02-01 23:12:40 - llm_service - INFO - Cleaned JSON (attempt 1): {
  "theme": "ç ”ç©¶ç´¹ä»‹",
  "topic_label": "E",
  "excerpt_type": "P2_P3",
  "japanese_paragraphs": [
    "ãã®ç ”ç©¶ã§ã¯ã€è¢«é¨“è€…ã«ç•°ãªã‚‹é£Ÿäº‹ç¿’æ…£ã‚’è©¦ã™ã‚ˆã†æŒ‡ç¤ºã—ãŸã€‚Aç¾¤ã«ã¯é«˜ã‚«ãƒ•ã‚§ã‚¤ãƒ³é£Ÿã‚’ã€Bç¾¤ã«ã¯ä½ã‚«ãƒ•ã‚§ã‚¤ãƒ³é£Ÿã‚’ä¸ãˆã€ãã‚Œãã‚Œã®åå¿œã‚’æ¸¬å®šã—ãŸã€‚",
    "ã¾ãŸã€å„è¢«é¨“è€…ã®æ—¥ä¸­ã®ç–²åŠ´æ„Ÿã‚„é›†ä¸­åŠ›ã‚’æ¯æ—¥è¨˜éŒ²ã•ã›ã€æ¯”è¼ƒã‚’è¡Œã£ãŸã€‚ä¸€æ–¹ã§ã€ã‚«ãƒ•ã‚§ã‚¤ãƒ³æ‘‚å–é‡ãŒä¸ãˆã‚‹å½±éŸ¿ã«ã¯å€‹äººå·®ãŒå¤§ãã„ã“ã¨ã‚‚è€ƒæ…®ã•ã‚ŒãŸã€‚"
  ],
  "hints": [
    {"en": "subject", "ja": "è¢«é¨“è€…...
2026-02-01 23:12:40 - llm_service - INFO - âœ… excerpt_typeæ¤œè¨¼æˆåŠŸ: P2_P3
2026-02-01 23:12:40 - llm_service - INFO - âœ… themeæ¤œè¨¼æˆåŠŸ: ç ”ç©¶ç´¹ä»‹
2026-02-01 23:12:40 - llm_service - INFO - Successfully generated question: ç ”ç©¶ç´¹ä»‹, excerpt_type: P2_P3
2026-02-01 23:12:40 - database - INFO - Question saved: q_20260201_87a0c18d - ç ”ç©¶ç´¹ä»‹ (P2_P3)
2026-02-01 23:12:40 - database - INFO - Theme recorded: ç ”ç©¶ç´¹ä»‹ (mode: general)
2026-02-01 23:12:40 - werkzeug - INFO - 127.0.0.1 - - [01/Feb/2026 23:12:40] "POST /api/question HTTP/1.1" 200 -
2026-02-01 23:20:54 - werkzeug - INFO -  * Detected change in '/workspaces/miyazaki_igaku_100words/llm_service.py', reloading
2026-02-01 23:20:55 - werkzeug - INFO -  * Restarting with stat
2026-02-01 23:20:57 - __main__ - INFO - ğŸš€ ã¿ã‚„å¡¾ã€€è‹±ä½œæ–‡ç‰¹è¨“è¬›åº§ã€€å®®å´å¤§å­¦åŒ»å­¦éƒ¨ï¼ˆå’Œæ–‡è‹±è¨³ï¼‰ v3.0.0 èµ·å‹•: http://localhost:8001
2026-02-01 23:20:57 - __main__ - INFO - ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹: data/miyazaki_igaku_eisakubun.db
2026-02-01 23:20:57 - __main__ - INFO - ğŸ¯ æœ‰åŠ¹æ©Ÿèƒ½: 4/4
2026-02-01 23:20:57 - werkzeug - WARNING -  * Debugger is active!
2026-02-01 23:20:57 - werkzeug - INFO -  * Debugger PIN: 110-605-718
