nohup: ignoring input
2026-01-31 01:42:47 - __main__ - INFO - ğŸš€ ã¿ã‚„å¡¾ã€€è‹±ä½œæ–‡ç‰¹è¨“è¬›åº§ã€€å®®å´å¤§å­¦åŒ»å­¦éƒ¨ï¼ˆå’Œæ–‡è‹±è¨³ï¼‰ v3.0.0 èµ·å‹•: http://localhost:8001
2026-01-31 01:42:47 - __main__ - INFO - ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹: data/miyazaki_igaku_eisakubun.db
2026-01-31 01:42:47 - __main__ - INFO - ğŸ¯ æœ‰åŠ¹æ©Ÿèƒ½: 4/4
 * Serving Flask app 'app'
 * Debug mode: on
2026-01-31 01:42:48 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8001
 * Running on http://10.0.10.26:8001
2026-01-31 01:42:48 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2026-01-31 01:42:48 - werkzeug - INFO -  * Restarting with stat
2026-01-31 01:42:48 - __main__ - INFO - ğŸš€ ã¿ã‚„å¡¾ã€€è‹±ä½œæ–‡ç‰¹è¨“è¬›åº§ã€€å®®å´å¤§å­¦åŒ»å­¦éƒ¨ï¼ˆå’Œæ–‡è‹±è¨³ï¼‰ v3.0.0 èµ·å‹•: http://localhost:8001
2026-01-31 01:42:48 - __main__ - INFO - ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹: data/miyazaki_igaku_eisakubun.db
2026-01-31 01:42:48 - __main__ - INFO - ğŸ¯ æœ‰åŠ¹æ©Ÿèƒ½: 4/4
2026-01-31 01:42:48 - werkzeug - WARNING -  * Debugger is active!
2026-01-31 01:42:48 - werkzeug - INFO -  * Debugger PIN: 519-604-230
2026-01-31 01:42:50 - llm_service - INFO - Step 1 - Punctuation normalized (first 100 chars): according to a recent survey, traffic congestion has been worsening in urban areas of japan
in parti...
2026-01-31 01:42:50 - llm_service - INFO - Step 2 - User input normalized (first 100 chars): According to a recent survey, traffic congestion has been worsening in urban areas of japan.
In part...
2026-01-31 01:42:50 - llm_service - INFO - Multi-sentence mode: preserving newlines in user input
2026-01-31 01:42:50 - llm_service - INFO - Question text for correction: æœ€è¿‘ã®èª¿æŸ»ã«ã‚ˆã‚‹ã¨ã€æ—¥æœ¬ã®éƒ½å¸‚éƒ¨ã§ã¯äº¤é€šæ¸‹æ»ãŒæ‚ªåŒ–ã—ã¦ã„ã‚‹ã€‚
ç‰¹ã«æœã®é€šå‹¤ãƒ©ãƒƒã‚·ãƒ¥ã‚¢ãƒ¯ãƒ¼æ™‚ã«ã¯ã€ä¸»è¦å¹¹ç·šé“è·¯ã§ã®è»Šä¸¡ã®æµã‚ŒãŒå¤§å¹…ã«ä½ä¸‹ã™ã‚‹ã€‚...
2026-01-31 01:42:50 - llm_service - INFO - Required points determined from Japanese text: 2 sentences
2026-01-31 01:42:50 - llm_service - INFO - Required points for this correction: 2
2026-01-31 01:42:50 - llm_service - INFO - Word count: 34
2026-01-31 01:42:50 - llm_service - INFO - Correction attempt 1/3
2026-01-31 01:43:10 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-31 01:43:10 - llm_service - INFO - OpenAI API response (attempt 1): 
{
  "original": "According to a recent survey, traffic congestion has been worsening in urban areas of japan.\nIn particular, during the morning commuting rush hour, the flow of vehicles on major art...
2026-01-31 01:43:10 - llm_service - INFO - Full LLM response for correction (length: 3313 chars)
2026-01-31 01:43:10 - llm_service - INFO - Response first 500 chars: 
{
  "original": "According to a recent survey, traffic congestion has been worsening in urban areas of japan.\nIn particular, during the morning commuting rush hour, the flow of vehicles on major arterial roads slows down significantly.",
  "corrected": "According to a recent survey, traffic congestion has been worsening in urban areas of Japan.\n\nIn particular, during the morning commuting rush hour, the flow of vehicles on major arterial roads slows down significantly.",
  "points": [
    {

2026-01-31 01:43:10 - llm_service - INFO - Response last 500 chars: ies. (äº¤é€šæ¸‹æ»ã¯å¤§éƒ½å¸‚ã§ä¸€èˆ¬çš„ã§ã™ã€‚) ï¼ Heavy traffic delayed my commute. (äº¤é€šé‡ãŒå¤šãã¦é€šå‹¤ãŒé…ã‚ŒãŸã€‚)\n\n2æ–‡ç›®: In particular, during the morning commuting rush hour, the flow of vehicles on major arterial roads slows down significantly.\nï¼ˆç‰¹ã«æœã®é€šå‹¤ãƒ©ãƒƒã‚·ãƒ¥ã‚¢ãƒ¯ãƒ¼æ™‚ã«ã¯ã€ä¸»è¦å¹¹ç·šé“è·¯ã§ã®è»Šä¸¡ã®æµã‚ŒãŒå¤§å¹…ã«ä½ä¸‹ã™ã‚‹ã€‚ï¼‰\narterialï¼ˆå½¢å®¹è©ï¼šå‹•è„ˆã®ï¼šä¸»è¦ãªãƒ»å¹¹ç·šã®ï¼‰ï¼majorï¼ˆå½¢å®¹è©ï¼šä¸»è¦ãªï¼šæœ€ã‚‚é‡è¦ãªï¼‰ã§ã€arterialã¯ç‰¹ã«äº¤é€šã‚„é“è·¯ã®ä¸»è¦ãªè·¯ç·šã‚’è¡¨ã—ã€majorã¯ãã®ä¸­ã§ã‚‚æœ€ã‚‚é‡è¦ãªè¦ç´ ã‚’æŒ‡ã—ã¾ã™ã€‚\nã€å‚è€ƒã€‘arterial roadsï¼ˆå¹¹ç·šé“è·¯ï¼‰ï¼major roadsï¼ˆä¸»è¦é“è·¯ï¼‰\nä¾‹ï¼šThe city has several arterial roads. (ãã®éƒ½å¸‚ã«ã¯ã„ãã¤ã‹ã®å¹¹ç·šé“è·¯ãŒã‚ã‚‹ã€‚) ï¼ This is a major issue. (ã“ã‚Œã¯ä¸»è¦ãªå•é¡Œã§ã™ã€‚)"
}
2026-01-31 01:43:10 - llm_service - INFO - Full response saved to: /workspaces/miyazaki_igaku_100words/debug/llm_response_1.json
2026-01-31 01:43:10 - llm_service - WARNING - Skipping point 1: before 'ã€å…¨ä½“è©•ä¾¡ã€‘' not found in student answer
2026-01-31 01:43:10 - llm_service - INFO - Before normalization: 2 points
2026-01-31 01:43:10 - points_normalizer - INFO - Starting points normalization: 2 points
2026-01-31 01:43:10 - points_normalizer - INFO - Student answer split into 2 sentences
2026-01-31 01:43:10 - points_normalizer - INFO - Original user input split into 2 sentences
2026-01-31 01:43:10 - points_normalizer - INFO - Processing point 1: before='According to a recent survey, traffic congestion h...', level='âŒæ–‡æ³•ãƒŸã‚¹'
2026-01-31 01:43:10 - points_normalizer - INFO - Point 1: Normalized before='According to a recent survey, traffic congestion h...'
2026-01-31 01:43:10 - points_normalizer - INFO - Point 1: Found in sentence 1: 'According to a recent survey, traffic congestion h...'
2026-01-31 01:43:10 - points_normalizer - INFO - Point 1: Replaced fragment in sentence: 'According to a recent survey, traffic congestion h...'
2026-01-31 01:43:10 - points_normalizer - INFO - Level is âŒ, keeping after: 'According to a recent survey, traffic congestion h...'
2026-01-31 01:43:10 - points_normalizer - INFO - Point 1: Original user input: 'according to a recent survey, traffic congestion h...'
2026-01-31 01:43:10 - points_normalizer - INFO - Point 1: Normalized successfully (sentence_no=1)
2026-01-31 01:43:10 - points_normalizer - INFO - Processing point 2: before='In particular, during the morning commuting rush h...', level='âœ…æ­£ã—ã„è¡¨ç¾'
2026-01-31 01:43:10 - points_normalizer - INFO - Point 2: Normalized before='In particular, during the morning commuting rush h...'
2026-01-31 01:43:10 - points_normalizer - INFO - Point 2: Found in sentence 2: 'In particular, during the morning commuting rush h...'
2026-01-31 01:43:10 - points_normalizer - INFO - Point 2: Original user input: 'in particular, during the morning commuting rush h...'
2026-01-31 01:43:10 - points_normalizer - INFO - Point 2: Normalized successfully (sentence_no=2)
2026-01-31 01:43:10 - points_normalizer - INFO - Points normalization complete: 2 points
2026-01-31 01:43:10 - llm_service - INFO - After normalization: 2 points
2026-01-31 01:43:10 - llm_service - INFO - Points check: current=2, non-evaluation=2, required=2
2026-01-31 01:43:10 - llm_service - INFO - âœ… Correction successful: 2 points
2026-01-31 01:43:10 - database - INFO - Submission saved: s_20260131_2caab0cc (mode: general, no scoring)
2026-01-31 01:43:10 - werkzeug - INFO - 127.0.0.1 - - [31/Jan/2026 01:43:10] "POST /api/correct-multi HTTP/1.1" 200 -
2026-01-31 01:43:39 - llm_service - INFO - Step 1 - Punctuation normalized (first 100 chars): according to a recent survey, traffic congestion has been worsening in urban areas of japan
in parti...
2026-01-31 01:43:39 - llm_service - INFO - Step 2 - User input normalized (first 100 chars): According to a recent survey, traffic congestion has been worsening in urban areas of japan.
In part...
2026-01-31 01:43:39 - llm_service - INFO - Multi-sentence mode: preserving newlines in user input
2026-01-31 01:43:39 - llm_service - INFO - Question text for correction: æœ€è¿‘ã®èª¿æŸ»ã«ã‚ˆã‚‹ã¨ã€æ—¥æœ¬ã®éƒ½å¸‚éƒ¨ã§ã¯äº¤é€šæ¸‹æ»ãŒæ‚ªåŒ–ã—ã¦ã„ã‚‹ã€‚
ç‰¹ã«æœã®é€šå‹¤ãƒ©ãƒƒã‚·ãƒ¥ã‚¢ãƒ¯ãƒ¼æ™‚ã«ã¯ã€ä¸»è¦å¹¹ç·šé“è·¯ã§ã®è»Šä¸¡ã®æµã‚ŒãŒå¤§å¹…ã«ä½ä¸‹ã™ã‚‹ã€‚...
2026-01-31 01:43:39 - llm_service - INFO - Required points determined from Japanese text: 2 sentences
2026-01-31 01:43:39 - llm_service - INFO - Required points for this correction: 2
2026-01-31 01:43:39 - llm_service - INFO - Word count: 34
2026-01-31 01:43:39 - llm_service - INFO - Correction attempt 1/3
2026-01-31 01:43:52 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-31 01:43:52 - llm_service - INFO - OpenAI API response (attempt 1): 
{
  "original": "According to a recent survey, traffic congestion has been worsening in urban areas of japan.\nIn particular, during the morning commuting rush hour, the flow of vehicles on major art...
2026-01-31 01:43:52 - llm_service - INFO - Full LLM response for correction (length: 3244 chars)
2026-01-31 01:43:52 - llm_service - INFO - Response first 500 chars: 
{
  "original": "According to a recent survey, traffic congestion has been worsening in urban areas of japan.\nIn particular, during the morning commuting rush hour, the flow of vehicles on major arterial roads slows down significantly.",
  "corrected": "According to a recent survey, traffic congestion has been worsening in urban areas of Japan.\n\nIn particular, during the morning commuting rush hour, the flow of vehicles on major arterial roads slows down significantly.",
  "points": [
    {

2026-01-31 01:43:52 - llm_service - INFO - Response last 500 chars: hows... (æœ€è¿‘ã®ç ”ç©¶ã¯...ã‚’ç¤ºã™ã€‚) ï¼ The current situation is difficult. (ç¾åœ¨ã®çŠ¶æ³ã¯å›°é›£ã§ã™ã€‚)\n\n2æ–‡ç›®: In particular, during the morning commuting rush hour, the flow of vehicles on major arterial roads decreases significantly.\nï¼ˆç‰¹ã«æœã®é€šå‹¤ãƒ©ãƒƒã‚·ãƒ¥ã‚¢ãƒ¯ãƒ¼æ™‚ã«ã¯ã€ä¸»è¦å¹¹ç·šé“è·¯ã§ã®è»Šä¸¡ã®æµã‚ŒãŒå¤§å¹…ã«ä½ä¸‹ã—ã¾ã™ã€‚ï¼‰\ndecreaseï¼ˆå‹•è©ï¼šæ¸›å°‘ã™ã‚‹ï¼šé‡ã‚„é€Ÿåº¦ãŒä¸‹ãŒã‚‹æ–‡è„ˆï¼‰ï¼reduceï¼ˆå‹•è©ï¼šæ¸›ã‚‰ã™ï¼šæ„å›³çš„ã«é‡ã‚’ä¸‹ã’ã‚‹æ–‡è„ˆï¼‰ã§ã€decreaseã¯è‡ªç„¶ãªæ¸›å°‘ã‚’æŒ‡ã—ã€reduceã¯æ„å›³çš„ãªæ¸›å°‘ã‚’ç¤ºã—ã¾ã™ã€‚\nã€å‚è€ƒã€‘decrease in speedï¼ˆé€Ÿåº¦ã®æ¸›å°‘ï¼‰ï¼reduce the riskï¼ˆãƒªã‚¹ã‚¯ã‚’æ¸›ã‚‰ã™ï¼‰\nä¾‹: The speed decreased quickly. (é€Ÿåº¦ãŒæ€¥é€Ÿã«è½ã¡ãŸã€‚) ï¼ We reduced the risk of error. (ã‚¨ãƒ©ãƒ¼ã®ãƒªã‚¹ã‚¯ã‚’æ¸›ã‚‰ã—ãŸã€‚)"
}
2026-01-31 01:43:52 - llm_service - INFO - Full response saved to: /workspaces/miyazaki_igaku_100words/debug/llm_response_1.json
2026-01-31 01:43:52 - llm_service - WARNING - Skipping point 1: before 'ã€å…¨ä½“è©•ä¾¡ã€‘' not found in student answer
2026-01-31 01:43:52 - llm_service - INFO - Before normalization: 2 points
2026-01-31 01:43:52 - points_normalizer - INFO - Starting points normalization: 2 points
2026-01-31 01:43:52 - points_normalizer - INFO - Student answer split into 2 sentences
2026-01-31 01:43:52 - points_normalizer - INFO - Original user input split into 2 sentences
2026-01-31 01:43:52 - points_normalizer - INFO - Processing point 1: before='According to a recent survey, traffic congestion h...', level='âŒæ–‡æ³•ãƒŸã‚¹'
2026-01-31 01:43:52 - points_normalizer - INFO - Point 1: Normalized before='According to a recent survey, traffic congestion h...'
2026-01-31 01:43:52 - points_normalizer - INFO - Point 1: Found in sentence 1: 'According to a recent survey, traffic congestion h...'
2026-01-31 01:43:52 - points_normalizer - INFO - Point 1: Replaced fragment in sentence: 'According to a recent survey, traffic congestion h...'
2026-01-31 01:43:52 - points_normalizer - INFO - Level is âŒ, keeping after: 'According to a recent survey, traffic congestion h...'
2026-01-31 01:43:52 - points_normalizer - INFO - Point 1: Original user input: 'according to a recent survey, traffic congestion h...'
2026-01-31 01:43:52 - points_normalizer - INFO - Point 1: Normalized successfully (sentence_no=1)
2026-01-31 01:43:52 - points_normalizer - INFO - Processing point 2: before='In particular, during the morning commuting rush h...', level='âœ…æ­£ã—ã„è¡¨ç¾'
2026-01-31 01:43:52 - points_normalizer - INFO - Point 2: Normalized before='In particular, during the morning commuting rush h...'
2026-01-31 01:43:52 - points_normalizer - INFO - Point 2: Found in sentence 2: 'In particular, during the morning commuting rush h...'
2026-01-31 01:43:52 - points_normalizer - INFO - Point 2: Original user input: 'in particular, during the morning commuting rush h...'
2026-01-31 01:43:52 - points_normalizer - INFO - Point 2: Normalized successfully (sentence_no=2)
2026-01-31 01:43:52 - points_normalizer - INFO - Points normalization complete: 2 points
2026-01-31 01:43:52 - llm_service - INFO - After normalization: 2 points
2026-01-31 01:43:52 - llm_service - INFO - Points check: current=2, non-evaluation=2, required=2
2026-01-31 01:43:52 - llm_service - INFO - âœ… Correction successful: 2 points
2026-01-31 01:43:52 - database - INFO - Submission saved: s_20260131_293df7e3 (mode: general, no scoring)
2026-01-31 01:43:52 - werkzeug - INFO - 127.0.0.1 - - [31/Jan/2026 01:43:52] "POST /api/correct-multi HTTP/1.1" 200 -
