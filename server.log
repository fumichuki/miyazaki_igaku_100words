nohup: ignoring input
2026-01-31 01:29:16 - __main__ - INFO - ğŸš€ ã¿ã‚„å¡¾ã€€è‹±ä½œæ–‡ç‰¹è¨“è¬›åº§ã€€å®®å´å¤§å­¦åŒ»å­¦éƒ¨ï¼ˆå’Œæ–‡è‹±è¨³ï¼‰ v3.0.0 èµ·å‹•: http://localhost:8001
2026-01-31 01:29:16 - __main__ - INFO - ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹: data/miyazaki_igaku_eisakubun.db
2026-01-31 01:29:16 - __main__ - INFO - ğŸ¯ æœ‰åŠ¹æ©Ÿèƒ½: 4/4
 * Serving Flask app 'app'
 * Debug mode: on
2026-01-31 01:29:16 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8001
 * Running on http://10.0.10.26:8001
2026-01-31 01:29:16 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2026-01-31 01:29:16 - werkzeug - INFO -  * Restarting with stat
2026-01-31 01:29:17 - __main__ - INFO - ğŸš€ ã¿ã‚„å¡¾ã€€è‹±ä½œæ–‡ç‰¹è¨“è¬›åº§ã€€å®®å´å¤§å­¦åŒ»å­¦éƒ¨ï¼ˆå’Œæ–‡è‹±è¨³ï¼‰ v3.0.0 èµ·å‹•: http://localhost:8001
2026-01-31 01:29:17 - __main__ - INFO - ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹: data/miyazaki_igaku_eisakubun.db
2026-01-31 01:29:17 - __main__ - INFO - ğŸ¯ æœ‰åŠ¹æ©Ÿèƒ½: 4/4
2026-01-31 01:29:17 - werkzeug - WARNING -  * Debugger is active!
2026-01-31 01:29:17 - werkzeug - INFO -  * Debugger PIN: 519-604-230
2026-01-31 01:29:19 - werkzeug - INFO - 127.0.0.1 - - [31/Jan/2026 01:29:19] "GET /health HTTP/1.1" 200 -
2026-01-31 01:29:28 - werkzeug - INFO - 127.0.0.1 - - [31/Jan/2026 01:29:28] "GET /health HTTP/1.1" 200 -
2026-01-31 01:31:43 - database - INFO - Excluded themes: ['æ™‚äº‹', 'å›³è¡¨', 'å­¦è¡“', 'ãƒ¬ãƒ“ãƒ¥ãƒ¼', 'ç ”ç©¶ç´¹ä»‹', 'ãƒ–ãƒ­ã‚°', 'ã‚³ãƒ©ãƒ ']
2026-01-31 01:31:43 - llm_service - INFO - ç¿»è¨³å•é¡Œã‚’ç”Ÿæˆä¸­...
2026-01-31 01:31:43 - llm_service - INFO - ğŸ“Š ç›´è¿‘10å•ã®ã‚µãƒ–ãƒˆãƒ”ãƒƒã‚¯: ['æ™‚äº‹:G', 'å›³è¡¨:ä¸æ˜', 'å­¦è¡“:F', 'ãƒ¬ãƒ“ãƒ¥ãƒ¼:ä¸æ˜', 'ãƒ¬ãƒ“ãƒ¥ãƒ¼:F', 'ç ”ç©¶ç´¹ä»‹:C', 'ãƒ–ãƒ­ã‚°:F', 'ãƒ–ãƒ­ã‚°:C', 'æ™‚äº‹:B', 'å­¦è¡“:A']
2026-01-31 01:31:43 - llm_service - INFO - ğŸ“Š ç›´è¿‘30å•ã®åˆ†å¸ƒ: ã‚³ãƒ©ãƒ =13.3%, ãƒ–ãƒ­ã‚°=20.0%, ãƒ¬ãƒ“ãƒ¥ãƒ¼=10.0%, å›³è¡¨=16.7%, å­¦è¡“=23.3%, æ™‚äº‹=6.7%, ç ”ç©¶ç´¹ä»‹=10.0%
2026-01-31 01:31:43 - llm_service - INFO - ğŸ¯ ã‚·ã‚¹ãƒ†ãƒ ãŒé¸æŠã—ãŸtheme: æ™‚äº‹
2026-01-31 01:31:43 - llm_service - INFO - ğŸ“Š ç›´è¿‘10å•ã®åˆ†å¸ƒ: P1_ONLY=30.0%, P2_P3=40.0%, P3_ONLY=30.0%, P4_P5=0.0%
2026-01-31 01:31:43 - llm_service - INFO - ğŸ¯ ã‚·ã‚¹ãƒ†ãƒ ãŒé¸æŠã—ãŸexcerpt_type: P2_P3
2026-01-31 01:31:51 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-31 01:31:51 - llm_service - INFO - OpenAI API response (attempt 1): {
  "theme": "æ™‚äº‹",
  "topic_label": "D",
  "excerpt_type": "P2_P3",
  "japanese_paragraphs": [
    "ã“ã®æŠ€è¡“ã¯ã€æ´ªæ°´ã®äºˆæ¸¬ç²¾åº¦ã‚’å¤§å¹…ã«å‘ä¸Šã•ã›ã‚‹ã“ã¨ãŒæœŸå¾…ã•ã‚Œã¦ã„ã‚‹ã€‚ç‰¹ã«ã€åœ°åŸŸã”ã¨ã®é™æ°´é‡ãƒ‡ãƒ¼ã‚¿ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§è§£æã™ã‚‹ã“ã¨ã§ã€å±é™ºåº¦ã®é«˜ã„åœ°åŸŸã‚’æ—©æœŸã«ç‰¹å®šã™ã‚‹ã“ã¨ãŒå¯èƒ½ã¨ãªã‚‹ã€‚",
    "ã¾ãŸã€ã“...
2026-01-31 01:31:51 - llm_service - INFO - [DEBUG] Full LLM response for correction:
{
  "theme": "æ™‚äº‹",
  "topic_label": "D",
  "excerpt_type": "P2_P3",
  "japanese_paragraphs": [
    "ã“ã®æŠ€è¡“ã¯ã€æ´ªæ°´ã®äºˆæ¸¬ç²¾åº¦ã‚’å¤§å¹…ã«å‘ä¸Šã•ã›ã‚‹ã“ã¨ãŒæœŸå¾…ã•ã‚Œã¦ã„ã‚‹ã€‚ç‰¹ã«ã€åœ°åŸŸã”ã¨ã®é™æ°´é‡ãƒ‡ãƒ¼ã‚¿ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§è§£æã™ã‚‹ã“ã¨ã§ã€å±é™ºåº¦ã®é«˜ã„åœ°åŸŸã‚’æ—©æœŸã«ç‰¹å®šã™ã‚‹ã“ã¨ãŒå¯èƒ½ã¨ãªã‚‹ã€‚",
    "ã¾ãŸã€ã“ã‚Œã«ã‚ˆã‚Šè‡ªæ²»ä½“ã¯è¿…é€Ÿã«ä½æ°‘ã¸ã®é¿é›£å‹§å‘Šã‚’ç™ºä»¤ã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã€‚ã•ã‚‰ã«ã€ã‚¤ãƒ³ãƒ•ãƒ©ã®æ•´å‚™ã‚„è³‡æºã®å‰²ã‚Šå½“ã¦ãŒåŠ¹ç‡çš„ã«è¡Œãˆã‚‹ãŸã‚ã€è¢«å®³ã®æœ€å°åŒ–ã«ã‚‚å¯„ä¸ã™ã‚‹ã ã‚ã†ã€‚"
  ],
  "hints": [
    {"en": "flood", "ja": "æ´ªæ°´", "kana": "ãƒ•ãƒ©ãƒƒãƒ‰", "pos": "åè©", "usage": "æ´ªæ°´ã®äºˆæ¸¬ç²¾åº¦ã‚’å‘ä¸Šã•ã›ã‚‹"},
    {"en": "real-time", "ja": "ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ", "kana": "ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ", "pos": "å½¢å®¹è©", "usage": "ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§è§£æã™ã‚‹"},
    {"en": "evacuation advisory", "ja": "é¿é›£å‹§å‘Š", "kana": "ãƒ’ãƒŠãƒ³ã‚«ãƒ³ã‚³ã‚¯", "pos": "åè©", "usage": "ä½æ°‘ã¸ã®é¿é›£å‹§å‘Šã‚’ç™ºä»¤ã™ã‚‹"},
    {"en": "infrastructure", "ja": "ã‚¤ãƒ³ãƒ•ãƒ©", "kana": "ã‚¤ãƒ³ãƒ•ãƒ©", "pos": "åè©", "usage": "ã‚¤ãƒ³ãƒ•ãƒ©ã®æ•´å‚™ã‚’è¡Œã†"},
    {"en": "minimize", "ja": "æœ€å°åŒ–ã™ã‚‹", "kana": "ã‚µã‚¤ã‚·ãƒ§ã‚¦ã‚«ã‚¹ãƒ«", "pos": "å‹•è©", "usage": "è¢«å®³ã®æœ€å°åŒ–ã«å¯„ä¸ã™ã‚‹"}
  ],
  "target_words": {"min": 100, "max": 120}
}
2026-01-31 01:31:51 - llm_service - INFO - Cleaned JSON (attempt 1): {
  "theme": "æ™‚äº‹",
  "topic_label": "D",
  "excerpt_type": "P2_P3",
  "japanese_paragraphs": [
    "ã“ã®æŠ€è¡“ã¯ã€æ´ªæ°´ã®äºˆæ¸¬ç²¾åº¦ã‚’å¤§å¹…ã«å‘ä¸Šã•ã›ã‚‹ã“ã¨ãŒæœŸå¾…ã•ã‚Œã¦ã„ã‚‹ã€‚ç‰¹ã«ã€åœ°åŸŸã”ã¨ã®é™æ°´é‡ãƒ‡ãƒ¼ã‚¿ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§è§£æã™ã‚‹ã“ã¨ã§ã€å±é™ºåº¦ã®é«˜ã„åœ°åŸŸã‚’æ—©æœŸã«ç‰¹å®šã™ã‚‹ã“ã¨ãŒå¯èƒ½ã¨ãªã‚‹ã€‚",
    "ã¾ãŸã€ã“ã‚Œã«ã‚ˆã‚Šè‡ªæ²»ä½“ã¯è¿…é€Ÿã«ä½æ°‘ã¸ã®é¿é›£å‹§å‘Šã‚’ç™ºä»¤ã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã€‚ã•ã‚‰ã«ã€ã‚¤ãƒ³ãƒ•ãƒ©ã®æ•´å‚™ã‚„è³‡æºã®å‰²ã‚Šå½“ã¦ãŒåŠ¹ç‡çš„ã«è¡Œãˆã‚‹ãŸã‚ã€è¢«å®³ã®æœ€å°åŒ–ã«ã‚‚å¯„ä¸ã™ã‚‹ã ã‚ã†ã€‚"
  ],
  "hints": [
   ...
2026-01-31 01:31:51 - llm_service - INFO - âœ… excerpt_typeæ¤œè¨¼æˆåŠŸ: P2_P3
2026-01-31 01:31:51 - llm_service - INFO - âœ… themeæ¤œè¨¼æˆåŠŸ: æ™‚äº‹
2026-01-31 01:31:51 - llm_service - INFO - Successfully generated question: æ™‚äº‹, excerpt_type: P2_P3
2026-01-31 01:31:51 - database - INFO - Question saved: q_20260131_00b513ef - æ™‚äº‹ (P2_P3)
2026-01-31 01:31:51 - database - INFO - Theme recorded: æ™‚äº‹ (mode: general)
2026-01-31 01:31:51 - werkzeug - INFO - 127.0.0.1 - - [31/Jan/2026 01:31:51] "POST /api/question HTTP/1.1" 200 -
2026-01-31 01:32:01 - llm_service - INFO - Step 1 - Punctuation normalized (first 100 chars): According to a recent survey, traffic congestion has been worsening in urban areas of Japan
in parti...
2026-01-31 01:32:01 - llm_service - INFO - Step 2 - User input normalized (first 100 chars): According to a recent survey, traffic congestion has been worsening in urban areas of Japan in parti...
2026-01-31 01:32:01 - llm_service - INFO - Question text for correction: æœ€è¿‘ã®èª¿æŸ»ã«ã‚ˆã‚‹ã¨ã€æ—¥æœ¬ã®éƒ½å¸‚éƒ¨ã§ã¯äº¤é€šæ¸‹æ»ãŒæ‚ªåŒ–ã—ã¦ã„ã‚‹ã“ã¨ãŒæ˜ã‚‰ã‹ã«ãªã£ãŸã€‚
ç‰¹ã«ã€æœã®é€šå‹¤ãƒ©ãƒƒã‚·ãƒ¥æ™‚ã«ã¯ä¸»è¦ãªå¹¹ç·šé“è·¯ã§ã®è»Šä¸¡ã®æµã‚ŒãŒè‘—ã—ãé…ããªã£ã¦ãŠã‚Šã€é€šå‹¤æ™‚é–“ãŒå¹³å‡ã§30åˆ†ä»¥ä¸Šå»¶ã³ã‚‹ã“ã¨ãŒå ±å‘Šã•ã‚Œã¦ã„ã‚‹ã€‚...
2026-01-31 01:32:01 - llm_service - INFO - Required points determined from Japanese text: 2 sentences
2026-01-31 01:32:01 - llm_service - INFO - Required points for this correction: 2
2026-01-31 01:32:01 - llm_service - INFO - Word count: 47
2026-01-31 01:32:01 - llm_service - INFO - Correction attempt 1/3
2026-01-31 01:32:17 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-31 01:32:17 - llm_service - INFO - OpenAI API response (attempt 1): {
  "original": "According to a recent survey, traffic congestion has been worsening in urban areas of Japan in particular, during the morning commuting rush hour, the flow of vehicles on major arteri...
2026-01-31 01:32:17 - llm_service - INFO - Full LLM response for correction (length: 3529 chars)
2026-01-31 01:32:17 - llm_service - INFO - Response first 500 chars: {
  "original": "According to a recent survey, traffic congestion has been worsening in urban areas of Japan in particular, during the morning commuting rush hour, the flow of vehicles on major arterial roads slows down significantly, and average commute times are reported to increase by more than 30 minutes.",
  "corrected": "According to a recent survey, traffic congestion has been worsening in urban areas of Japan. In particular, during the morning commuting rush hour, the flow of vehicles on
2026-01-31 01:32:17 - llm_service - INFO - Response last 500 chars: , during the morning commuting rush hour, the flow of vehicles on major arterial roads slows down significantly, and it has been reported that average commute times extend by more than 30 minutes.\nï¼ˆç‰¹ã«ã€æœã®é€šå‹¤ãƒ©ãƒƒã‚·ãƒ¥æ™‚ã«ã¯ä¸»è¦ãªå¹¹ç·šé“è·¯ã§ã®è»Šä¸¡ã®æµã‚ŒãŒè‘—ã—ãé…ããªã£ã¦ãŠã‚Šã€é€šå‹¤æ™‚é–“ãŒå¹³å‡ã§30åˆ†ä»¥ä¸Šå»¶ã³ã‚‹ã“ã¨ãŒå ±å‘Šã•ã‚Œã¦ã„ã‚‹ã€‚ï¼‰\nslow downï¼ˆå¥å‹•è©ï¼šé…ããªã‚‹ï¼šé€Ÿåº¦ãŒè½ã¡ã‚‹æ–‡è„ˆï¼‰ï¼delayï¼ˆå‹•è©ï¼šé…ã‚‰ã›ã‚‹ï¼šäºˆå®šã‚ˆã‚Šé…ã‚Œã‚‹æ–‡è„ˆï¼‰ã§ã€slow downã¯ç‰©ç†çš„ãªé€Ÿåº¦ã®ä½ä¸‹ã€delayã¯äºˆå®šã‚„è¨ˆç”»ã®é…å»¶ã‚’æŒ‡ã™ã€‚\nã€å‚è€ƒã€‘slow down trafficï¼ˆäº¤é€šã‚’é…ãã™ã‚‹ï¼‰ï¼delay a flightï¼ˆãƒ•ãƒ©ã‚¤ãƒˆã‚’é…ã‚‰ã›ã‚‹ï¼‰\nä¾‹ï¼šThe train slowed down. (é›»è»Šã¯é€Ÿåº¦ã‚’è½ã¨ã—ãŸã€‚) / The meeting was delayed. (ä¼šè­°ã¯é…ã‚ŒãŸã€‚)"
}
2026-01-31 01:32:17 - llm_service - INFO - Full response saved to: /workspaces/miyazaki_igaku_100words/debug/llm_response_1.json
2026-01-31 01:32:17 - llm_service - WARNING - Skipping point 1: before 'ã€å…¨ä½“è©•ä¾¡ã€‘' not found in student answer
2026-01-31 01:32:17 - llm_service - INFO - Before normalization: 1 points
2026-01-31 01:32:17 - points_normalizer - INFO - Starting points normalization: 1 points
2026-01-31 01:32:17 - points_normalizer - INFO - Student answer split into 1 sentences
2026-01-31 01:32:17 - points_normalizer - INFO - Original user input split into 1 sentences
2026-01-31 01:32:17 - points_normalizer - INFO - Processing point 1: before='According to a recent survey, traffic congestion h...', level='âŒæ–‡æ³•ãƒŸã‚¹'
2026-01-31 01:32:17 - points_normalizer - INFO - Point 1: Normalized before='According to a recent survey, traffic congestion h...'
2026-01-31 01:32:17 - points_normalizer - INFO - Point 1: Found in sentence 1: 'According to a recent survey, traffic congestion h...'
2026-01-31 01:32:17 - points_normalizer - INFO - Point 1: Replaced fragment in sentence: 'According to a recent survey, traffic congestion h...'
2026-01-31 01:32:17 - points_normalizer - INFO - Level is âŒ, keeping after: 'According to a recent survey, traffic congestion h...'
2026-01-31 01:32:17 - points_normalizer - INFO - Point 1: Original user input: 'According to a recent survey, traffic congestion h...'
2026-01-31 01:32:17 - points_normalizer - INFO - Point 1: Normalized successfully (sentence_no=1)
2026-01-31 01:32:17 - points_normalizer - INFO - Points normalization complete: 1 points
2026-01-31 01:32:17 - llm_service - INFO - After normalization: 1 points
2026-01-31 01:32:17 - llm_service - INFO - Points check: current=1, non-evaluation=1, required=2
2026-01-31 01:32:17 - llm_service - WARNING - Points shortage detected: need 1 more points
2026-01-31 01:32:17 - llm_service - INFO - Step 1: Attempting reprompt for 1 additional points
2026-01-31 01:32:17 - llm_service - ERROR - Reprompt attempt 1 failed: call_openai_with_retry() got an unexpected keyword argument 'temperature'
2026-01-31 01:32:17 - llm_service - INFO - Step 2: Attempting reprompt for 1 additional points
2026-01-31 01:32:17 - llm_service - ERROR - Reprompt attempt 2 failed: call_openai_with_retry() got an unexpected keyword argument 'temperature'
2026-01-31 01:32:17 - llm_service - WARNING - Step 3: Using quality-assured filler for remaining 1 shortage
2026-01-31 01:32:17 - llm_service - INFO - Added quality filler point 1/1: (æœªæå‡ºï¼šåŸæ–‡ç¬¬2æ–‡)
2026-01-31 01:32:17 - llm_service - INFO - After all filling steps: 2 points total
2026-01-31 01:32:17 - llm_service - INFO - âœ… Correction successful: 2 points
2026-01-31 01:32:17 - database - INFO - Submission saved: s_20260131_602a9a3b (mode: general, no scoring)
2026-01-31 01:32:17 - werkzeug - INFO - 127.0.0.1 - - [31/Jan/2026 01:32:17] "POST /api/correct-multi HTTP/1.1" 200 -
2026-01-31 01:33:35 - werkzeug - INFO -  * Detected change in '/workspaces/miyazaki_igaku_100words/points_normalizer.py', reloading
2026-01-31 01:33:35 - werkzeug - INFO -  * Restarting with stat
2026-01-31 01:33:37 - __main__ - INFO - ğŸš€ ã¿ã‚„å¡¾ã€€è‹±ä½œæ–‡ç‰¹è¨“è¬›åº§ã€€å®®å´å¤§å­¦åŒ»å­¦éƒ¨ï¼ˆå’Œæ–‡è‹±è¨³ï¼‰ v3.0.0 èµ·å‹•: http://localhost:8001
2026-01-31 01:33:37 - __main__ - INFO - ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹: data/miyazaki_igaku_eisakubun.db
2026-01-31 01:33:37 - __main__ - INFO - ğŸ¯ æœ‰åŠ¹æ©Ÿèƒ½: 4/4
2026-01-31 01:33:37 - werkzeug - WARNING -  * Debugger is active!
2026-01-31 01:33:37 - werkzeug - INFO -  * Debugger PIN: 519-604-230
