nohup: ignoring input
2026-01-31 03:24:49 - __main__ - INFO - ğŸš€ ã¿ã‚„å¡¾ã€€è‹±ä½œæ–‡ç‰¹è¨“è¬›åº§ã€€å®®å´å¤§å­¦åŒ»å­¦éƒ¨ï¼ˆå’Œæ–‡è‹±è¨³ï¼‰ v3.0.0 èµ·å‹•: http://localhost:8001
2026-01-31 03:24:49 - __main__ - INFO - ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹: data/miyazaki_igaku_eisakubun.db
2026-01-31 03:24:49 - __main__ - INFO - ğŸ¯ æœ‰åŠ¹æ©Ÿèƒ½: 4/4
 * Serving Flask app 'app'
 * Debug mode: on
2026-01-31 03:24:49 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8001
 * Running on http://10.0.10.26:8001
2026-01-31 03:24:49 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2026-01-31 03:24:49 - werkzeug - INFO -  * Restarting with stat
2026-01-31 03:24:50 - __main__ - INFO - ğŸš€ ã¿ã‚„å¡¾ã€€è‹±ä½œæ–‡ç‰¹è¨“è¬›åº§ã€€å®®å´å¤§å­¦åŒ»å­¦éƒ¨ï¼ˆå’Œæ–‡è‹±è¨³ï¼‰ v3.0.0 èµ·å‹•: http://localhost:8001
2026-01-31 03:24:50 - __main__ - INFO - ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹: data/miyazaki_igaku_eisakubun.db
2026-01-31 03:24:50 - __main__ - INFO - ğŸ¯ æœ‰åŠ¹æ©Ÿèƒ½: 4/4
2026-01-31 03:24:50 - werkzeug - WARNING -  * Debugger is active!
2026-01-31 03:24:50 - werkzeug - INFO -  * Debugger PIN: 519-604-230
2026-01-31 03:26:00 - werkzeug - INFO - 127.0.0.1 - - [31/Jan/2026 03:26:00] "GET / HTTP/1.1" 200 -
2026-01-31 03:26:01 - werkzeug - INFO - 127.0.0.1 - - [31/Jan/2026 03:26:01] "GET /static/style.css?v=20260121m HTTP/1.1" 200 -
2026-01-31 03:26:01 - werkzeug - INFO - 127.0.0.1 - - [31/Jan/2026 03:26:01] "GET /static/main.js?v=20260131C HTTP/1.1" 200 -
2026-01-31 03:26:01 - werkzeug - INFO - 127.0.0.1 - - [31/Jan/2026 03:26:01] "GET /static/textarea-resize.png HTTP/1.1" 200 -
2026-01-31 03:26:01 - database - INFO - Excluded themes: ['å›³è¡¨', 'ç ”ç©¶ç´¹ä»‹', 'ã‚³ãƒ©ãƒ ', 'å­¦è¡“', 'ãƒ–ãƒ­ã‚°', 'æ™‚äº‹', 'ãƒ¬ãƒ“ãƒ¥ãƒ¼']
2026-01-31 03:26:01 - llm_service - INFO - ç¿»è¨³å•é¡Œã‚’ç”Ÿæˆä¸­...
2026-01-31 03:26:01 - llm_service - INFO - ğŸ“Š ç›´è¿‘10å•ã®ã‚µãƒ–ãƒˆãƒ”ãƒƒã‚¯: ['å›³è¡¨:F', 'ç ”ç©¶ç´¹ä»‹:B', 'ã‚³ãƒ©ãƒ :F', 'å­¦è¡“:D', 'ãƒ–ãƒ­ã‚°:D', 'å›³è¡¨:B', 'ç ”ç©¶ç´¹ä»‹:E', 'å›³è¡¨:D', 'ã‚³ãƒ©ãƒ :A', 'ç ”ç©¶ç´¹ä»‹:C']
2026-01-31 03:26:01 - llm_service - INFO - ğŸ“Š ç›´è¿‘30å•ã®åˆ†å¸ƒ: ã‚³ãƒ©ãƒ =16.7%, ãƒ–ãƒ­ã‚°=13.3%, ãƒ¬ãƒ“ãƒ¥ãƒ¼=6.7%, å›³è¡¨=13.3%, å­¦è¡“=23.3%, æ™‚äº‹=13.3%, ç ”ç©¶ç´¹ä»‹=13.3%
2026-01-31 03:26:01 - llm_service - INFO - ğŸ¯ ã‚·ã‚¹ãƒ†ãƒ ãŒé¸æŠã—ãŸtheme: ç ”ç©¶ç´¹ä»‹
2026-01-31 03:26:01 - llm_service - INFO - ğŸ“Š ç›´è¿‘10å•ã®åˆ†å¸ƒ: P1_ONLY=20.0%, P2_P3=50.0%, P3_ONLY=20.0%, P4_P5=10.0%
2026-01-31 03:26:01 - llm_service - INFO - ğŸ¯ ã‚·ã‚¹ãƒ†ãƒ ãŒé¸æŠã—ãŸexcerpt_type: P2_P3
2026-01-31 03:26:07 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-31 03:26:07 - llm_service - INFO - OpenAI API response (attempt 1): {
  "theme": "ç ”ç©¶ç´¹ä»‹",
  "topic_label": "H",
  "excerpt_type": "P2_P3",
  "japanese_paragraphs": [
    "ãã®ç ”ç©¶ã§ã¯ã€å‚åŠ è€…ãŸã¡ã¯ç‰¹å®šã®å”åŠ›èª²é¡Œã«å–ã‚Šçµ„ã‚€ã‚ˆã†æŒ‡ç¤ºã•ã‚ŒãŸã€‚èª²é¡Œã¯ã€ç•°ãªã‚‹èƒŒæ™¯ã‚’æŒã¤ã‚°ãƒ«ãƒ¼ãƒ—ã§å”åŠ›ã—åˆã†ã“ã¨ã‚’ç›®çš„ã¨ã—ã¦ã„ãŸã€‚",
    "ã¾ãŸã€å„ã‚°ãƒ«ãƒ¼ãƒ—ã®æˆæœã‚’è©•ä¾¡ã™ã‚‹ãŸã‚ã«ã€å”åŠ›ã®åº¦...
2026-01-31 03:26:07 - llm_service - INFO - [DEBUG] Full LLM response for correction:
{
  "theme": "ç ”ç©¶ç´¹ä»‹",
  "topic_label": "H",
  "excerpt_type": "P2_P3",
  "japanese_paragraphs": [
    "ãã®ç ”ç©¶ã§ã¯ã€å‚åŠ è€…ãŸã¡ã¯ç‰¹å®šã®å”åŠ›èª²é¡Œã«å–ã‚Šçµ„ã‚€ã‚ˆã†æŒ‡ç¤ºã•ã‚ŒãŸã€‚èª²é¡Œã¯ã€ç•°ãªã‚‹èƒŒæ™¯ã‚’æŒã¤ã‚°ãƒ«ãƒ¼ãƒ—ã§å”åŠ›ã—åˆã†ã“ã¨ã‚’ç›®çš„ã¨ã—ã¦ã„ãŸã€‚",
    "ã¾ãŸã€å„ã‚°ãƒ«ãƒ¼ãƒ—ã®æˆæœã‚’è©•ä¾¡ã™ã‚‹ãŸã‚ã«ã€å”åŠ›ã®åº¦åˆã„ã‚„ç›¸äº’ã®ç†è§£åº¦ãŒæ¸¬å®šã•ã‚ŒãŸã€‚çµæœã¨ã—ã¦ã€èƒŒæ™¯ãŒç•°ãªã‚‹ã‚°ãƒ«ãƒ¼ãƒ—ã»ã©ã€é«˜ã„å”åŠ›åº¦ã‚’ç¤ºã™å‚¾å‘ãŒè¦‹ã‚‰ã‚ŒãŸã€‚"
  ],
  "hints": [
    {"en": "participant", "ja": "å‚åŠ è€…", "kana": "ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ‘ãƒ³ãƒˆ", "pos": "åè©", "usage": "The participants were asked to collaborate.ã€Œå‚åŠ è€…ãŸã¡ã¯å”åŠ›ã™ã‚‹ã‚ˆã†ã«æ±‚ã‚ã‚‰ã‚ŒãŸã€‚ã€"},
    {"en": "cooperation", "ja": "å”åŠ›", "kana": "ã‚³ã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³", "pos": "åè©", "usage": "Cooperation is essential for success.ã€ŒæˆåŠŸã«ã¯å”åŠ›ãŒä¸å¯æ¬ ã ã€‚ã€"},
    {"en": "background", "ja": "èƒŒæ™¯", "kana": "ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰", "pos": "åè©", "usage": "People from different backgrounds worked together.ã€Œç•°ãªã‚‹èƒŒæ™¯ã‚’æŒã¤äººã€…ãŒä¸€ç·’ã«åƒã„ãŸã€‚ã€"},
    {"en": "measure", "ja": "æ¸¬å®šã™ã‚‹", "kana": "ãƒ¡ã‚¸ãƒ£ãƒ¼", "pos": "å‹•è©", "usage": "They measured the level of cooperation.ã€Œå½¼ã‚‰ã¯å”åŠ›ã®åº¦åˆã„ã‚’æ¸¬å®šã—ãŸã€‚ã€"},
    {"en": "tendency", "ja": "å‚¾å‘", "kana": "ãƒ†ãƒ³ãƒ€ãƒ³ã‚·ãƒ¼", "pos": "åè©", "usage": "There is a tendency to cooperate more.ã€Œã‚ˆã‚Šå”åŠ›ã™ã‚‹å‚¾å‘ãŒã‚ã‚‹ã€‚ã€"}
  ],
  "target_words": {"min": 100, "max": 120}
}
2026-01-31 03:26:07 - llm_service - INFO - Cleaned JSON (attempt 1): {
  "theme": "ç ”ç©¶ç´¹ä»‹",
  "topic_label": "H",
  "excerpt_type": "P2_P3",
  "japanese_paragraphs": [
    "ãã®ç ”ç©¶ã§ã¯ã€å‚åŠ è€…ãŸã¡ã¯ç‰¹å®šã®å”åŠ›èª²é¡Œã«å–ã‚Šçµ„ã‚€ã‚ˆã†æŒ‡ç¤ºã•ã‚ŒãŸã€‚èª²é¡Œã¯ã€ç•°ãªã‚‹èƒŒæ™¯ã‚’æŒã¤ã‚°ãƒ«ãƒ¼ãƒ—ã§å”åŠ›ã—åˆã†ã“ã¨ã‚’ç›®çš„ã¨ã—ã¦ã„ãŸã€‚",
    "ã¾ãŸã€å„ã‚°ãƒ«ãƒ¼ãƒ—ã®æˆæœã‚’è©•ä¾¡ã™ã‚‹ãŸã‚ã«ã€å”åŠ›ã®åº¦åˆã„ã‚„ç›¸äº’ã®ç†è§£åº¦ãŒæ¸¬å®šã•ã‚ŒãŸã€‚çµæœã¨ã—ã¦ã€èƒŒæ™¯ãŒç•°ãªã‚‹ã‚°ãƒ«ãƒ¼ãƒ—ã»ã©ã€é«˜ã„å”åŠ›åº¦ã‚’ç¤ºã™å‚¾å‘ãŒè¦‹ã‚‰ã‚ŒãŸã€‚"
  ],
  "hints": [
    {"en": "participant", "ja...
2026-01-31 03:26:07 - llm_service - INFO - âœ… excerpt_typeæ¤œè¨¼æˆåŠŸ: P2_P3
2026-01-31 03:26:07 - llm_service - INFO - âœ… themeæ¤œè¨¼æˆåŠŸ: ç ”ç©¶ç´¹ä»‹
2026-01-31 03:26:07 - llm_service - INFO - Successfully generated question: ç ”ç©¶ç´¹ä»‹, excerpt_type: P2_P3
2026-01-31 03:26:07 - database - INFO - Question saved: q_20260131_2b03dca3 - ç ”ç©¶ç´¹ä»‹ (P2_P3)
2026-01-31 03:26:07 - database - INFO - Theme recorded: ç ”ç©¶ç´¹ä»‹ (mode: general)
2026-01-31 03:26:07 - werkzeug - INFO - 127.0.0.1 - - [31/Jan/2026 03:26:07] "POST /api/question HTTP/1.1" 200 -
2026-01-31 03:26:43 - llm_service - INFO - Step 1 - Punctuation normalized (first 100 chars): The participants in the study were instructed to work on a specific collaborative task.
(æœªæå‡º:åŸæ–‡ç¬¬2æ–‡)
...
2026-01-31 03:26:43 - llm_service - INFO - Step 2 - User input normalized (first 100 chars): The participants in the study were instructed to work on a specific collaborative task.
(æœªæå‡º: åŸæ–‡ç¬¬2æ–‡)...
2026-01-31 03:26:43 - llm_service - INFO - Multi-sentence mode: preserving newlines in user input
2026-01-31 03:26:43 - llm_service - INFO - Question text for correction: ãã®ç ”ç©¶ã§ã¯ã€å‚åŠ è€…ãŸã¡ã¯ç‰¹å®šã®å”åŠ›èª²é¡Œã«å–ã‚Šçµ„ã‚€ã‚ˆã†æŒ‡ç¤ºã•ã‚ŒãŸã€‚
èª²é¡Œã¯ã€ç•°ãªã‚‹èƒŒæ™¯ã‚’æŒã¤ã‚°ãƒ«ãƒ¼ãƒ—ã§å”åŠ›ã—åˆã†ã“ã¨ã‚’ç›®çš„ã¨ã—ã¦ã„ãŸã€‚
ã¾ãŸã€å„ã‚°ãƒ«ãƒ¼ãƒ—ã®æˆæœã‚’è©•ä¾¡ã™ã‚‹ãŸã‚ã«ã€å”åŠ›ã®åº¦åˆã„ã‚„ç›¸äº’ã®ç†è§£åº¦ãŒæ¸¬å®šã•ã‚ŒãŸã€‚
çµæœã¨ã—ã¦ã€èƒŒæ™¯ãŒç•°ãªã‚‹ã‚°ãƒ«ãƒ¼ãƒ—ã»ã©ã€é«˜ã„å”åŠ›åº¦ã‚’ç¤ºã™å‚¾å‘ãŒè¦‹ã‚‰ã‚ŒãŸã€‚...
2026-01-31 03:26:43 - llm_service - INFO - Required points determined from Japanese text: 4 sentences
2026-01-31 03:26:43 - llm_service - INFO - Required points for this correction: 4
2026-01-31 03:26:43 - llm_service - INFO - Word count: 20
2026-01-31 03:26:43 - llm_service - INFO - Correction attempt 1/3
2026-01-31 03:27:05 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-31 03:27:05 - llm_service - INFO - OpenAI API response (attempt 1): 
{
  "original": "The participants in the study were instructed to work on a specific collaborative task.\n(æœªæå‡º: åŸæ–‡ç¬¬2æ–‡).\n(æœªæå‡º: åŸæ–‡ç¬¬3æ–‡).\n(æœªæå‡º: åŸæ–‡ç¬¬4æ–‡).",
  "corrected": "The participants in the study w...
2026-01-31 03:27:05 - llm_service - INFO - Full LLM response for correction (length: 5832 chars)
2026-01-31 03:27:05 - llm_service - INFO - Response first 500 chars: 
{
  "original": "The participants in the study were instructed to work on a specific collaborative task.\n(æœªæå‡º: åŸæ–‡ç¬¬2æ–‡).\n(æœªæå‡º: åŸæ–‡ç¬¬3æ–‡).\n(æœªæå‡º: åŸæ–‡ç¬¬4æ–‡).",
  "corrected": "The participants in the study were instructed to work on a specific collaborative task.\n\nThe task aimed at fostering cooperation among groups with different backgrounds.\n\nAdditionally, the degree of cooperation and mutual understanding was measured to evaluate each group's performance.\n\nAs a result, groups with diverse back
2026-01-31 03:27:05 - llm_service - INFO - Response last 500 chars: gram. (ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®åŠ¹æœã‚’æ¸¬å®šã—ãŸã€‚) / They evaluated the students' progress. (å½¼ã‚‰ã¯å­¦ç”Ÿã®é€²æ—ã‚’è©•ä¾¡ã—ãŸã€‚ï¼‰\n\n4æ–‡ç›®: As a result, groups with diverse backgrounds tended to show higher levels of cooperation.\nï¼ˆçµæœã¨ã—ã¦ã€èƒŒæ™¯ãŒç•°ãªã‚‹ã‚°ãƒ«ãƒ¼ãƒ—ã»ã©ã€é«˜ã„å”åŠ›åº¦ã‚’ç¤ºã™å‚¾å‘ãŒè¦‹ã‚‰ã‚ŒãŸã€‚ï¼‰\ntend toï¼ˆå‹•è©å¥ï¼šã€œã™ã‚‹å‚¾å‘ãŒã‚ã‚‹ï¼šã‚ã‚‹çµæœã‚„è¡Œå‹•ãŒã‚ˆãè¦‹ã‚‰ã‚Œã‚‹ã“ã¨ã‚’ç¤ºã™ï¼‰ï¼incline toï¼ˆå‹•è©å¥ï¼šã€œã™ã‚‹å‚¾å‘ãŒã‚ã‚‹ï¼šæ€§è³ªã‚„ç¿’æ…£ã¨ã—ã¦ãã†ãªã‚‹ï¼‰ã§ã€tend toã¯ä¸€èˆ¬çš„ãªå‚¾å‘ã‚’è¡¨ã—ã¾ã™ã€‚\nã€å‚è€ƒã€‘tend to agreeï¼ˆè³›æˆã™ã‚‹å‚¾å‘ãŒã‚ã‚‹ï¼‰ï¼incline to doubtï¼ˆç–‘ã†å‚¾å‘ãŒã‚ã‚‹ï¼‰\nä¾‹: People tend to forget small details. (äººã€…ã¯å°ã•ãªè©³ç´°ã‚’å¿˜ã‚ŒãŒã¡ã§ã™ã€‚) / She inclines to trust others easily. (å½¼å¥³ã¯ä»–äººã‚’ç°¡å˜ã«ä¿¡ç”¨ã™ã‚‹å‚¾å‘ãŒã‚ã‚‹ã€‚ï¼‰"
}
2026-01-31 03:27:05 - llm_service - INFO - Full response saved to: /workspaces/miyazaki_igaku_100words/debug/llm_response_1.json
2026-01-31 03:27:05 - llm_service - WARNING - Skipping point 1: before 'ã€å…¨ä½“è©•ä¾¡ã€‘' not found in student answer
2026-01-31 03:27:05 - llm_service - INFO - Before normalization: 4 points
2026-01-31 03:27:05 - points_normalizer - INFO - Starting points normalization: 4 points
2026-01-31 03:27:05 - points_normalizer - INFO - Student answer split into 4 sentences
2026-01-31 03:27:05 - points_normalizer - INFO - Original user input split into 4 sentences
2026-01-31 03:27:05 - points_normalizer - INFO - Processing point 1: before='The participants in the study were instructed to w...', level='âœ…æ­£ã—ã„è¡¨ç¾'
2026-01-31 03:27:05 - points_normalizer - INFO - Point 1: Normalized before='The participants in the study were instructed to w...'
2026-01-31 03:27:05 - points_normalizer - INFO - Point 1: Found in sentence 1: 'The participants in the study were instructed to w...'
2026-01-31 03:27:05 - points_normalizer - INFO - Point 1: Original user input: 'The participants in the study were instructed to w...'
2026-01-31 03:27:05 - points_normalizer - INFO - Point 1: Normalized successfully (sentence_no=1)
2026-01-31 03:27:05 - points_normalizer - INFO - Processing point 2: before='(æœªæå‡º: åŸæ–‡ç¬¬2æ–‡)....', level='âŒæ–‡æ³•ãƒŸã‚¹'
2026-01-31 03:27:05 - points_normalizer - INFO - Point 2: Normalized before='(æœªæå‡º: åŸæ–‡ç¬¬2æ–‡)....'
2026-01-31 03:27:05 - points_normalizer - INFO - Point 2: Found in sentence 2: '(æœªæå‡º: åŸæ–‡ç¬¬2æ–‡)....'
2026-01-31 03:27:05 - points_normalizer - INFO - Point 2: Replaced fragment in sentence: 'The task aimed at fostering cooperation among grou...'
2026-01-31 03:27:05 - points_normalizer - INFO - Level is âŒ, keeping after: 'The task aimed at fostering cooperation among grou...'
2026-01-31 03:27:05 - points_normalizer - INFO - Point 2: Original user input: '(æœªæå‡ºï¼šåŸæ–‡ç¬¬2æ–‡)...'
2026-01-31 03:27:05 - points_normalizer - INFO - Point 2: Normalized successfully (sentence_no=2)
2026-01-31 03:27:05 - points_normalizer - INFO - Processing point 3: before='(æœªæå‡º: åŸæ–‡ç¬¬3æ–‡)....', level='âŒæ–‡æ³•ãƒŸã‚¹'
2026-01-31 03:27:05 - points_normalizer - INFO - Point 3: Normalized before='(æœªæå‡º: åŸæ–‡ç¬¬3æ–‡)....'
2026-01-31 03:27:05 - points_normalizer - INFO - Point 3: Found in sentence 3: '(æœªæå‡º: åŸæ–‡ç¬¬3æ–‡)....'
2026-01-31 03:27:05 - points_normalizer - INFO - Point 3: Replaced fragment in sentence: 'Additionally, the degree of cooperation and mutual...'
2026-01-31 03:27:05 - points_normalizer - INFO - Level is âŒ, keeping after: 'Additionally, the degree of cooperation and mutual...'
2026-01-31 03:27:05 - points_normalizer - INFO - Point 3: Original user input: '(æœªæå‡ºï¼šåŸæ–‡ç¬¬3æ–‡)...'
2026-01-31 03:27:05 - points_normalizer - INFO - Point 3: Normalized successfully (sentence_no=3)
2026-01-31 03:27:05 - points_normalizer - INFO - Processing point 4: before='(æœªæå‡º: åŸæ–‡ç¬¬4æ–‡)....', level='âŒæ–‡æ³•ãƒŸã‚¹'
2026-01-31 03:27:05 - points_normalizer - INFO - Point 4: Normalized before='(æœªæå‡º: åŸæ–‡ç¬¬4æ–‡)....'
2026-01-31 03:27:05 - points_normalizer - INFO - Point 4: Found in sentence 4: '(æœªæå‡º: åŸæ–‡ç¬¬4æ–‡)....'
2026-01-31 03:27:05 - points_normalizer - INFO - Point 4: Replaced fragment in sentence: 'As a result, groups with diverse backgrounds tende...'
2026-01-31 03:27:05 - points_normalizer - INFO - Level is âŒ, keeping after: 'As a result, groups with diverse backgrounds tende...'
2026-01-31 03:27:05 - points_normalizer - INFO - Point 4: Original user input: '(æœªæå‡ºï¼šåŸæ–‡ç¬¬4æ–‡)...'
2026-01-31 03:27:05 - points_normalizer - INFO - Point 4: Normalized successfully (sentence_no=4)
2026-01-31 03:27:05 - points_normalizer - INFO - Points normalization complete: 4 points
2026-01-31 03:27:05 - llm_service - INFO - After normalization: 4 points
2026-01-31 03:27:05 - llm_service - INFO - Points check: current=4, non-evaluation=4, required=4
2026-01-31 03:27:05 - llm_service - INFO - âœ… Correction successful: 4 points
2026-01-31 03:27:05 - database - INFO - Submission saved: s_20260131_8fb034eb (mode: general, no scoring)
2026-01-31 03:27:05 - werkzeug - INFO - 127.0.0.1 - - [31/Jan/2026 03:27:05] "POST /api/correct-multi HTTP/1.1" 200 -
2026-01-31 03:27:56 - werkzeug - INFO - 127.0.0.1 - - [31/Jan/2026 03:27:56] "GET / HTTP/1.1" 200 -
2026-01-31 03:27:56 - werkzeug - INFO - 127.0.0.1 - - [31/Jan/2026 03:27:56] "GET /static/style.css?v=20260121m HTTP/1.1" 200 -
2026-01-31 03:27:56 - werkzeug - INFO - 127.0.0.1 - - [31/Jan/2026 03:27:56] "GET /static/main.js?v=20260131C HTTP/1.1" 200 -
2026-01-31 03:27:56 - werkzeug - INFO - 127.0.0.1 - - [31/Jan/2026 03:27:56] "GET /static/textarea-resize.png HTTP/1.1" 200 -
2026-01-31 03:28:02 - werkzeug - INFO - 127.0.0.1 - - [31/Jan/2026 03:28:02] "GET / HTTP/1.1" 200 -
2026-01-31 03:28:02 - werkzeug - INFO - 127.0.0.1 - - [31/Jan/2026 03:28:02] "GET /static/style.css?v=20260121m HTTP/1.1" 200 -
2026-01-31 03:28:02 - werkzeug - INFO - 127.0.0.1 - - [31/Jan/2026 03:28:02] "GET /static/main.js?v=20260131C HTTP/1.1" 200 -
2026-01-31 03:28:02 - werkzeug - INFO - 127.0.0.1 - - [31/Jan/2026 03:28:02] "GET /static/textarea-resize.png HTTP/1.1" 200 -
2026-01-31 03:28:06 - database - INFO - Excluded themes: ['ç ”ç©¶ç´¹ä»‹', 'å›³è¡¨', 'ã‚³ãƒ©ãƒ ', 'å­¦è¡“', 'ãƒ–ãƒ­ã‚°', 'æ™‚äº‹', 'ãƒ¬ãƒ“ãƒ¥ãƒ¼']
2026-01-31 03:28:06 - llm_service - INFO - ç¿»è¨³å•é¡Œã‚’ç”Ÿæˆä¸­...
2026-01-31 03:28:06 - llm_service - INFO - ğŸ“Š ç›´è¿‘10å•ã®ã‚µãƒ–ãƒˆãƒ”ãƒƒã‚¯: ['ç ”ç©¶ç´¹ä»‹:H', 'å›³è¡¨:F', 'ç ”ç©¶ç´¹ä»‹:B', 'ã‚³ãƒ©ãƒ :F', 'å­¦è¡“:D', 'ãƒ–ãƒ­ã‚°:D', 'å›³è¡¨:B', 'ç ”ç©¶ç´¹ä»‹:E', 'å›³è¡¨:D', 'ã‚³ãƒ©ãƒ :A']
2026-01-31 03:28:06 - llm_service - INFO - ğŸ“Š ç›´è¿‘30å•ã®åˆ†å¸ƒ: ã‚³ãƒ©ãƒ =16.7%, ãƒ–ãƒ­ã‚°=13.3%, ãƒ¬ãƒ“ãƒ¥ãƒ¼=6.7%, å›³è¡¨=13.3%, å­¦è¡“=20.0%, æ™‚äº‹=13.3%, ç ”ç©¶ç´¹ä»‹=16.7%
2026-01-31 03:28:06 - llm_service - INFO - ğŸ¯ ã‚·ã‚¹ãƒ†ãƒ ãŒé¸æŠã—ãŸtheme: ç ”ç©¶ç´¹ä»‹
2026-01-31 03:28:06 - llm_service - INFO - ğŸ“Š ç›´è¿‘10å•ã®åˆ†å¸ƒ: P1_ONLY=10.0%, P2_P3=60.0%, P3_ONLY=20.0%, P4_P5=10.0%
2026-01-31 03:28:06 - llm_service - INFO - ğŸ¯ ã‚·ã‚¹ãƒ†ãƒ ãŒé¸æŠã—ãŸexcerpt_type: P1_ONLY
2026-01-31 03:28:10 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-31 03:28:10 - llm_service - INFO - OpenAI API response (attempt 1): {
  "theme": "ç ”ç©¶ç´¹ä»‹",
  "excerpt_type": "P1_ONLY",
  "topic_label": "A",
  "japanese_paragraphs": [
    "ã‚ã‚‹ç ”ç©¶ã«ã‚ˆã‚‹ã¨ã€çŸ­æœŸé–“ã§æš—è¨˜ã‚’è¡Œã†ãŸã‚ã®æœ€é©ãªæ™‚é–“å¸¯ãŒã‚ã‚‹ã“ã¨ãŒæ˜ã‚‰ã‹ã«ãªã£ãŸã€‚ã“ã®ç ”ç©¶ã§ã¯ã€æœã¨å¤œã®è¨˜æ†¶åŠ›ã®é•ã„ã«ç€ç›®ã—ã€è¢«é¨“è€…ã«ç•°ãªã‚‹æ™‚é–“å¸¯ã§åŒã˜ãƒ†ã‚¹ãƒˆã‚’å®Ÿæ–½ã—ãŸã€‚çµæœã¨ã—ã¦ã€æœã«å­¦ç¿’ã—...
2026-01-31 03:28:10 - llm_service - INFO - [DEBUG] Full LLM response for correction:
{
  "theme": "ç ”ç©¶ç´¹ä»‹",
  "excerpt_type": "P1_ONLY",
  "topic_label": "A",
  "japanese_paragraphs": [
    "ã‚ã‚‹ç ”ç©¶ã«ã‚ˆã‚‹ã¨ã€çŸ­æœŸé–“ã§æš—è¨˜ã‚’è¡Œã†ãŸã‚ã®æœ€é©ãªæ™‚é–“å¸¯ãŒã‚ã‚‹ã“ã¨ãŒæ˜ã‚‰ã‹ã«ãªã£ãŸã€‚ã“ã®ç ”ç©¶ã§ã¯ã€æœã¨å¤œã®è¨˜æ†¶åŠ›ã®é•ã„ã«ç€ç›®ã—ã€è¢«é¨“è€…ã«ç•°ãªã‚‹æ™‚é–“å¸¯ã§åŒã˜ãƒ†ã‚¹ãƒˆã‚’å®Ÿæ–½ã—ãŸã€‚çµæœã¨ã—ã¦ã€æœã«å­¦ç¿’ã—ãŸæƒ…å ±ãŒã‚ˆã‚Šé•·æœŸé–“ã«ã‚ãŸã£ã¦è¨˜æ†¶ã«æ®‹ã‚Šã‚„ã™ã„ã“ã¨ãŒç¤ºã•ã‚ŒãŸã€‚"
  ],
  "hints": [
    {"en": "optimal", "ja": "æœ€é©ãª", "kana": "ã‚ªãƒ—ãƒ†ã‚£ãƒãƒ«", "pos": "å½¢å®¹è©", "usage": "optimal timeã€Œæœ€é©ãªæ™‚é–“ã€"},
    {"en": "short-term", "ja": "çŸ­æœŸé–“", "kana": "ã‚·ãƒ§ãƒ¼ãƒˆã‚¿ãƒ¼ãƒ ", "pos": "å½¢å®¹è©", "usage": "short-term memoryã€ŒçŸ­æœŸè¨˜æ†¶ã€"},
    {"en": "attention", "ja": "æ³¨æ„åŠ›", "kana": "ã‚¢ãƒ†ãƒ³ã‚·ãƒ§ãƒ³", "pos": "åè©", "usage": "pay attention to detailsã€Œç´°éƒ¨ã«æ³¨æ„ã‚’æ‰•ã†ã€"},
    {"en": "conduct", "ja": "å®Ÿæ–½ã™ã‚‹", "kana": "ã‚³ãƒ³ãƒ‰ã‚¯ãƒˆ", "pos": "å‹•è©", "usage": "conduct a testã€Œãƒ†ã‚¹ãƒˆã‚’å®Ÿæ–½ã™ã‚‹ã€"},
    {"en": "retain", "ja": "ä¿æŒã™ã‚‹", "kana": "ãƒªãƒ†ã‚¤ãƒ³", "pos": "å‹•è©", "usage": "retain informationã€Œæƒ…å ±ã‚’ä¿æŒã™ã‚‹ã€"}
  ],
  "target_words": {"min": 100, "max": 120}
}
2026-01-31 03:28:10 - llm_service - INFO - Cleaned JSON (attempt 1): {
  "theme": "ç ”ç©¶ç´¹ä»‹",
  "excerpt_type": "P1_ONLY",
  "topic_label": "A",
  "japanese_paragraphs": [
    "ã‚ã‚‹ç ”ç©¶ã«ã‚ˆã‚‹ã¨ã€çŸ­æœŸé–“ã§æš—è¨˜ã‚’è¡Œã†ãŸã‚ã®æœ€é©ãªæ™‚é–“å¸¯ãŒã‚ã‚‹ã“ã¨ãŒæ˜ã‚‰ã‹ã«ãªã£ãŸã€‚ã“ã®ç ”ç©¶ã§ã¯ã€æœã¨å¤œã®è¨˜æ†¶åŠ›ã®é•ã„ã«ç€ç›®ã—ã€è¢«é¨“è€…ã«ç•°ãªã‚‹æ™‚é–“å¸¯ã§åŒã˜ãƒ†ã‚¹ãƒˆã‚’å®Ÿæ–½ã—ãŸã€‚çµæœã¨ã—ã¦ã€æœã«å­¦ç¿’ã—ãŸæƒ…å ±ãŒã‚ˆã‚Šé•·æœŸé–“ã«ã‚ãŸã£ã¦è¨˜æ†¶ã«æ®‹ã‚Šã‚„ã™ã„ã“ã¨ãŒç¤ºã•ã‚ŒãŸã€‚"
  ],
  "hints": [
    {"en": "optimal", "ja": "æœ€é©ãª", "kana": "ã‚ªãƒ—ãƒ†ã‚£ãƒãƒ«...
2026-01-31 03:28:10 - llm_service - INFO - âœ… excerpt_typeæ¤œè¨¼æˆåŠŸ: P1_ONLY
2026-01-31 03:28:10 - llm_service - INFO - âœ… themeæ¤œè¨¼æˆåŠŸ: ç ”ç©¶ç´¹ä»‹
2026-01-31 03:28:10 - llm_service - INFO - Successfully generated question: ç ”ç©¶ç´¹ä»‹, excerpt_type: P1_ONLY
2026-01-31 03:28:10 - database - INFO - Question saved: q_20260131_5c0cda23 - ç ”ç©¶ç´¹ä»‹ (P1_ONLY)
2026-01-31 03:28:10 - database - INFO - Theme recorded: ç ”ç©¶ç´¹ä»‹ (mode: general)
2026-01-31 03:28:10 - werkzeug - INFO - 127.0.0.1 - - [31/Jan/2026 03:28:10] "POST /api/question HTTP/1.1" 200 -
2026-01-31 03:28:33 - llm_service - INFO - Step 1 - Punctuation normalized (first 100 chars): A study has revealed that there is an optimal time of day for memorizing information efficiently in ...
2026-01-31 03:28:33 - llm_service - INFO - Step 2 - User input normalized (first 100 chars): A study has revealed that there is an optimal time of day for memorizing information efficiently in ...
2026-01-31 03:28:33 - llm_service - INFO - Multi-sentence mode: preserving newlines in user input
2026-01-31 03:28:33 - llm_service - INFO - Question text for correction: ã‚ã‚‹ç ”ç©¶ã«ã‚ˆã‚‹ã¨ã€çŸ­æœŸé–“ã§æš—è¨˜ã‚’è¡Œã†ãŸã‚ã®æœ€é©ãªæ™‚é–“å¸¯ãŒã‚ã‚‹ã“ã¨ãŒæ˜ã‚‰ã‹ã«ãªã£ãŸã€‚
ã“ã®ç ”ç©¶ã§ã¯ã€æœã¨å¤œã®è¨˜æ†¶åŠ›ã®é•ã„ã«ç€ç›®ã—ã€è¢«é¨“è€…ã«ç•°ãªã‚‹æ™‚é–“å¸¯ã§åŒã˜ãƒ†ã‚¹ãƒˆã‚’å®Ÿæ–½ã—ãŸã€‚
çµæœã¨ã—ã¦ã€æœã«å­¦ç¿’ã—ãŸæƒ…å ±ãŒã‚ˆã‚Šé•·æœŸé–“ã«ã‚ãŸã£ã¦è¨˜æ†¶ã«æ®‹ã‚Šã‚„ã™ã„ã“ã¨ãŒç¤ºã•ã‚ŒãŸã€‚...
2026-01-31 03:28:33 - llm_service - INFO - Required points determined from Japanese text: 3 sentences
2026-01-31 03:28:33 - llm_service - INFO - Required points for this correction: 3
2026-01-31 03:28:33 - llm_service - INFO - Word count: 26
2026-01-31 03:28:33 - llm_service - INFO - Correction attempt 1/3
2026-01-31 03:28:46 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-31 03:28:46 - llm_service - INFO - OpenAI API response (attempt 1): {
  "original": "A study has revealed that there is an optimal time of day for memorizing information efficiently in a short period of time.\n(æœªæå‡º: åŸæ–‡ç¬¬2æ–‡).\n(æœªæå‡º: åŸæ–‡ç¬¬3æ–‡).",
  "corrected": "A study has...
2026-01-31 03:28:46 - llm_service - INFO - Full LLM response for correction (length: 4369 chars)
2026-01-31 03:28:46 - llm_service - INFO - Response first 500 chars: {
  "original": "A study has revealed that there is an optimal time of day for memorizing information efficiently in a short period of time.\n(æœªæå‡º: åŸæ–‡ç¬¬2æ–‡).\n(æœªæå‡º: åŸæ–‡ç¬¬3æ–‡).",
  "corrected": "A study has revealed that there is an optimal time of day for memorizing information efficiently in a short period of time.\n\nThe study focused on the difference in memory between morning and night, administering the same test to subjects at different times of the day.\n\nAs a result, it was shown that inform
2026-01-31 03:28:46 - llm_service - INFO - Response last 500 chars:  administered the medication. (çœ‹è­·å¸«ãŒè–¬ã‚’æŠ•ä¸ã—ãŸã€‚)\n\n3æ–‡ç›®: As a result, it was shown that information learned in the morning tends to be retained in memory for a longer period.\nï¼ˆçµæœã¨ã—ã¦ã€æœã«å­¦ç¿’ã—ãŸæƒ…å ±ãŒã‚ˆã‚Šé•·æœŸé–“ã«ã‚ãŸã£ã¦è¨˜æ†¶ã«æ®‹ã‚Šã‚„ã™ã„ã“ã¨ãŒç¤ºã•ã‚ŒãŸã€‚ï¼‰\nAs a resultï¼ˆå‰¯è©å¥ï¼šãã®çµæœï¼šå‰è¿°ã®å†…å®¹ãŒå¼•ãèµ·ã“ã™çµæœã‚’ç¤ºã™æ–‡è„ˆï¼‰ï¼tend toï¼ˆå‹•è©å¥ï¼šï½ã™ã‚‹å‚¾å‘ãŒã‚ã‚‹ï¼šã‚ã‚‹çŠ¶æ…‹ã‚„è¡Œå‹•ãŒä¸€èˆ¬çš„ã§ã‚ã‚‹ã“ã¨ã‚’ç¤ºã™æ–‡è„ˆï¼‰ã§ã€As a resultã¯å› æœé–¢ä¿‚ã‚’ç¤ºã—ã€tend toã¯ä¸€èˆ¬çš„ãªå‚¾å‘ã‚’è¿°ã¹ã¾ã™ã€‚\nã€å‚è€ƒã€‘As a result of the studyï¼ˆç ”ç©¶ã®çµæœã¨ã—ã¦ï¼‰ï¼tend to forgetï¼ˆå¿˜ã‚ŒãŒã¡ã§ã‚ã‚‹ï¼‰\nä¾‹: As a result, they succeeded. (ãã®çµæœã€å½¼ã‚‰ã¯æˆåŠŸã—ãŸã€‚) / He tends to make mistakes. (å½¼ã¯ãƒŸã‚¹ã‚’ã—ãŒã¡ã ã€‚)"
}
2026-01-31 03:28:46 - llm_service - INFO - Full response saved to: /workspaces/miyazaki_igaku_100words/debug/llm_response_1.json
2026-01-31 03:28:46 - llm_service - WARNING - Skipping point 1: before 'ã€å…¨ä½“è©•ä¾¡ã€‘' not found in student answer
2026-01-31 03:28:46 - llm_service - INFO - Before normalization: 3 points
2026-01-31 03:28:46 - points_normalizer - INFO - Starting points normalization: 3 points
2026-01-31 03:28:46 - points_normalizer - INFO - Student answer split into 3 sentences
2026-01-31 03:28:46 - points_normalizer - INFO - Original user input split into 3 sentences
2026-01-31 03:28:46 - points_normalizer - INFO - Processing point 1: before='A study has revealed that there is an optimal time...', level='âœ…æ­£ã—ã„è¡¨ç¾'
2026-01-31 03:28:46 - points_normalizer - INFO - Point 1: Normalized before='A study has revealed that there is an optimal time...'
2026-01-31 03:28:46 - points_normalizer - INFO - Point 1: Found in sentence 1: 'A study has revealed that there is an optimal time...'
2026-01-31 03:28:46 - points_normalizer - INFO - Point 1: Original user input: 'A study has revealed that there is an optimal time...'
2026-01-31 03:28:46 - points_normalizer - INFO - Point 1: Normalized successfully (sentence_no=1)
2026-01-31 03:28:46 - points_normalizer - INFO - Processing point 2: before='(æœªæå‡º: åŸæ–‡ç¬¬2æ–‡)....', level='âŒæ–‡æ³•ãƒŸã‚¹'
2026-01-31 03:28:46 - points_normalizer - INFO - Point 2: Normalized before='(æœªæå‡º: åŸæ–‡ç¬¬2æ–‡)....'
2026-01-31 03:28:46 - points_normalizer - INFO - Point 2: Found in sentence 2: '(æœªæå‡º: åŸæ–‡ç¬¬2æ–‡)....'
2026-01-31 03:28:46 - points_normalizer - INFO - Point 2: Replaced fragment in sentence: 'The study focused on the difference in memory betw...'
2026-01-31 03:28:46 - points_normalizer - INFO - Level is âŒ, keeping after: 'The study focused on the difference in memory betw...'
2026-01-31 03:28:46 - points_normalizer - INFO - Point 2: Original user input: '(æœªæå‡ºï¼šåŸæ–‡ç¬¬2æ–‡)...'
2026-01-31 03:28:46 - points_normalizer - INFO - Point 2: Normalized successfully (sentence_no=2)
2026-01-31 03:28:46 - points_normalizer - INFO - Processing point 3: before='(æœªæå‡º: åŸæ–‡ç¬¬3æ–‡)....', level='âŒæ–‡æ³•ãƒŸã‚¹'
2026-01-31 03:28:46 - points_normalizer - INFO - Point 3: Normalized before='(æœªæå‡º: åŸæ–‡ç¬¬3æ–‡)....'
2026-01-31 03:28:46 - points_normalizer - INFO - Point 3: Found in sentence 3: '(æœªæå‡º: åŸæ–‡ç¬¬3æ–‡)....'
2026-01-31 03:28:46 - points_normalizer - INFO - Point 3: Replaced fragment in sentence: 'As a result, it was shown that information learned...'
2026-01-31 03:28:46 - points_normalizer - INFO - Level is âŒ, keeping after: 'As a result, it was shown that information learned...'
2026-01-31 03:28:46 - points_normalizer - INFO - Point 3: Original user input: '(æœªæå‡ºï¼šåŸæ–‡ç¬¬3æ–‡)...'
2026-01-31 03:28:46 - points_normalizer - INFO - Point 3: Normalized successfully (sentence_no=3)
2026-01-31 03:28:46 - points_normalizer - INFO - Points normalization complete: 3 points
2026-01-31 03:28:46 - llm_service - INFO - After normalization: 3 points
2026-01-31 03:28:46 - llm_service - INFO - Points check: current=3, non-evaluation=3, required=3
2026-01-31 03:28:46 - llm_service - INFO - âœ… Correction successful: 3 points
2026-01-31 03:28:46 - database - INFO - Submission saved: s_20260131_a360923f (mode: general, no scoring)
2026-01-31 03:28:46 - werkzeug - INFO - 127.0.0.1 - - [31/Jan/2026 03:28:46] "POST /api/correct-multi HTTP/1.1" 200 -
2026-01-31 03:29:06 - werkzeug - INFO - 127.0.0.1 - - [31/Jan/2026 03:29:06] "GET /static/style.css?v=20260121m HTTP/1.1" 200 -
2026-01-31 03:29:06 - werkzeug - INFO - 127.0.0.1 - - [31/Jan/2026 03:29:06] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
2026-01-31 03:29:37 - werkzeug - INFO - 127.0.0.1 - - [31/Jan/2026 03:29:37] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
2026-01-31 03:34:02 - werkzeug - INFO - 127.0.0.1 - - [31/Jan/2026 03:34:02] "HEAD /static/main.js HTTP/1.1" 200 -
2026-01-31 03:34:33 - werkzeug - INFO -  * Detected change in '/workspaces/miyazaki_igaku_100words/app.py', reloading
2026-01-31 03:34:33 - werkzeug - INFO -  * Restarting with stat
2026-01-31 03:34:34 - __main__ - INFO - ğŸš€ ã¿ã‚„å¡¾ã€€è‹±ä½œæ–‡ç‰¹è¨“è¬›åº§ã€€å®®å´å¤§å­¦åŒ»å­¦éƒ¨ï¼ˆå’Œæ–‡è‹±è¨³ï¼‰ v3.0.0 èµ·å‹•: http://localhost:8001
2026-01-31 03:34:34 - __main__ - INFO - ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹: data/miyazaki_igaku_eisakubun.db
2026-01-31 03:34:34 - __main__ - INFO - ğŸ¯ æœ‰åŠ¹æ©Ÿèƒ½: 4/4
2026-01-31 03:34:34 - werkzeug - WARNING -  * Debugger is active!
2026-01-31 03:34:34 - werkzeug - INFO -  * Debugger PIN: 519-604-230
