nohup: ignoring input
2026-01-30 23:44:30 - __main__ - INFO - ğŸš€ ã¿ã‚„å¡¾ã€€è‹±ä½œæ–‡ç‰¹è¨“è¬›åº§ã€€å®®å´å¤§å­¦åŒ»å­¦éƒ¨ï¼ˆå’Œæ–‡è‹±è¨³ï¼‰ v3.0.0 èµ·å‹•: http://localhost:8001
2026-01-30 23:44:30 - __main__ - INFO - ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹: data/miyazaki_igaku_eisakubun.db
2026-01-30 23:44:30 - __main__ - INFO - ğŸ¯ æœ‰åŠ¹æ©Ÿèƒ½: 4/4
 * Serving Flask app 'app'
 * Debug mode: on
2026-01-30 23:44:30 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8001
 * Running on http://10.0.10.26:8001
2026-01-30 23:44:30 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2026-01-30 23:44:30 - werkzeug - INFO -  * Restarting with stat
2026-01-30 23:44:31 - __main__ - INFO - ğŸš€ ã¿ã‚„å¡¾ã€€è‹±ä½œæ–‡ç‰¹è¨“è¬›åº§ã€€å®®å´å¤§å­¦åŒ»å­¦éƒ¨ï¼ˆå’Œæ–‡è‹±è¨³ï¼‰ v3.0.0 èµ·å‹•: http://localhost:8001
2026-01-30 23:44:31 - __main__ - INFO - ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹: data/miyazaki_igaku_eisakubun.db
2026-01-30 23:44:31 - __main__ - INFO - ğŸ¯ æœ‰åŠ¹æ©Ÿèƒ½: 4/4
2026-01-30 23:44:31 - werkzeug - WARNING -  * Debugger is active!
2026-01-30 23:44:31 - werkzeug - INFO -  * Debugger PIN: 519-604-230
2026-01-30 23:44:36 - werkzeug - INFO - 127.0.0.1 - - [30/Jan/2026 23:44:36] "GET /health HTTP/1.1" 200 -
2026-01-30 23:44:43 - werkzeug - INFO - 127.0.0.1 - - [30/Jan/2026 23:44:43] "GET /health HTTP/1.1" 200 -
2026-01-30 23:46:37 - werkzeug - INFO - 127.0.0.1 - - [30/Jan/2026 23:46:37] "GET / HTTP/1.1" 200 -
2026-01-30 23:46:37 - werkzeug - INFO - 127.0.0.1 - - [30/Jan/2026 23:46:37] "[36mGET /static/style.css?v=20260121m HTTP/1.1[0m" 304 -
2026-01-30 23:46:37 - werkzeug - INFO - 127.0.0.1 - - [30/Jan/2026 23:46:37] "[36mGET /static/main.js?v=20260121N HTTP/1.1[0m" 304 -
2026-01-30 23:46:37 - werkzeug - INFO - 127.0.0.1 - - [30/Jan/2026 23:46:37] "[36mGET /static/textarea-resize.png HTTP/1.1[0m" 304 -
2026-01-30 23:46:38 - database - INFO - Excluded themes: ['å­¦è¡“', 'ã‚³ãƒ©ãƒ ', 'å›³è¡¨', 'ç ”ç©¶ç´¹ä»‹', 'ãƒ¬ãƒ“ãƒ¥ãƒ¼', 'ãƒ–ãƒ­ã‚°', 'æ™‚äº‹']
2026-01-30 23:46:38 - llm_service - INFO - ç¿»è¨³å•é¡Œã‚’ç”Ÿæˆä¸­...
2026-01-30 23:46:38 - llm_service - INFO - ğŸ“Š ç›´è¿‘10å•ã®ã‚µãƒ–ãƒˆãƒ”ãƒƒã‚¯: ['å­¦è¡“:D', 'ã‚³ãƒ©ãƒ :C', 'ã‚³ãƒ©ãƒ :C', 'å­¦è¡“:F', 'å›³è¡¨:C', 'ç ”ç©¶ç´¹ä»‹:D', 'å­¦è¡“:H', 'ãƒ¬ãƒ“ãƒ¥ãƒ¼:F', 'å›³è¡¨:E', 'ã‚³ãƒ©ãƒ :A']
2026-01-30 23:46:38 - llm_service - INFO - ğŸ“Š ç›´è¿‘30å•ã®åˆ†å¸ƒ: ã‚³ãƒ©ãƒ =20.0%, ãƒ–ãƒ­ã‚°=10.0%, ãƒ¬ãƒ“ãƒ¥ãƒ¼=10.0%, å›³è¡¨=13.3%, å­¦è¡“=16.7%, æ™‚äº‹=16.7%, ç ”ç©¶ç´¹ä»‹=13.3%
2026-01-30 23:46:38 - llm_service - INFO - ğŸ¯ ã‚·ã‚¹ãƒ†ãƒ ãŒé¸æŠã—ãŸtheme: å­¦è¡“
2026-01-30 23:46:38 - llm_service - INFO - ğŸ“Š ç›´è¿‘10å•ã®åˆ†å¸ƒ: P1_ONLY=10.0%, P2_P3=60.0%, P3_ONLY=30.0%, P4_P5=0.0%
2026-01-30 23:46:38 - llm_service - INFO - ğŸ¯ ã‚·ã‚¹ãƒ†ãƒ ãŒé¸æŠã—ãŸexcerpt_type: P2_P3
2026-01-30 23:46:45 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-30 23:46:45 - llm_service - INFO - OpenAI API response (attempt 1): {
  "theme": "å­¦è¡“",
  "topic_label": "B",
  "excerpt_type": "P2_P3",
  "japanese_paragraphs": [
    "ã“ã®ç ”ç©¶ã§ã¯ã€å‚åŠ è€…ã«æ–°ã—ã„å˜èªãƒªã‚¹ãƒˆã‚’è¦šãˆã•ã›ã‚‹ãŸã‚ã«ã€ç•°ãªã‚‹å­¦ç¿’é–“éš”ã‚’è¨­ã‘ãŸã€‚çŸ­ã„é–“éš”ã§å­¦ç¿’ã™ã‚‹ã‚°ãƒ«ãƒ¼ãƒ—ã¨ã€é•·ã„é–“éš”ã§å­¦ç¿’ã™ã‚‹ã‚°ãƒ«ãƒ¼ãƒ—ã«åˆ†ã‹ã‚ŒãŸã€‚",
    "ã¾ãŸã€å­¦ç¿’å¾Œã®ãƒ†ã‚¹ãƒˆã¯å³æ™‚ã¨é…å»¶ã®...
2026-01-30 23:46:45 - llm_service - INFO - [DEBUG] Full LLM response for correction:
{
  "theme": "å­¦è¡“",
  "topic_label": "B",
  "excerpt_type": "P2_P3",
  "japanese_paragraphs": [
    "ã“ã®ç ”ç©¶ã§ã¯ã€å‚åŠ è€…ã«æ–°ã—ã„å˜èªãƒªã‚¹ãƒˆã‚’è¦šãˆã•ã›ã‚‹ãŸã‚ã«ã€ç•°ãªã‚‹å­¦ç¿’é–“éš”ã‚’è¨­ã‘ãŸã€‚çŸ­ã„é–“éš”ã§å­¦ç¿’ã™ã‚‹ã‚°ãƒ«ãƒ¼ãƒ—ã¨ã€é•·ã„é–“éš”ã§å­¦ç¿’ã™ã‚‹ã‚°ãƒ«ãƒ¼ãƒ—ã«åˆ†ã‹ã‚ŒãŸã€‚",
    "ã¾ãŸã€å­¦ç¿’å¾Œã®ãƒ†ã‚¹ãƒˆã¯å³æ™‚ã¨é…å»¶ã®ä¸¡æ–¹ã§å®Ÿæ–½ã•ã‚Œã€å„ã‚°ãƒ«ãƒ¼ãƒ—ã®è¨˜æ†¶ä¿æŒç‡ãŒæ¯”è¼ƒã•ã‚ŒãŸã€‚"
  ],
  "hints": [
    {"en": "interval", "ja": "é–“éš”", "kana": "ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒ«", "pos": "åè©", "usage": "learning intervalã€Œå­¦ç¿’é–“éš”ã€"},
    {"en": "retain", "ja": "ä¿æŒã™ã‚‹", "kana": "ãƒªãƒ†ã‚¤ãƒ³", "pos": "å‹•è©", "usage": "retain informationã€Œæƒ…å ±ã‚’ä¿æŒã™ã‚‹ã€"},
    {"en": "immediate", "ja": "å³æ™‚ã®", "kana": "ã‚¤ãƒŸãƒ‡ã‚£ã‚¨ã‚¤ãƒˆ", "pos": "å½¢å®¹è©", "usage": "immediate testã€Œå³æ™‚ãƒ†ã‚¹ãƒˆã€"},
    {"en": "delayed", "ja": "é…å»¶ã®", "kana": "ãƒ‡ã‚£ãƒ¬ã‚¤ãƒ‰", "pos": "å½¢å®¹è©", "usage": "delayed testã€Œé…å»¶ãƒ†ã‚¹ãƒˆã€"},
    {"en": "compare", "ja": "æ¯”è¼ƒã™ã‚‹", "kana": "ã‚³ãƒ³ãƒšã‚¢", "pos": "å‹•è©", "usage": "compare the resultsã€Œçµæœã‚’æ¯”è¼ƒã™ã‚‹ã€"}
  ],
  "target_words": {"min": 100, "max": 120}
}
2026-01-30 23:46:45 - llm_service - INFO - Cleaned JSON (attempt 1): {
  "theme": "å­¦è¡“",
  "topic_label": "B",
  "excerpt_type": "P2_P3",
  "japanese_paragraphs": [
    "ã“ã®ç ”ç©¶ã§ã¯ã€å‚åŠ è€…ã«æ–°ã—ã„å˜èªãƒªã‚¹ãƒˆã‚’è¦šãˆã•ã›ã‚‹ãŸã‚ã«ã€ç•°ãªã‚‹å­¦ç¿’é–“éš”ã‚’è¨­ã‘ãŸã€‚çŸ­ã„é–“éš”ã§å­¦ç¿’ã™ã‚‹ã‚°ãƒ«ãƒ¼ãƒ—ã¨ã€é•·ã„é–“éš”ã§å­¦ç¿’ã™ã‚‹ã‚°ãƒ«ãƒ¼ãƒ—ã«åˆ†ã‹ã‚ŒãŸã€‚",
    "ã¾ãŸã€å­¦ç¿’å¾Œã®ãƒ†ã‚¹ãƒˆã¯å³æ™‚ã¨é…å»¶ã®ä¸¡æ–¹ã§å®Ÿæ–½ã•ã‚Œã€å„ã‚°ãƒ«ãƒ¼ãƒ—ã®è¨˜æ†¶ä¿æŒç‡ãŒæ¯”è¼ƒã•ã‚ŒãŸã€‚"
  ],
  "hints": [
    {"en": "interval", "ja": "é–“éš”", "kana": "ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒ«", "...
2026-01-30 23:46:45 - llm_service - INFO - âœ… excerpt_typeæ¤œè¨¼æˆåŠŸ: P2_P3
2026-01-30 23:46:45 - llm_service - INFO - âœ… themeæ¤œè¨¼æˆåŠŸ: å­¦è¡“
2026-01-30 23:46:45 - llm_service - INFO - Successfully generated question: å­¦è¡“, excerpt_type: P2_P3
2026-01-30 23:46:45 - database - INFO - Question saved: q_20260130_aad505f0 - å­¦è¡“ (P2_P3)
2026-01-30 23:46:45 - database - INFO - Theme recorded: å­¦è¡“ (mode: general)
2026-01-30 23:46:45 - werkzeug - INFO - 127.0.0.1 - - [30/Jan/2026 23:46:45] "POST /api/question HTTP/1.1" 200 -
2026-01-30 23:51:21 - llm_service - INFO - Step 1 - Punctuation normalized (first 100 chars): In that study,different learning intervals were set so that participants could memorize a new list o...
2026-01-30 23:51:21 - llm_service - INFO - Step 2 - User input normalized (first 100 chars): In that study,different learning intervals were set so that participants could memorize a new list o...
2026-01-30 23:51:21 - llm_service - INFO - Question text for correction: ã“ã®ç ”ç©¶ã§ã¯ã€å‚åŠ è€…ã«æ–°ã—ã„å˜èªãƒªã‚¹ãƒˆã‚’è¦šãˆã•ã›ã‚‹ãŸã‚ã«ã€ç•°ãªã‚‹å­¦ç¿’é–“éš”ã‚’è¨­ã‘ãŸã€‚
çŸ­ã„é–“éš”ã§å­¦ç¿’ã™ã‚‹ã‚°ãƒ«ãƒ¼ãƒ—ã¨ã€é•·ã„é–“éš”ã§å­¦ç¿’ã™ã‚‹ã‚°ãƒ«ãƒ¼ãƒ—ã«åˆ†ã‹ã‚ŒãŸã€‚
ã¾ãŸã€å­¦ç¿’å¾Œã®ãƒ†ã‚¹ãƒˆã¯å³æ™‚ã¨é…å»¶ã®ä¸¡æ–¹ã§å®Ÿæ–½ã•ã‚Œã€å„ã‚°ãƒ«ãƒ¼ãƒ—ã®è¨˜æ†¶ä¿æŒç‡ãŒæ¯”è¼ƒã•ã‚ŒãŸã€‚...
2026-01-30 23:51:21 - llm_service - INFO - Required points determined from Japanese text: 3 sentences
2026-01-30 23:51:21 - llm_service - INFO - Required points for this correction: 3
2026-01-30 23:51:21 - llm_service - INFO - Word count: 61
2026-01-30 23:51:21 - llm_service - INFO - Correction attempt 1/3
2026-01-30 23:51:48 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-30 23:51:48 - llm_service - INFO - OpenAI API response (attempt 1): {
  "original": "In that study,different learning intervals were set so that participants could memorize a new list of words. The participants weree divided into a group that studied at short interval...
2026-01-30 23:51:48 - llm_service - ERROR - JSON parse error (attempt 1): Expecting ',' delimiter: line 28 column 6 (char 3611)
2026-01-30 23:51:50 - llm_service - INFO - Correction attempt 2/3
2026-01-30 23:52:14 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-30 23:52:14 - llm_service - INFO - OpenAI API response (attempt 1): {
  "original": "In that study,different learning intervals were set so that participants could memorize a new list of words. The participants weree divided into a group that studied at short interval...
2026-01-30 23:52:14 - llm_service - WARNING - Skipping point 1: before 'ã€å…¨ä½“è©•ä¾¡ã€‘' not found in student answer
2026-01-30 23:52:14 - llm_service - INFO - Before normalization: 3 points
2026-01-30 23:52:14 - points_normalizer - INFO - Starting points normalization: 3 points
2026-01-30 23:52:14 - points_normalizer - INFO - Student answer split into 3 sentences
2026-01-30 23:52:14 - points_normalizer - INFO - Processing point 1: before='In that study,different learning intervals were se...', level='âœ…æ­£ã—ã„è¡¨ç¾'
2026-01-30 23:52:14 - points_normalizer - INFO - Point 1: Found in sentence 1: 'In that study,different learning intervals were se...'
2026-01-30 23:52:14 - points_normalizer - INFO - Point 1: Normalized successfully (sentence_no=1)
2026-01-30 23:52:14 - points_normalizer - INFO - Processing point 2: before='The participants weree divided into a group that s...', level='âŒæ–‡æ³•ãƒŸã‚¹'
2026-01-30 23:52:14 - points_normalizer - INFO - Point 2: Found in sentence 2: 'The participants weree divided into a group that s...'
2026-01-30 23:52:14 - points_normalizer - INFO - Point 2: Replaced fragment in sentence: 'The participants were divided into a group that st...'
2026-01-30 23:52:14 - points_normalizer - INFO - Level is âŒ, keeping after: 'The participants were divided into a group that st...'
2026-01-30 23:52:14 - points_normalizer - INFO - Point 2: Normalized successfully (sentence_no=2)
2026-01-30 23:52:14 - points_normalizer - INFO - Processing point 3: before='In conclusion, tests after learning were administe...', level='âŒæ–‡æ³•ãƒŸã‚¹'
2026-01-30 23:52:14 - points_normalizer - INFO - Point 3: Found in sentence 3: 'In conclusion, tests after learning were administe...'
2026-01-30 23:52:14 - points_normalizer - INFO - Point 3: Replaced fragment in sentence: 'Also, tests after learning were administered both ...'
2026-01-30 23:52:14 - points_normalizer - INFO - Level is âŒ, keeping after: 'Also, tests after learning were administered both ...'
2026-01-30 23:52:14 - points_normalizer - INFO - Point 3: Normalized successfully (sentence_no=3)
2026-01-30 23:52:14 - points_normalizer - INFO - Points normalization complete: 3 points
2026-01-30 23:52:14 - llm_service - INFO - After normalization: 3 points
2026-01-30 23:52:14 - llm_service - INFO - Points check: current=3, non-evaluation=3, required=3
2026-01-30 23:52:14 - llm_service - INFO - âœ… Correction successful: 3 points
2026-01-30 23:52:14 - database - INFO - Submission saved: s_20260130_f2269a74 (mode: general, no scoring)
2026-01-30 23:52:14 - werkzeug - INFO - 127.0.0.1 - - [30/Jan/2026 23:52:14] "POST /api/correct-multi HTTP/1.1" 200 -
2026-01-30 23:53:25 - werkzeug - INFO -  * Detected change in '/workspaces/miyazaki_igaku_100words/prompts_correction_respect.py', reloading
2026-01-30 23:53:25 - werkzeug - INFO -  * Restarting with stat
2026-01-30 23:53:27 - __main__ - INFO - ğŸš€ ã¿ã‚„å¡¾ã€€è‹±ä½œæ–‡ç‰¹è¨“è¬›åº§ã€€å®®å´å¤§å­¦åŒ»å­¦éƒ¨ï¼ˆå’Œæ–‡è‹±è¨³ï¼‰ v3.0.0 èµ·å‹•: http://localhost:8001
2026-01-30 23:53:27 - __main__ - INFO - ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹: data/miyazaki_igaku_eisakubun.db
2026-01-30 23:53:27 - __main__ - INFO - ğŸ¯ æœ‰åŠ¹æ©Ÿèƒ½: 4/4
2026-01-30 23:53:27 - werkzeug - WARNING -  * Debugger is active!
2026-01-30 23:53:27 - werkzeug - INFO -  * Debugger PIN: 519-604-230
2026-01-30 23:54:09 - werkzeug - INFO -  * Detected change in '/workspaces/miyazaki_igaku_100words/prompts_correction_respect.py', reloading
2026-01-30 23:54:10 - werkzeug - INFO -  * Restarting with stat
2026-01-30 23:54:11 - __main__ - INFO - ğŸš€ ã¿ã‚„å¡¾ã€€è‹±ä½œæ–‡ç‰¹è¨“è¬›åº§ã€€å®®å´å¤§å­¦åŒ»å­¦éƒ¨ï¼ˆå’Œæ–‡è‹±è¨³ï¼‰ v3.0.0 èµ·å‹•: http://localhost:8001
2026-01-30 23:54:11 - __main__ - INFO - ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹: data/miyazaki_igaku_eisakubun.db
2026-01-30 23:54:11 - __main__ - INFO - ğŸ¯ æœ‰åŠ¹æ©Ÿèƒ½: 4/4
2026-01-30 23:54:11 - werkzeug - WARNING -  * Debugger is active!
2026-01-30 23:54:11 - werkzeug - INFO -  * Debugger PIN: 519-604-230
