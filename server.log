nohup: ignoring input
2026-01-31 01:06:17 - __main__ - INFO - ğŸš€ ã¿ã‚„å¡¾ã€€è‹±ä½œæ–‡ç‰¹è¨“è¬›åº§ã€€å®®å´å¤§å­¦åŒ»å­¦éƒ¨ï¼ˆå’Œæ–‡è‹±è¨³ï¼‰ v3.0.0 èµ·å‹•: http://localhost:8001
2026-01-31 01:06:17 - __main__ - INFO - ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹: data/miyazaki_igaku_eisakubun.db
2026-01-31 01:06:17 - __main__ - INFO - ğŸ¯ æœ‰åŠ¹æ©Ÿèƒ½: 4/4
 * Serving Flask app 'app'
 * Debug mode: on
2026-01-31 01:06:17 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8001
 * Running on http://10.0.10.26:8001
2026-01-31 01:06:17 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2026-01-31 01:06:17 - werkzeug - INFO -  * Restarting with stat
2026-01-31 01:06:18 - __main__ - INFO - ğŸš€ ã¿ã‚„å¡¾ã€€è‹±ä½œæ–‡ç‰¹è¨“è¬›åº§ã€€å®®å´å¤§å­¦åŒ»å­¦éƒ¨ï¼ˆå’Œæ–‡è‹±è¨³ï¼‰ v3.0.0 èµ·å‹•: http://localhost:8001
2026-01-31 01:06:18 - __main__ - INFO - ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹: data/miyazaki_igaku_eisakubun.db
2026-01-31 01:06:18 - __main__ - INFO - ğŸ¯ æœ‰åŠ¹æ©Ÿèƒ½: 4/4
2026-01-31 01:06:18 - werkzeug - WARNING -  * Debugger is active!
2026-01-31 01:06:18 - werkzeug - INFO -  * Debugger PIN: 519-604-230
2026-01-31 01:06:20 - werkzeug - INFO - 127.0.0.1 - - [31/Jan/2026 01:06:20] "GET /health HTTP/1.1" 200 -
2026-01-31 01:06:28 - werkzeug - INFO - 127.0.0.1 - - [31/Jan/2026 01:06:28] "GET /health HTTP/1.1" 200 -
2026-01-31 01:07:40 - werkzeug - INFO - 127.0.0.1 - - [31/Jan/2026 01:07:40] "GET / HTTP/1.1" 200 -
2026-01-31 01:07:40 - werkzeug - INFO - 127.0.0.1 - - [31/Jan/2026 01:07:40] "[36mGET /static/style.css?v=20260121m HTTP/1.1[0m" 304 -
2026-01-31 01:07:40 - werkzeug - INFO - 127.0.0.1 - - [31/Jan/2026 01:07:40] "[36mGET /static/main.js?v=20260121N HTTP/1.1[0m" 304 -
2026-01-31 01:07:40 - werkzeug - INFO - 127.0.0.1 - - [31/Jan/2026 01:07:40] "[36mGET /static/textarea-resize.png HTTP/1.1[0m" 304 -
2026-01-31 01:07:41 - database - INFO - Excluded themes: ['ãƒ¬ãƒ“ãƒ¥ãƒ¼', 'ç ”ç©¶ç´¹ä»‹', 'ãƒ–ãƒ­ã‚°', 'æ™‚äº‹', 'å­¦è¡“', 'ã‚³ãƒ©ãƒ ', 'å›³è¡¨']
2026-01-31 01:07:41 - llm_service - INFO - ç¿»è¨³å•é¡Œã‚’ç”Ÿæˆä¸­...
2026-01-31 01:07:41 - llm_service - INFO - ğŸ“Š ç›´è¿‘10å•ã®ã‚µãƒ–ãƒˆãƒ”ãƒƒã‚¯: ['ãƒ¬ãƒ“ãƒ¥ãƒ¼:F', 'ç ”ç©¶ç´¹ä»‹:C', 'ãƒ–ãƒ­ã‚°:F', 'ãƒ–ãƒ­ã‚°:C', 'æ™‚äº‹:B', 'å­¦è¡“:A', 'å­¦è¡“:E', 'ã‚³ãƒ©ãƒ :E', 'ãƒ–ãƒ­ã‚°:A', 'å­¦è¡“:B']
2026-01-31 01:07:41 - llm_service - INFO - ğŸ“Š ç›´è¿‘30å•ã®åˆ†å¸ƒ: ã‚³ãƒ©ãƒ =16.7%, ãƒ–ãƒ­ã‚°=20.0%, ãƒ¬ãƒ“ãƒ¥ãƒ¼=6.7%, å›³è¡¨=13.3%, å­¦è¡“=23.3%, æ™‚äº‹=6.7%, ç ”ç©¶ç´¹ä»‹=13.3%
2026-01-31 01:07:41 - llm_service - INFO - ğŸ¯ ã‚·ã‚¹ãƒ†ãƒ ãŒé¸æŠã—ãŸtheme: ãƒ¬ãƒ“ãƒ¥ãƒ¼
2026-01-31 01:07:41 - llm_service - INFO - ğŸ“Š ç›´è¿‘10å•ã®åˆ†å¸ƒ: P1_ONLY=20.0%, P2_P3=70.0%, P3_ONLY=10.0%, P4_P5=0.0%
2026-01-31 01:07:41 - llm_service - INFO - ğŸ¯ ã‚·ã‚¹ãƒ†ãƒ ãŒé¸æŠã—ãŸexcerpt_type: P1_ONLY
2026-01-31 01:07:57 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-31 01:07:57 - llm_service - INFO - OpenAI API response (attempt 1): {
  "theme": "ãƒ¬ãƒ“ãƒ¥ãƒ¼",
  "topic_label": "G",
  "excerpt_type": "P1_ONLY",
  "japanese_paragraphs": [
    "æ—¥æœ¬ã®è‘—åãªå»ºç¯‰å®¶ã€éšˆç ”å¾ã®ä½œå“ã¯ã€ãã®é©æ–°çš„ãªãƒ‡ã‚¶ã‚¤ãƒ³ã¨è‡ªç„¶ã¨ã®èª¿å’Œã§åºƒãè©•ä¾¡ã•ã‚Œã¦ã„ã¾ã™ã€‚å½¼ã®å»ºç¯‰ã¯ã€æœ¨æã‚„çŸ³ãªã©ã®è‡ªç„¶ç´ æã‚’å·§ã¿ã«ä½¿ç”¨ã—ã€å‘¨å›²ã®ç’°å¢ƒã¨èª¿å’Œã™ã‚‹ã“ã¨ã§çŸ¥ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚ç‰¹ã«ã€...
2026-01-31 01:07:57 - llm_service - INFO - [DEBUG] Full LLM response for correction:
{
  "theme": "ãƒ¬ãƒ“ãƒ¥ãƒ¼",
  "topic_label": "G",
  "excerpt_type": "P1_ONLY",
  "japanese_paragraphs": [
    "æ—¥æœ¬ã®è‘—åãªå»ºç¯‰å®¶ã€éšˆç ”å¾ã®ä½œå“ã¯ã€ãã®é©æ–°çš„ãªãƒ‡ã‚¶ã‚¤ãƒ³ã¨è‡ªç„¶ã¨ã®èª¿å’Œã§åºƒãè©•ä¾¡ã•ã‚Œã¦ã„ã¾ã™ã€‚å½¼ã®å»ºç¯‰ã¯ã€æœ¨æã‚„çŸ³ãªã©ã®è‡ªç„¶ç´ æã‚’å·§ã¿ã«ä½¿ç”¨ã—ã€å‘¨å›²ã®ç’°å¢ƒã¨èª¿å’Œã™ã‚‹ã“ã¨ã§çŸ¥ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚ç‰¹ã«ã€å½¼ã®ä»£è¡¨ä½œã§ã‚ã‚‹ã€Œæµ…è‰æ–‡åŒ–è¦³å…‰ã‚»ãƒ³ã‚¿ãƒ¼ã€ã¯ã€ãã®åœ°åŸŸã®æ­´å²ã¨ç¾ä»£çš„ãªè¦ç´ ã‚’è¦‹äº‹ã«èåˆã•ã›ãŸå»ºç‰©ã¨ã—ã¦ã€å¤šãã®è¦³å…‰å®¢ã‚’é­…äº†ã—ã¦ã„ã¾ã™ã€‚"
  ],
  "hints": [
    {"en": "architect", "ja": "å»ºç¯‰å®¶", "kana": "ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒˆ", "pos": "åè©", "usage": "Famous architectéšˆç ”å¾ãŒãƒ‡ã‚¶ã‚¤ãƒ³ã—ãŸã€‚"},
    {"en": "harmony", "ja": "èª¿å’Œ", "kana": "ãƒãƒ¼ãƒ¢ãƒ‹ãƒ¼", "pos": "åè©", "usage": "è‡ªç„¶ã¨ã®èª¿å’Œã‚’é‡è¦–ã—ãŸãƒ‡ã‚¶ã‚¤ãƒ³ã€‚"},
    {"en": "innovative", "ja": "é©æ–°çš„ãª", "kana": "ã‚¤ãƒãƒ´ã‚§ã‚¤ãƒ†ã‚£ãƒ–", "pos": "å½¢å®¹è©", "usage": "é©æ–°çš„ãªãƒ‡ã‚¶ã‚¤ãƒ³ã§çŸ¥ã‚‰ã‚Œã‚‹ã€‚"},
    {"en": "material", "ja": "ç´ æ", "kana": "ãƒãƒ†ãƒªã‚¢ãƒ«", "pos": "åè©", "usage": "è‡ªç„¶ç´ æã‚’ä½¿ç”¨ã—ãŸå»ºç¯‰ã€‚"},
    {"en": "blend", "ja": "èåˆ", "kana": "ãƒ–ãƒ¬ãƒ³ãƒ‰", "pos": "å‹•è©", "usage": "æ­´å²ã¨ç¾ä»£ã‚’èåˆã•ã›ãŸå»ºç‰©ã€‚"}
  ],
  "target_words": {"min": 100, "max": 120}
}
2026-01-31 01:07:57 - llm_service - INFO - Cleaned JSON (attempt 1): {
  "theme": "ãƒ¬ãƒ“ãƒ¥ãƒ¼",
  "topic_label": "G",
  "excerpt_type": "P1_ONLY",
  "japanese_paragraphs": [
    "æ—¥æœ¬ã®è‘—åãªå»ºç¯‰å®¶ã€éšˆç ”å¾ã®ä½œå“ã¯ã€ãã®é©æ–°çš„ãªãƒ‡ã‚¶ã‚¤ãƒ³ã¨è‡ªç„¶ã¨ã®èª¿å’Œã§åºƒãè©•ä¾¡ã•ã‚Œã¦ã„ã¾ã™ã€‚å½¼ã®å»ºç¯‰ã¯ã€æœ¨æã‚„çŸ³ãªã©ã®è‡ªç„¶ç´ æã‚’å·§ã¿ã«ä½¿ç”¨ã—ã€å‘¨å›²ã®ç’°å¢ƒã¨èª¿å’Œã™ã‚‹ã“ã¨ã§çŸ¥ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚ç‰¹ã«ã€å½¼ã®ä»£è¡¨ä½œã§ã‚ã‚‹ã€Œæµ…è‰æ–‡åŒ–è¦³å…‰ã‚»ãƒ³ã‚¿ãƒ¼ã€ã¯ã€ãã®åœ°åŸŸã®æ­´å²ã¨ç¾ä»£çš„ãªè¦ç´ ã‚’è¦‹äº‹ã«èåˆã•ã›ãŸå»ºç‰©ã¨ã—ã¦ã€å¤šãã®è¦³å…‰å®¢ã‚’é­…äº†ã—ã¦ã„ã¾ã™ã€‚"
  ],
  "hints": [
    {"en": "ar...
2026-01-31 01:07:57 - llm_service - INFO - âœ… excerpt_typeæ¤œè¨¼æˆåŠŸ: P1_ONLY
2026-01-31 01:07:57 - llm_service - INFO - âœ… themeæ¤œè¨¼æˆåŠŸ: ãƒ¬ãƒ“ãƒ¥ãƒ¼
2026-01-31 01:07:57 - llm_service - INFO - Successfully generated question: ãƒ¬ãƒ“ãƒ¥ãƒ¼, excerpt_type: P1_ONLY
2026-01-31 01:07:57 - database - INFO - Question saved: q_20260131_6e8b0853 - ãƒ¬ãƒ“ãƒ¥ãƒ¼ (P1_ONLY)
2026-01-31 01:07:57 - database - INFO - Theme recorded: ãƒ¬ãƒ“ãƒ¥ãƒ¼ (mode: general)
2026-01-31 01:07:57 - werkzeug - INFO - 127.0.0.1 - - [31/Jan/2026 01:07:57] "POST /api/question HTTP/1.1" 200 -
2026-01-31 01:07:58 - database - INFO - Excluded themes: ['ãƒ¬ãƒ“ãƒ¥ãƒ¼', 'ç ”ç©¶ç´¹ä»‹', 'ãƒ–ãƒ­ã‚°', 'æ™‚äº‹', 'å­¦è¡“', 'ã‚³ãƒ©ãƒ ', 'å›³è¡¨']
2026-01-31 01:07:58 - llm_service - INFO - ç¿»è¨³å•é¡Œã‚’ç”Ÿæˆä¸­...
2026-01-31 01:07:58 - llm_service - INFO - ğŸ“Š ç›´è¿‘10å•ã®ã‚µãƒ–ãƒˆãƒ”ãƒƒã‚¯: ['ãƒ¬ãƒ“ãƒ¥ãƒ¼:ä¸æ˜', 'ãƒ¬ãƒ“ãƒ¥ãƒ¼:F', 'ç ”ç©¶ç´¹ä»‹:C', 'ãƒ–ãƒ­ã‚°:F', 'ãƒ–ãƒ­ã‚°:C', 'æ™‚äº‹:B', 'å­¦è¡“:A', 'å­¦è¡“:E', 'ã‚³ãƒ©ãƒ :E', 'ãƒ–ãƒ­ã‚°:A']
2026-01-31 01:07:58 - llm_service - INFO - ğŸ“Š ç›´è¿‘30å•ã®åˆ†å¸ƒ: ã‚³ãƒ©ãƒ =16.7%, ãƒ–ãƒ­ã‚°=20.0%, ãƒ¬ãƒ“ãƒ¥ãƒ¼=10.0%, å›³è¡¨=13.3%, å­¦è¡“=20.0%, æ™‚äº‹=6.7%, ç ”ç©¶ç´¹ä»‹=13.3%
2026-01-31 01:07:58 - llm_service - INFO - ğŸ¯ ã‚·ã‚¹ãƒ†ãƒ ãŒé¸æŠã—ãŸtheme: å­¦è¡“
2026-01-31 01:07:58 - llm_service - INFO - ğŸ“Š ç›´è¿‘10å•ã®åˆ†å¸ƒ: P1_ONLY=30.0%, P2_P3=60.0%, P3_ONLY=10.0%, P4_P5=0.0%
2026-01-31 01:07:58 - llm_service - INFO - ğŸ¯ ã‚·ã‚¹ãƒ†ãƒ ãŒé¸æŠã—ãŸexcerpt_type: P3_ONLY
2026-01-31 01:08:00 - werkzeug - INFO - 127.0.0.1 - - [31/Jan/2026 01:08:00] "GET / HTTP/1.1" 200 -
2026-01-31 01:08:00 - werkzeug - INFO - 127.0.0.1 - - [31/Jan/2026 01:08:00] "[36mGET /static/style.css?v=20260121m HTTP/1.1[0m" 304 -
2026-01-31 01:08:00 - werkzeug - INFO - 127.0.0.1 - - [31/Jan/2026 01:08:00] "[36mGET /static/main.js?v=20260121N HTTP/1.1[0m" 304 -
2026-01-31 01:08:00 - werkzeug - INFO - 127.0.0.1 - - [31/Jan/2026 01:08:00] "[36mGET /static/textarea-resize.png HTTP/1.1[0m" 304 -
2026-01-31 01:08:01 - database - INFO - Excluded themes: ['ãƒ¬ãƒ“ãƒ¥ãƒ¼', 'ç ”ç©¶ç´¹ä»‹', 'ãƒ–ãƒ­ã‚°', 'æ™‚äº‹', 'å­¦è¡“', 'ã‚³ãƒ©ãƒ ', 'å›³è¡¨']
2026-01-31 01:08:01 - llm_service - INFO - ç¿»è¨³å•é¡Œã‚’ç”Ÿæˆä¸­...
2026-01-31 01:08:01 - llm_service - INFO - ğŸ“Š ç›´è¿‘10å•ã®ã‚µãƒ–ãƒˆãƒ”ãƒƒã‚¯: ['ãƒ¬ãƒ“ãƒ¥ãƒ¼:ä¸æ˜', 'ãƒ¬ãƒ“ãƒ¥ãƒ¼:F', 'ç ”ç©¶ç´¹ä»‹:C', 'ãƒ–ãƒ­ã‚°:F', 'ãƒ–ãƒ­ã‚°:C', 'æ™‚äº‹:B', 'å­¦è¡“:A', 'å­¦è¡“:E', 'ã‚³ãƒ©ãƒ :E', 'ãƒ–ãƒ­ã‚°:A']
2026-01-31 01:08:01 - llm_service - INFO - ğŸ“Š ç›´è¿‘30å•ã®åˆ†å¸ƒ: ã‚³ãƒ©ãƒ =16.7%, ãƒ–ãƒ­ã‚°=20.0%, ãƒ¬ãƒ“ãƒ¥ãƒ¼=10.0%, å›³è¡¨=13.3%, å­¦è¡“=20.0%, æ™‚äº‹=6.7%, ç ”ç©¶ç´¹ä»‹=13.3%
2026-01-31 01:08:01 - llm_service - INFO - ğŸ¯ ã‚·ã‚¹ãƒ†ãƒ ãŒé¸æŠã—ãŸtheme: å›³è¡¨
2026-01-31 01:08:01 - llm_service - INFO - ğŸ“Š ç›´è¿‘10å•ã®åˆ†å¸ƒ: P1_ONLY=30.0%, P2_P3=60.0%, P3_ONLY=10.0%, P4_P5=0.0%
2026-01-31 01:08:01 - llm_service - INFO - ğŸ¯ ã‚·ã‚¹ãƒ†ãƒ ãŒé¸æŠã—ãŸexcerpt_type: P3_ONLY
2026-01-31 01:08:05 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-31 01:08:05 - llm_service - INFO - OpenAI API response (attempt 1): {
  "theme": "å­¦è¡“",
  "topic_label": "H",
  "excerpt_type": "P3_ONLY",
  "japanese_paragraphs": [
    "ã“ã®ã‚ˆã†ãªèª¿æŸ»ã®çµæœã€ç¡çœ æ™‚é–“ãŒååˆ†ã§ã‚ã‚‹å­¦ç”Ÿã¯ã€å­¦æ¥­æˆç¸¾ãŒå‘ä¸Šã™ã‚‹å‚¾å‘ãŒã‚ã‚‹ã“ã¨ãŒç¤ºã•ã‚ŒãŸã€‚ç‰¹ã«ã€ç¡çœ æ™‚é–“ãŒ7ã€œ8æ™‚é–“ã®å­¦ç”Ÿã¯ã€6æ™‚é–“æœªæº€ã®å­¦ç”Ÿã‚ˆã‚Šã‚‚è©¦é¨“ã§é«˜å¾—ç‚¹ã‚’å–ã‚‹å‚¾å‘ãŒã‚ã£ãŸã€‚ã“ã®ã“ã¨ã¯ã€...
2026-01-31 01:08:05 - llm_service - INFO - [DEBUG] Full LLM response for correction:
{
  "theme": "å­¦è¡“",
  "topic_label": "H",
  "excerpt_type": "P3_ONLY",
  "japanese_paragraphs": [
    "ã“ã®ã‚ˆã†ãªèª¿æŸ»ã®çµæœã€ç¡çœ æ™‚é–“ãŒååˆ†ã§ã‚ã‚‹å­¦ç”Ÿã¯ã€å­¦æ¥­æˆç¸¾ãŒå‘ä¸Šã™ã‚‹å‚¾å‘ãŒã‚ã‚‹ã“ã¨ãŒç¤ºã•ã‚ŒãŸã€‚ç‰¹ã«ã€ç¡çœ æ™‚é–“ãŒ7ã€œ8æ™‚é–“ã®å­¦ç”Ÿã¯ã€6æ™‚é–“æœªæº€ã®å­¦ç”Ÿã‚ˆã‚Šã‚‚è©¦é¨“ã§é«˜å¾—ç‚¹ã‚’å–ã‚‹å‚¾å‘ãŒã‚ã£ãŸã€‚ã“ã®ã“ã¨ã¯ã€é©åˆ‡ãªç¡çœ ãŒå­¦ç¿’åŠ¹æœã‚’é«˜ã‚ã‚‹å¯èƒ½æ€§ã‚’ç¤ºå”†ã—ã¦ã„ã‚‹ã€‚"
  ],
  "hints": [
    {
      "en": "tendency",
      "ja": "å‚¾å‘",
      "kana": "ãƒ†ãƒ³ãƒ‡ãƒ³ã‚·ãƒ¼",
      "pos": "åè©",
      "usage": "There is a tendency for students to perform better with more sleep.ã€Œç¡çœ æ™‚é–“ãŒå¤šã„ã¨å­¦ç”ŸãŒã‚ˆã‚Šè‰¯ã„æˆç¸¾ã‚’å–ã‚‹å‚¾å‘ãŒã‚ã‚‹ã€‚ã€"
    },
    {
      "en": "sufficient",
      "ja": "ååˆ†ãª",
      "kana": "ã‚µãƒ•ã‚£ã‚·ã‚§ãƒ³ãƒˆ",
      "pos": "å½¢å®¹è©",
      "usage": "Sufficient sleep is important for concentration.ã€Œååˆ†ãªç¡çœ ã¯é›†ä¸­ã®ãŸã‚ã«é‡è¦ã§ã‚ã‚‹ã€‚ã€"
    },
    {
      "en": "academic performance",
      "ja": "å­¦æ¥­æˆç¸¾",
      "kana": "ã‚¢ã‚«ãƒ‡ãƒŸãƒƒã‚¯ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹",
      "pos": "åè©",
      "usage": "Good sleep can improve academic performance.ã€Œè‰¯ã„ç¡çœ ã¯å­¦æ¥­æˆç¸¾ã‚’å‘ä¸Šã•ã›ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚ã€"
    },
    {
      "en": "indicate",
      "ja": "ç¤ºã™",
      "kana": "ã‚¤ãƒ³ãƒ‡ã‚£ã‚±ã‚¤ãƒˆ",
      "pos": "å‹•è©",
      "usage": "The study indicates a strong correlation.ã€Œãã®ç ”ç©¶ã¯å¼·ã„ç›¸é–¢ã‚’ç¤ºã—ã¦ã„ã‚‹ã€‚ã€"
    },
    {
      "en": "enhance",
      "ja": "é«˜ã‚ã‚‹",
      "kana": "ã‚¨ãƒ³ãƒãƒ³ã‚¹",
      "pos": "å‹•è©",
      "usage": "Good habits can enhance learning outcomes.ã€Œè‰¯ã„ç¿’æ…£ã¯å­¦ç¿’æˆæœã‚’é«˜ã‚ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚ã€"
    }
  ],
  "target_words": {"min": 100, "max": 120}
}
2026-01-31 01:08:05 - llm_service - INFO - Cleaned JSON (attempt 1): {
  "theme": "å­¦è¡“",
  "topic_label": "H",
  "excerpt_type": "P3_ONLY",
  "japanese_paragraphs": [
    "ã“ã®ã‚ˆã†ãªèª¿æŸ»ã®çµæœã€ç¡çœ æ™‚é–“ãŒååˆ†ã§ã‚ã‚‹å­¦ç”Ÿã¯ã€å­¦æ¥­æˆç¸¾ãŒå‘ä¸Šã™ã‚‹å‚¾å‘ãŒã‚ã‚‹ã“ã¨ãŒç¤ºã•ã‚ŒãŸã€‚ç‰¹ã«ã€ç¡çœ æ™‚é–“ãŒ7ã€œ8æ™‚é–“ã®å­¦ç”Ÿã¯ã€6æ™‚é–“æœªæº€ã®å­¦ç”Ÿã‚ˆã‚Šã‚‚è©¦é¨“ã§é«˜å¾—ç‚¹ã‚’å–ã‚‹å‚¾å‘ãŒã‚ã£ãŸã€‚ã“ã®ã“ã¨ã¯ã€é©åˆ‡ãªç¡çœ ãŒå­¦ç¿’åŠ¹æœã‚’é«˜ã‚ã‚‹å¯èƒ½æ€§ã‚’ç¤ºå”†ã—ã¦ã„ã‚‹ã€‚"
  ],
  "hints": [
    {
      "en": "tendency",
      "ja": "å‚¾å‘",
      "...
2026-01-31 01:08:05 - llm_service - INFO - âœ… excerpt_typeæ¤œè¨¼æˆåŠŸ: P3_ONLY
2026-01-31 01:08:05 - llm_service - INFO - âœ… themeæ¤œè¨¼æˆåŠŸ: å­¦è¡“
2026-01-31 01:08:05 - llm_service - INFO - Successfully generated question: å­¦è¡“, excerpt_type: P3_ONLY
2026-01-31 01:08:05 - database - INFO - Question saved: q_20260131_73753344 - å­¦è¡“ (P3_ONLY)
2026-01-31 01:08:05 - database - INFO - Theme recorded: å­¦è¡“ (mode: general)
2026-01-31 01:08:05 - werkzeug - INFO - 127.0.0.1 - - [31/Jan/2026 01:08:05] "POST /api/question HTTP/1.1" 200 -
2026-01-31 01:08:06 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-31 01:08:06 - llm_service - INFO - OpenAI API response (attempt 1): {
  "theme": "å›³è¡¨",
  "topic_label": "C",
  "excerpt_type": "P3_ONLY",
  "japanese_paragraphs": [
    "ãã®çµæœã€å›³æ›¸é¤¨ã®åˆ©ç”¨ã¯é€±æœ«ã«ãƒ”ãƒ¼ã‚¯ã«é”ã—ã€ç‰¹ã«æ—¥æ›œæ—¥ãŒæœ€ã‚‚åˆ©ç”¨è€…ãŒå¤šã„ã“ã¨ãŒæ˜ã‚‰ã‹ã«ãªã£ãŸã€‚å¹³æ—¥ã¯æ¯”è¼ƒçš„é™ã‹ã§ã€åˆ©ç”¨è€…æ•°ã¯åˆå¾Œã«å°‘ã—å¢—åŠ ã™ã‚‹å‚¾å‘ãŒã‚ã‚‹ã€‚ã“ã®ã‚ˆã†ã«ã€æ›œæ—¥ã«ã‚ˆã‚‹åˆ©ç”¨è€…æ•°ã®å·®ãŒå¤§ãã„...
2026-01-31 01:08:06 - llm_service - INFO - [DEBUG] Full LLM response for correction:
{
  "theme": "å›³è¡¨",
  "topic_label": "C",
  "excerpt_type": "P3_ONLY",
  "japanese_paragraphs": [
    "ãã®çµæœã€å›³æ›¸é¤¨ã®åˆ©ç”¨ã¯é€±æœ«ã«ãƒ”ãƒ¼ã‚¯ã«é”ã—ã€ç‰¹ã«æ—¥æ›œæ—¥ãŒæœ€ã‚‚åˆ©ç”¨è€…ãŒå¤šã„ã“ã¨ãŒæ˜ã‚‰ã‹ã«ãªã£ãŸã€‚å¹³æ—¥ã¯æ¯”è¼ƒçš„é™ã‹ã§ã€åˆ©ç”¨è€…æ•°ã¯åˆå¾Œã«å°‘ã—å¢—åŠ ã™ã‚‹å‚¾å‘ãŒã‚ã‚‹ã€‚ã“ã®ã‚ˆã†ã«ã€æ›œæ—¥ã«ã‚ˆã‚‹åˆ©ç”¨è€…æ•°ã®å·®ãŒå¤§ãã„ã“ã¨ãŒç¤ºã•ã‚ŒãŸã€‚"
  ],
  "hints": [
    {"en": "peak", "ja": "ãƒ”ãƒ¼ã‚¯", "kana": "ãƒ”ãƒ¼ã‚¯", "pos": "åè©", "usage": "reach a peakã€Œãƒ”ãƒ¼ã‚¯ã«é”ã™ã‚‹ã€"},
    {"en": "quiet", "ja": "é™ã‹", "kana": "ã‚¯ãƒ¯ã‚¤ã‚¨ãƒƒãƒˆ", "pos": "å½¢å®¹è©", "usage": "remain quietã€Œé™ã‹ã«ä¿ã¤ã€"},
    {"en": "weekday", "ja": "å¹³æ—¥", "kana": "ã‚¦ã‚£ãƒ¼ã‚¯ãƒ‡ã‚¤", "pos": "åè©", "usage": "on weekdaysã€Œå¹³æ—¥ã«ã€"},
    {"en": "tendency", "ja": "å‚¾å‘", "kana": "ãƒ†ãƒ³ãƒ‡ãƒ³ã‚·ãƒ¼", "pos": "åè©", "usage": "show a tendencyã€Œå‚¾å‘ã‚’ç¤ºã™ã€"},
    {"en": "difference", "ja": "å·®", "kana": "ãƒ‡ã‚£ãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹", "pos": "åè©", "usage": "a big differenceã€Œå¤§ããªå·®ã€"}
  ],
  "target_words": {"min": 100, "max": 120}
}
2026-01-31 01:08:06 - llm_service - INFO - Cleaned JSON (attempt 1): {
  "theme": "å›³è¡¨",
  "topic_label": "C",
  "excerpt_type": "P3_ONLY",
  "japanese_paragraphs": [
    "ãã®çµæœã€å›³æ›¸é¤¨ã®åˆ©ç”¨ã¯é€±æœ«ã«ãƒ”ãƒ¼ã‚¯ã«é”ã—ã€ç‰¹ã«æ—¥æ›œæ—¥ãŒæœ€ã‚‚åˆ©ç”¨è€…ãŒå¤šã„ã“ã¨ãŒæ˜ã‚‰ã‹ã«ãªã£ãŸã€‚å¹³æ—¥ã¯æ¯”è¼ƒçš„é™ã‹ã§ã€åˆ©ç”¨è€…æ•°ã¯åˆå¾Œã«å°‘ã—å¢—åŠ ã™ã‚‹å‚¾å‘ãŒã‚ã‚‹ã€‚ã“ã®ã‚ˆã†ã«ã€æ›œæ—¥ã«ã‚ˆã‚‹åˆ©ç”¨è€…æ•°ã®å·®ãŒå¤§ãã„ã“ã¨ãŒç¤ºã•ã‚ŒãŸã€‚"
  ],
  "hints": [
    {"en": "peak", "ja": "ãƒ”ãƒ¼ã‚¯", "kana": "ãƒ”ãƒ¼ã‚¯", "pos": "åè©", "usage": "re...
2026-01-31 01:08:06 - llm_service - INFO - âœ… excerpt_typeæ¤œè¨¼æˆåŠŸ: P3_ONLY
2026-01-31 01:08:06 - llm_service - INFO - âœ… themeæ¤œè¨¼æˆåŠŸ: å›³è¡¨
2026-01-31 01:08:06 - llm_service - INFO - Successfully generated question: å›³è¡¨, excerpt_type: P3_ONLY
2026-01-31 01:08:06 - database - INFO - Question saved: q_20260131_dd210a3c - å›³è¡¨ (P3_ONLY)
2026-01-31 01:08:06 - database - INFO - Theme recorded: å›³è¡¨ (mode: general)
2026-01-31 01:08:06 - werkzeug - INFO - 127.0.0.1 - - [31/Jan/2026 01:08:06] "POST /api/question HTTP/1.1" 200 -
2026-01-31 01:08:56 - llm_service - INFO - Step 1 - Punctuation normalized (first 100 chars): As a result, library use was found to peak on weekends, with Sunday having the highest number of vis...
2026-01-31 01:08:56 - llm_service - INFO - Step 2 - User input normalized (first 100 chars): As a result, library use was found to peak on weekends, with Sunday having the highest number of vis...
2026-01-31 01:08:56 - llm_service - INFO - Question text for correction: ãã®çµæœã€å›³æ›¸é¤¨ã®åˆ©ç”¨ã¯é€±æœ«ã«ãƒ”ãƒ¼ã‚¯ã«é”ã—ã€ç‰¹ã«æ—¥æ›œæ—¥ãŒæœ€ã‚‚åˆ©ç”¨è€…ãŒå¤šã„ã“ã¨ãŒæ˜ã‚‰ã‹ã«ãªã£ãŸã€‚
å¹³æ—¥ã¯æ¯”è¼ƒçš„é™ã‹ã§ã€åˆ©ç”¨è€…æ•°ã¯åˆå¾Œã«å°‘ã—å¢—åŠ ã™ã‚‹å‚¾å‘ãŒã‚ã‚‹ã€‚
ã“ã®ã‚ˆã†ã«ã€æ›œæ—¥ã«ã‚ˆã‚‹åˆ©ç”¨è€…æ•°ã®å·®ãŒå¤§ãã„ã“ã¨ãŒç¤ºã•ã‚ŒãŸã€‚...
2026-01-31 01:08:56 - llm_service - INFO - Required points determined from Japanese text: 3 sentences
2026-01-31 01:08:56 - llm_service - INFO - Required points for this correction: 3
2026-01-31 01:08:56 - llm_service - INFO - Word count: 57
2026-01-31 01:08:56 - llm_service - INFO - Correction attempt 1/3
2026-01-31 01:09:18 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-31 01:09:18 - llm_service - INFO - OpenAI API response (attempt 1): 
{
  "original": "As a result, library use was found to peak on weekends, with Sunday having the highest number of visitors in particular. Weekdays were relatively quiet, and the number of visitors te...
2026-01-31 01:09:18 - llm_service - INFO - Full LLM response for correction (length: 4920 chars)
2026-01-31 01:09:18 - llm_service - INFO - Response first 500 chars: 
{
  "original": "As a result, library use was found to peak on weekends, with Sunday having the highest number of visitors in particular. Weekdays were relatively quiet, and the number of visitors tended to increase slightly in the afternoon. Also, it was shown that there is a large difference in visitor numbers depending on the day of the week.",
  "corrected": "As a result, library use was found to peak on weekends, with Sunday having the highest number of visitors in particular.\n\nWeekdays 
2026-01-31 01:09:18 - llm_service - INFO - Response last 500 chars: ã€äººã€…ã¯å¤ã‚’å¥½ã‚€ã€‚) / This type is typically seen in rural areas. (ã“ã®ã‚¿ã‚¤ãƒ—ã¯ç”°èˆã§å…¸å‹çš„ã«è¦‹ã‚‰ã‚Œã‚‹ã€‚)\n\n3æ–‡ç›®: Thus, it was shown that there is a significant variation in visitor numbers depending on the day of the week.\nï¼ˆã—ãŸãŒã£ã¦ã€æ›œæ—¥ã«ã‚ˆã‚‹åˆ©ç”¨è€…æ•°ã®å¤§ããªå¤‰å‹•ãŒç¤ºã•ã‚ŒãŸã€‚ï¼‰\nthusï¼ˆå‰¯è©ï¼šã—ãŸãŒã£ã¦ï¼šãã‚Œã‚†ãˆã«ï¼‰ï¼thereforeï¼ˆå‰¯è©ï¼šã—ãŸãŒã£ã¦ï¼šãã‚ŒãŒç†ç”±ã§ï¼‰ã§ã€thusã¯è«–ç†çš„ãªå¸°çµã‚’ã€thereforeã¯å› æœé–¢ä¿‚ã‚’å¼·èª¿ã—ã¾ã™ã€‚\nã€å‚è€ƒã€‘thus farï¼ˆã“ã‚Œã¾ã§ã®ã¨ã“ã‚ï¼‰ï¼therefore unavoidableï¼ˆã—ãŸãŒã£ã¦é¿ã‘ã‚‰ã‚Œãªã„ï¼‰\nä¾‹: They were tired, thus they rested. (å½¼ã‚‰ã¯ç–²ã‚Œã¦ã„ãŸã®ã§ä¼‘ã‚“ã ã€‚) / The road was blocked, therefore we took a detour. (é“ãŒå¡ãŒã‚Œã¦ã„ãŸã®ã§ã€è¿‚å›ã—ãŸã€‚)"
}
2026-01-31 01:09:18 - llm_service - INFO - Full response saved to: /workspaces/miyazaki_igaku_100words/debug/llm_response_1.json
2026-01-31 01:09:18 - llm_service - WARNING - Skipping point 1: before 'ã€å…¨ä½“è©•ä¾¡ã€‘' not found in student answer
2026-01-31 01:09:18 - llm_service - INFO - Before normalization: 3 points
2026-01-31 01:09:18 - points_normalizer - INFO - Starting points normalization: 3 points
2026-01-31 01:09:18 - points_normalizer - INFO - Student answer split into 3 sentences
2026-01-31 01:09:18 - points_normalizer - INFO - Processing point 1: before='As a result, library use was found to peak on week...', level='âœ…æ­£ã—ã„è¡¨ç¾'
2026-01-31 01:09:18 - points_normalizer - INFO - Point 1: Normalized before='As a result, library use was found to peak on week...'
2026-01-31 01:09:18 - points_normalizer - INFO - Point 1: Found in sentence 1: 'As a result, library use was found to peak on week...'
2026-01-31 01:09:18 - points_normalizer - INFO - Point 1: Normalized successfully (sentence_no=1)
2026-01-31 01:09:18 - points_normalizer - INFO - Processing point 2: before='Weekdays were relatively quiet, and the number of ...', level='âœ…æ­£ã—ã„è¡¨ç¾'
2026-01-31 01:09:18 - points_normalizer - INFO - Point 2: Normalized before='Weekdays were relatively quiet, and the number of ...'
2026-01-31 01:09:18 - points_normalizer - INFO - Point 2: Found in sentence 2: 'Weekdays were relatively quiet, and the number of ...'
2026-01-31 01:09:18 - points_normalizer - INFO - Point 2: Normalized successfully (sentence_no=2)
2026-01-31 01:09:18 - points_normalizer - INFO - Processing point 3: before='Also, it was shown that there is a large differenc...', level='âœ…æ­£ã—ã„è¡¨ç¾'
2026-01-31 01:09:18 - points_normalizer - INFO - Point 3: Normalized before='Also, it was shown that there is a large differenc...'
2026-01-31 01:09:18 - points_normalizer - INFO - Point 3: Found in sentence 3: 'Also, it was shown that there is a large differenc...'
2026-01-31 01:09:18 - points_normalizer - INFO - Point 3: Normalized successfully (sentence_no=3)
2026-01-31 01:09:18 - points_normalizer - INFO - Points normalization complete: 3 points
2026-01-31 01:09:18 - llm_service - INFO - After normalization: 3 points
2026-01-31 01:09:18 - llm_service - INFO - Points check: current=3, non-evaluation=3, required=3
2026-01-31 01:09:18 - llm_service - INFO - âœ… Correction successful: 3 points
2026-01-31 01:09:18 - database - INFO - Submission saved: s_20260131_f6320604 (mode: general, no scoring)
2026-01-31 01:09:18 - werkzeug - INFO - 127.0.0.1 - - [31/Jan/2026 01:09:18] "POST /api/correct-multi HTTP/1.1" 200 -
2026-01-31 01:11:25 - werkzeug - INFO -  * Detected change in '/workspaces/miyazaki_igaku_100words/points_normalizer.py', reloading
2026-01-31 01:11:25 - werkzeug - INFO -  * Restarting with stat
2026-01-31 01:11:27 - __main__ - INFO - ğŸš€ ã¿ã‚„å¡¾ã€€è‹±ä½œæ–‡ç‰¹è¨“è¬›åº§ã€€å®®å´å¤§å­¦åŒ»å­¦éƒ¨ï¼ˆå’Œæ–‡è‹±è¨³ï¼‰ v3.0.0 èµ·å‹•: http://localhost:8001
2026-01-31 01:11:27 - __main__ - INFO - ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹: data/miyazaki_igaku_eisakubun.db
2026-01-31 01:11:27 - __main__ - INFO - ğŸ¯ æœ‰åŠ¹æ©Ÿèƒ½: 4/4
2026-01-31 01:11:27 - werkzeug - WARNING -  * Debugger is active!
2026-01-31 01:11:27 - werkzeug - INFO -  * Debugger PIN: 519-604-230
2026-01-31 01:11:37 - werkzeug - INFO -  * Detected change in '/workspaces/miyazaki_igaku_100words/points_normalizer.py', reloading
2026-01-31 01:11:37 - werkzeug - INFO -  * Restarting with stat
2026-01-31 01:11:38 - __main__ - INFO - ğŸš€ ã¿ã‚„å¡¾ã€€è‹±ä½œæ–‡ç‰¹è¨“è¬›åº§ã€€å®®å´å¤§å­¦åŒ»å­¦éƒ¨ï¼ˆå’Œæ–‡è‹±è¨³ï¼‰ v3.0.0 èµ·å‹•: http://localhost:8001
2026-01-31 01:11:38 - __main__ - INFO - ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹: data/miyazaki_igaku_eisakubun.db
2026-01-31 01:11:38 - __main__ - INFO - ğŸ¯ æœ‰åŠ¹æ©Ÿèƒ½: 4/4
2026-01-31 01:11:38 - werkzeug - WARNING -  * Debugger is active!
2026-01-31 01:11:38 - werkzeug - INFO -  * Debugger PIN: 519-604-230
2026-01-31 01:11:49 - werkzeug - INFO -  * Detected change in '/workspaces/miyazaki_igaku_100words/points_normalizer.py', reloading
2026-01-31 01:11:49 - werkzeug - INFO -  * Restarting with stat
2026-01-31 01:11:50 - __main__ - INFO - ğŸš€ ã¿ã‚„å¡¾ã€€è‹±ä½œæ–‡ç‰¹è¨“è¬›åº§ã€€å®®å´å¤§å­¦åŒ»å­¦éƒ¨ï¼ˆå’Œæ–‡è‹±è¨³ï¼‰ v3.0.0 èµ·å‹•: http://localhost:8001
2026-01-31 01:11:50 - __main__ - INFO - ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹: data/miyazaki_igaku_eisakubun.db
2026-01-31 01:11:50 - __main__ - INFO - ğŸ¯ æœ‰åŠ¹æ©Ÿèƒ½: 4/4
2026-01-31 01:11:50 - werkzeug - WARNING -  * Debugger is active!
2026-01-31 01:11:50 - werkzeug - INFO -  * Debugger PIN: 519-604-230
2026-01-31 01:11:57 - werkzeug - INFO -  * Detected change in '/workspaces/miyazaki_igaku_100words/llm_service.py', reloading
2026-01-31 01:11:57 - werkzeug - INFO -  * Restarting with stat
2026-01-31 01:11:58 - __main__ - INFO - ğŸš€ ã¿ã‚„å¡¾ã€€è‹±ä½œæ–‡ç‰¹è¨“è¬›åº§ã€€å®®å´å¤§å­¦åŒ»å­¦éƒ¨ï¼ˆå’Œæ–‡è‹±è¨³ï¼‰ v3.0.0 èµ·å‹•: http://localhost:8001
2026-01-31 01:11:58 - __main__ - INFO - ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹: data/miyazaki_igaku_eisakubun.db
2026-01-31 01:11:58 - __main__ - INFO - ğŸ¯ æœ‰åŠ¹æ©Ÿèƒ½: 4/4
2026-01-31 01:11:58 - werkzeug - WARNING -  * Debugger is active!
2026-01-31 01:11:58 - werkzeug - INFO -  * Debugger PIN: 519-604-230
