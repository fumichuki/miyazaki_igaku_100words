nohup: ignoring input
2026-01-30 23:27:38 - __main__ - INFO - ğŸš€ ã¿ã‚„å¡¾ã€€è‹±ä½œæ–‡ç‰¹è¨“è¬›åº§ã€€å®®å´å¤§å­¦åŒ»å­¦éƒ¨ï¼ˆå’Œæ–‡è‹±è¨³ï¼‰ v3.0.0 èµ·å‹•: http://localhost:8001
2026-01-30 23:27:38 - __main__ - INFO - ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹: data/miyazaki_igaku_eisakubun.db
2026-01-30 23:27:38 - __main__ - INFO - ğŸ¯ æœ‰åŠ¹æ©Ÿèƒ½: 4/4
 * Serving Flask app 'app'
 * Debug mode: on
2026-01-30 23:27:38 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8001
 * Running on http://10.0.10.26:8001
2026-01-30 23:27:38 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2026-01-30 23:27:38 - werkzeug - INFO -  * Restarting with stat
2026-01-30 23:27:39 - __main__ - INFO - ğŸš€ ã¿ã‚„å¡¾ã€€è‹±ä½œæ–‡ç‰¹è¨“è¬›åº§ã€€å®®å´å¤§å­¦åŒ»å­¦éƒ¨ï¼ˆå’Œæ–‡è‹±è¨³ï¼‰ v3.0.0 èµ·å‹•: http://localhost:8001
2026-01-30 23:27:39 - __main__ - INFO - ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹: data/miyazaki_igaku_eisakubun.db
2026-01-30 23:27:39 - __main__ - INFO - ğŸ¯ æœ‰åŠ¹æ©Ÿèƒ½: 4/4
2026-01-30 23:27:39 - werkzeug - WARNING -  * Debugger is active!
2026-01-30 23:27:39 - werkzeug - INFO -  * Debugger PIN: 519-604-230
2026-01-30 23:27:44 - werkzeug - INFO - 127.0.0.1 - - [30/Jan/2026 23:27:44] "GET /health HTTP/1.1" 200 -
2026-01-30 23:27:50 - werkzeug - INFO - 127.0.0.1 - - [30/Jan/2026 23:27:50] "GET /health HTTP/1.1" 200 -
2026-01-30 23:39:00 - werkzeug - INFO - 127.0.0.1 - - [30/Jan/2026 23:39:00] "GET / HTTP/1.1" 200 -
2026-01-30 23:39:00 - werkzeug - INFO - 127.0.0.1 - - [30/Jan/2026 23:39:00] "[36mGET /static/style.css?v=20260121m HTTP/1.1[0m" 304 -
2026-01-30 23:39:00 - werkzeug - INFO - 127.0.0.1 - - [30/Jan/2026 23:39:00] "[36mGET /static/main.js?v=20260121N HTTP/1.1[0m" 304 -
2026-01-30 23:39:00 - werkzeug - INFO - 127.0.0.1 - - [30/Jan/2026 23:39:00] "[36mGET /static/textarea-resize.png HTTP/1.1[0m" 304 -
2026-01-30 23:39:01 - database - INFO - Excluded themes: ['ã‚³ãƒ©ãƒ ', 'å­¦è¡“', 'å›³è¡¨', 'ç ”ç©¶ç´¹ä»‹', 'ãƒ¬ãƒ“ãƒ¥ãƒ¼', 'ãƒ–ãƒ­ã‚°', 'æ™‚äº‹']
2026-01-30 23:39:01 - llm_service - INFO - ç¿»è¨³å•é¡Œã‚’ç”Ÿæˆä¸­...
2026-01-30 23:39:01 - llm_service - INFO - ğŸ“Š ç›´è¿‘10å•ã®ã‚µãƒ–ãƒˆãƒ”ãƒƒã‚¯: ['ã‚³ãƒ©ãƒ :C', 'ã‚³ãƒ©ãƒ :C', 'å­¦è¡“:F', 'å›³è¡¨:C', 'ç ”ç©¶ç´¹ä»‹:D', 'å­¦è¡“:H', 'ãƒ¬ãƒ“ãƒ¥ãƒ¼:F', 'å›³è¡¨:E', 'ã‚³ãƒ©ãƒ :A', 'ãƒ–ãƒ­ã‚°:B']
2026-01-30 23:39:01 - llm_service - INFO - ğŸ“Š ç›´è¿‘30å•ã®åˆ†å¸ƒ: ã‚³ãƒ©ãƒ =20.0%, ãƒ–ãƒ­ã‚°=10.0%, ãƒ¬ãƒ“ãƒ¥ãƒ¼=10.0%, å›³è¡¨=13.3%, å­¦è¡“=13.3%, æ™‚äº‹=16.7%, ç ”ç©¶ç´¹ä»‹=16.7%
2026-01-30 23:39:01 - llm_service - INFO - ğŸ¯ ã‚·ã‚¹ãƒ†ãƒ ãŒé¸æŠã—ãŸtheme: å­¦è¡“
2026-01-30 23:39:01 - llm_service - INFO - ğŸ“Š ç›´è¿‘10å•ã®åˆ†å¸ƒ: P1_ONLY=20.0%, P2_P3=60.0%, P3_ONLY=20.0%, P4_P5=0.0%
2026-01-30 23:39:01 - llm_service - INFO - ğŸ¯ ã‚·ã‚¹ãƒ†ãƒ ãŒé¸æŠã—ãŸexcerpt_type: P3_ONLY
2026-01-30 23:39:08 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-30 23:39:08 - llm_service - INFO - OpenAI API response (attempt 1): {
  "theme": "å­¦è¡“",
  "topic_label": "D",
  "excerpt_type": "P3_ONLY",
  "japanese_paragraphs": [
    "ãã®çµæœã€æ„æ€æ±ºå®šã®éš›ã«å·¦å³ã®è„³åŠçƒãŒç•°ãªã‚‹å½¹å‰²ã‚’æœãŸã—ã¦ã„ã‚‹ã“ã¨ãŒç¤ºã•ã‚ŒãŸã€‚ç‰¹ã«ã€å·¦è„³ãŒè«–ç†çš„ãªé¸æŠã‚’ã€å³è„³ãŒç›´æ„Ÿçš„ãªé¸æŠã‚’ä¿ƒé€²ã™ã‚‹å‚¾å‘ãŒã‚ã‚‹ã“ã¨ãŒã‚ã‹ã£ãŸã€‚ã“ã‚Œã«ã‚ˆã‚Šã€è¤‡é›‘ãªå•é¡Œã«å–ã‚Šçµ„ã‚€éš›ã®...
2026-01-30 23:39:08 - llm_service - INFO - [DEBUG] Full LLM response for correction:
{
  "theme": "å­¦è¡“",
  "topic_label": "D",
  "excerpt_type": "P3_ONLY",
  "japanese_paragraphs": [
    "ãã®çµæœã€æ„æ€æ±ºå®šã®éš›ã«å·¦å³ã®è„³åŠçƒãŒç•°ãªã‚‹å½¹å‰²ã‚’æœãŸã—ã¦ã„ã‚‹ã“ã¨ãŒç¤ºã•ã‚ŒãŸã€‚ç‰¹ã«ã€å·¦è„³ãŒè«–ç†çš„ãªé¸æŠã‚’ã€å³è„³ãŒç›´æ„Ÿçš„ãªé¸æŠã‚’ä¿ƒé€²ã™ã‚‹å‚¾å‘ãŒã‚ã‚‹ã“ã¨ãŒã‚ã‹ã£ãŸã€‚ã“ã‚Œã«ã‚ˆã‚Šã€è¤‡é›‘ãªå•é¡Œã«å–ã‚Šçµ„ã‚€éš›ã®è„³ã®æ©Ÿèƒ½ã«ã¤ã„ã¦æ–°ãŸãªç†è§£ãŒå¾—ã‚‰ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã€‚"
  ],
  "hints": [
    {
      "en": "decision-making",
      "ja": "æ„æ€æ±ºå®š",
      "kana": "ã‚¤ã‚·ã‚±ãƒƒãƒ†ã‚¤",
      "pos": "åè©",
      "usage": "Effective decision-making is crucial in business.ã€ŒåŠ¹æœçš„ãªæ„æ€æ±ºå®šã¯ãƒ“ã‚¸ãƒã‚¹ã«ãŠã„ã¦é‡è¦ã§ã™ã€‚ã€"
    },
    {
      "en": "hemisphere",
      "ja": "åŠçƒ",
      "kana": "ãƒãƒ³ã‚­ãƒ¥ã‚¦",
      "pos": "åè©",
      "usage": "The left hemisphere is responsible for language.ã€Œå·¦åŠçƒã¯è¨€èªã‚’å¸ã‚‹ã€‚ã€"
    },
    {
      "en": "logical",
      "ja": "è«–ç†çš„ãª",
      "kana": "ãƒ­ãƒ³ãƒªãƒ†ã‚­ãƒŠ",
      "pos": "å½¢å®¹è©",
      "usage": "He presented a logical argument.ã€Œå½¼ã¯è«–ç†çš„ãªè­°è«–ã‚’æç¤ºã—ãŸã€‚ã€"
    },
    {
      "en": "intuitive",
      "ja": "ç›´æ„Ÿçš„ãª",
      "kana": "ãƒãƒ§ãƒƒã‚«ãƒ³ãƒ†ã‚­ãƒŠ",
      "pos": "å½¢å®¹è©",
      "usage": "She has an intuitive understanding of art.ã€Œå½¼å¥³ã¯èŠ¸è¡“ã«å¯¾ã—ã¦ç›´æ„Ÿçš„ãªç†è§£ã‚’æŒã£ã¦ã„ã‚‹ã€‚ã€"
    },
    {
      "en": "function",
      "ja": "æ©Ÿèƒ½",
      "kana": "ã‚­ãƒã‚¦",
      "pos": "åè©",
      "usage": "The function of the heart is to pump blood.ã€Œå¿ƒè‡“ã®æ©Ÿèƒ½ã¯è¡€æ¶²ã‚’é€ã‚‹ã“ã¨ã§ã™ã€‚ã€"
    }
  ],
  "target_words": {
    "min": 100,
    "max": 120
  }
}
2026-01-30 23:39:08 - llm_service - INFO - Cleaned JSON (attempt 1): {
  "theme": "å­¦è¡“",
  "topic_label": "D",
  "excerpt_type": "P3_ONLY",
  "japanese_paragraphs": [
    "ãã®çµæœã€æ„æ€æ±ºå®šã®éš›ã«å·¦å³ã®è„³åŠçƒãŒç•°ãªã‚‹å½¹å‰²ã‚’æœãŸã—ã¦ã„ã‚‹ã“ã¨ãŒç¤ºã•ã‚ŒãŸã€‚ç‰¹ã«ã€å·¦è„³ãŒè«–ç†çš„ãªé¸æŠã‚’ã€å³è„³ãŒç›´æ„Ÿçš„ãªé¸æŠã‚’ä¿ƒé€²ã™ã‚‹å‚¾å‘ãŒã‚ã‚‹ã“ã¨ãŒã‚ã‹ã£ãŸã€‚ã“ã‚Œã«ã‚ˆã‚Šã€è¤‡é›‘ãªå•é¡Œã«å–ã‚Šçµ„ã‚€éš›ã®è„³ã®æ©Ÿèƒ½ã«ã¤ã„ã¦æ–°ãŸãªç†è§£ãŒå¾—ã‚‰ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã€‚"
  ],
  "hints": [
    {
      "en": "decision-making",
      "ja": "æ„æ€æ±ºå®š"...
2026-01-30 23:39:08 - llm_service - INFO - âœ… excerpt_typeæ¤œè¨¼æˆåŠŸ: P3_ONLY
2026-01-30 23:39:08 - llm_service - INFO - âœ… themeæ¤œè¨¼æˆåŠŸ: å­¦è¡“
2026-01-30 23:39:08 - llm_service - INFO - Successfully generated question: å­¦è¡“, excerpt_type: P3_ONLY
2026-01-30 23:39:08 - database - INFO - Question saved: q_20260130_5ee7071e - å­¦è¡“ (P3_ONLY)
2026-01-30 23:39:08 - database - INFO - Theme recorded: å­¦è¡“ (mode: general)
2026-01-30 23:39:08 - werkzeug - INFO - 127.0.0.1 - - [30/Jan/2026 23:39:08] "POST /api/question HTTP/1.1" 200 -
2026-01-30 23:40:17 - llm_service - INFO - Step 1 - Punctuation normalized (first 100 chars): As a result, it was shown that the left and right cerebral hemispheres plays different roles in deci...
2026-01-30 23:40:17 - llm_service - INFO - Step 2 - User input normalized (first 100 chars): As a result, it was shown that the left and right cerebral hemispheres plays different roles in deci...
2026-01-30 23:40:17 - llm_service - INFO - Question text for correction: ãã®çµæœã€æ„æ€æ±ºå®šã®éš›ã«å·¦å³ã®è„³åŠçƒãŒç•°ãªã‚‹å½¹å‰²ã‚’æœãŸã—ã¦ã„ã‚‹ã“ã¨ãŒç¤ºã•ã‚ŒãŸã€‚
ç‰¹ã«ã€å·¦è„³ãŒè«–ç†çš„ãªé¸æŠã‚’ã€å³è„³ãŒç›´æ„Ÿçš„ãªé¸æŠã‚’ä¿ƒé€²ã™ã‚‹å‚¾å‘ãŒã‚ã‚‹ã“ã¨ãŒã‚ã‹ã£ãŸã€‚
ã“ã‚Œã«ã‚ˆã‚Šã€è¤‡é›‘ãªå•é¡Œã«å–ã‚Šçµ„ã‚€éš›ã®è„³ã®æ©Ÿèƒ½ã«ã¤ã„ã¦æ–°ãŸãªç†è§£ãŒå¾—ã‚‰ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã€‚...
2026-01-30 23:40:17 - llm_service - INFO - Required points determined from Japanese text: 3 sentences
2026-01-30 23:40:17 - llm_service - INFO - Required points for this correction: 3
2026-01-30 23:40:17 - llm_service - INFO - Word count: 57
2026-01-30 23:40:17 - llm_service - INFO - Correction attempt 1/3
2026-01-30 23:40:59 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-30 23:40:59 - llm_service - INFO - OpenAI API response (attempt 1): {
  "original": "As a result, it was shown that the left and right cerebral hemispheres plays different roles in decisionmaking. In particular, it was found that the left hemisphere tends to promote l...
2026-01-30 23:40:59 - llm_service - ERROR - JSON parse error (attempt 1): Expecting ',' delimiter: line 28 column 6 (char 3668)
2026-01-30 23:41:01 - llm_service - INFO - Correction attempt 2/3
2026-01-30 23:41:26 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-30 23:41:26 - llm_service - INFO - OpenAI API response (attempt 1): {
  "original": "As a result, it was shown that the left and right cerebral hemispheres plays different roles in decisionmaking. In particular, it was found that the left hemisphere tends to promote l...
2026-01-30 23:41:26 - llm_service - WARNING - Skipping point 1: before 'ã€å…¨ä½“è©•ä¾¡ã€‘' not found in student answer
2026-01-30 23:41:26 - llm_service - INFO - Before normalization: 3 points
2026-01-30 23:41:26 - points_normalizer - INFO - Starting points normalization: 3 points
2026-01-30 23:41:26 - points_normalizer - INFO - Student answer split into 3 sentences
2026-01-30 23:41:26 - points_normalizer - INFO - Processing point 1: before='As a result, it was shown that the left and right ...', level='âŒæ–‡æ³•ãƒŸã‚¹'
2026-01-30 23:41:26 - points_normalizer - INFO - Point 1: Found in sentence 1: 'As a result, it was shown that the left and right ...'
2026-01-30 23:41:26 - points_normalizer - INFO - Point 1: Replaced fragment in sentence: 'As a result, it was shown that the left and right ...'
2026-01-30 23:41:26 - points_normalizer - INFO - Level is âŒ, keeping after: 'As a result, it was shown that the left and right ...'
2026-01-30 23:41:26 - points_normalizer - INFO - Point 1: Normalized successfully (sentence_no=1)
2026-01-30 23:41:26 - points_normalizer - INFO - Processing point 2: before='In particular, it was found that the left hemisphe...', level='âœ…æ­£ã—ã„è¡¨ç¾'
2026-01-30 23:41:26 - points_normalizer - INFO - Point 2: Found in sentence 2: 'In particular, it was found that the left hemisphe...'
2026-01-30 23:41:26 - points_normalizer - INFO - Point 2: Normalized successfully (sentence_no=2)
2026-01-30 23:41:26 - points_normalizer - INFO - Processing point 3: before='This should like to a new understanding of how the...', level='âŒæ–‡æ³•ãƒŸã‚¹'
2026-01-30 23:41:26 - points_normalizer - INFO - Point 3: Found in sentence 3: 'This should like to a new understanding of how the...'
2026-01-30 23:41:26 - points_normalizer - INFO - Point 3: Replaced fragment in sentence: 'This could lead to a new understanding of how the ...'
2026-01-30 23:41:26 - points_normalizer - INFO - Level is âŒ, keeping after: 'This could lead to a new understanding of how the ...'
2026-01-30 23:41:26 - points_normalizer - INFO - Point 3: Normalized successfully (sentence_no=3)
2026-01-30 23:41:26 - points_normalizer - INFO - Points normalization complete: 3 points
2026-01-30 23:41:26 - llm_service - INFO - After normalization: 3 points
2026-01-30 23:41:26 - llm_service - INFO - Points check: current=3, non-evaluation=3, required=3
2026-01-30 23:41:26 - llm_service - INFO - âœ… Correction successful: 3 points
2026-01-30 23:41:26 - database - INFO - Submission saved: s_20260130_949bd74f (mode: general, no scoring)
2026-01-30 23:41:26 - werkzeug - INFO - 127.0.0.1 - - [30/Jan/2026 23:41:26] "POST /api/correct-multi HTTP/1.1" 200 -
2026-01-30 23:43:59 - werkzeug - INFO -  * Detected change in '/workspaces/miyazaki_igaku_100words/points_normalizer.py', reloading
2026-01-30 23:43:59 - werkzeug - INFO -  * Restarting with stat
2026-01-30 23:44:00 - __main__ - INFO - ğŸš€ ã¿ã‚„å¡¾ã€€è‹±ä½œæ–‡ç‰¹è¨“è¬›åº§ã€€å®®å´å¤§å­¦åŒ»å­¦éƒ¨ï¼ˆå’Œæ–‡è‹±è¨³ï¼‰ v3.0.0 èµ·å‹•: http://localhost:8001
2026-01-30 23:44:00 - __main__ - INFO - ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹: data/miyazaki_igaku_eisakubun.db
2026-01-30 23:44:00 - __main__ - INFO - ğŸ¯ æœ‰åŠ¹æ©Ÿèƒ½: 4/4
2026-01-30 23:44:00 - werkzeug - WARNING -  * Debugger is active!
2026-01-30 23:44:00 - werkzeug - INFO -  * Debugger PIN: 519-604-230
2026-01-30 23:44:07 - werkzeug - INFO -  * Detected change in '/workspaces/miyazaki_igaku_100words/points_normalizer.py', reloading
2026-01-30 23:44:07 - werkzeug - INFO -  * Restarting with stat
2026-01-30 23:44:08 - __main__ - INFO - ğŸš€ ã¿ã‚„å¡¾ã€€è‹±ä½œæ–‡ç‰¹è¨“è¬›åº§ã€€å®®å´å¤§å­¦åŒ»å­¦éƒ¨ï¼ˆå’Œæ–‡è‹±è¨³ï¼‰ v3.0.0 èµ·å‹•: http://localhost:8001
2026-01-30 23:44:08 - __main__ - INFO - ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹: data/miyazaki_igaku_eisakubun.db
2026-01-30 23:44:08 - __main__ - INFO - ğŸ¯ æœ‰åŠ¹æ©Ÿèƒ½: 4/4
2026-01-30 23:44:08 - werkzeug - WARNING -  * Debugger is active!
2026-01-30 23:44:08 - werkzeug - INFO -  * Debugger PIN: 519-604-230
