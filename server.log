nohup: ignoring input
2026-01-31 01:16:58 - __main__ - INFO - ğŸš€ ã¿ã‚„å¡¾ã€€è‹±ä½œæ–‡ç‰¹è¨“è¬›åº§ã€€å®®å´å¤§å­¦åŒ»å­¦éƒ¨ï¼ˆå’Œæ–‡è‹±è¨³ï¼‰ v3.0.0 èµ·å‹•: http://localhost:8001
2026-01-31 01:16:58 - __main__ - INFO - ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹: data/miyazaki_igaku_eisakubun.db
2026-01-31 01:16:58 - __main__ - INFO - ğŸ¯ æœ‰åŠ¹æ©Ÿèƒ½: 4/4
 * Serving Flask app 'app'
 * Debug mode: on
2026-01-31 01:16:58 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8001
 * Running on http://10.0.10.26:8001
2026-01-31 01:16:58 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2026-01-31 01:16:58 - werkzeug - INFO -  * Restarting with stat
2026-01-31 01:16:59 - __main__ - INFO - ğŸš€ ã¿ã‚„å¡¾ã€€è‹±ä½œæ–‡ç‰¹è¨“è¬›åº§ã€€å®®å´å¤§å­¦åŒ»å­¦éƒ¨ï¼ˆå’Œæ–‡è‹±è¨³ï¼‰ v3.0.0 èµ·å‹•: http://localhost:8001
2026-01-31 01:16:59 - __main__ - INFO - ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹: data/miyazaki_igaku_eisakubun.db
2026-01-31 01:16:59 - __main__ - INFO - ğŸ¯ æœ‰åŠ¹æ©Ÿèƒ½: 4/4
2026-01-31 01:16:59 - werkzeug - WARNING -  * Debugger is active!
2026-01-31 01:16:59 - werkzeug - INFO -  * Debugger PIN: 519-604-230
2026-01-31 01:17:01 - werkzeug - INFO - 127.0.0.1 - - [31/Jan/2026 01:17:01] "GET /health HTTP/1.1" 200 -
2026-01-31 01:17:10 - werkzeug - INFO - 127.0.0.1 - - [31/Jan/2026 01:17:10] "GET /health HTTP/1.1" 200 -
2026-01-31 01:17:43 - werkzeug - INFO - 127.0.0.1 - - [31/Jan/2026 01:17:43] "GET / HTTP/1.1" 200 -
2026-01-31 01:17:43 - werkzeug - INFO - 127.0.0.1 - - [31/Jan/2026 01:17:43] "[36mGET /static/style.css?v=20260121m HTTP/1.1[0m" 304 -
2026-01-31 01:17:43 - werkzeug - INFO - 127.0.0.1 - - [31/Jan/2026 01:17:43] "[36mGET /static/textarea-resize.png HTTP/1.1[0m" 304 -
2026-01-31 01:17:43 - werkzeug - INFO - 127.0.0.1 - - [31/Jan/2026 01:17:43] "GET /static/main.js?v=20260121N HTTP/1.1" 200 -
2026-01-31 01:17:44 - database - INFO - Excluded themes: ['å›³è¡¨', 'å­¦è¡“', 'ãƒ¬ãƒ“ãƒ¥ãƒ¼', 'ç ”ç©¶ç´¹ä»‹', 'ãƒ–ãƒ­ã‚°', 'æ™‚äº‹', 'ã‚³ãƒ©ãƒ ']
2026-01-31 01:17:44 - llm_service - INFO - ç¿»è¨³å•é¡Œã‚’ç”Ÿæˆä¸­...
2026-01-31 01:17:44 - llm_service - INFO - ğŸ“Š ç›´è¿‘10å•ã®ã‚µãƒ–ãƒˆãƒ”ãƒƒã‚¯: ['å›³è¡¨:ä¸æ˜', 'å­¦è¡“:F', 'ãƒ¬ãƒ“ãƒ¥ãƒ¼:ä¸æ˜', 'ãƒ¬ãƒ“ãƒ¥ãƒ¼:F', 'ç ”ç©¶ç´¹ä»‹:C', 'ãƒ–ãƒ­ã‚°:F', 'ãƒ–ãƒ­ã‚°:C', 'æ™‚äº‹:B', 'å­¦è¡“:A', 'å­¦è¡“:E']
2026-01-31 01:17:44 - llm_service - WARNING - ğŸš¨ å­¦è¡“ãŒ35.0% â†’ ä»Šå›ã¯é¿ã‘ã‚‹
2026-01-31 01:17:44 - llm_service - INFO - ğŸ¯ ã‚·ã‚¹ãƒ†ãƒ ãŒé¸æŠã—ãŸtheme: æ™‚äº‹
2026-01-31 01:17:44 - llm_service - INFO - ğŸ“Š ç›´è¿‘10å•ã®åˆ†å¸ƒ: P1_ONLY=20.0%, P2_P3=50.0%, P3_ONLY=30.0%, P4_P5=0.0%
2026-01-31 01:17:44 - llm_service - INFO - ğŸ¯ ã‚·ã‚¹ãƒ†ãƒ ãŒé¸æŠã—ãŸexcerpt_type: P1_ONLY
2026-01-31 01:17:49 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-31 01:17:49 - llm_service - INFO - OpenAI API response (attempt 1): {
  "theme": "æ™‚äº‹",
  "topic_label": "G",
  "excerpt_type": "P1_ONLY",
  "japanese_paragraphs": [
    "æœ€è¿‘ã®èª¿æŸ»ã«ã‚ˆã‚‹ã¨ã€æ—¥æœ¬ã®éƒ½å¸‚éƒ¨ã§ã¯äº¤é€šæ¸‹æ»ãŒæ‚ªåŒ–ã—ã¦ã„ã‚‹ã“ã¨ãŒæ˜ã‚‰ã‹ã«ãªã£ãŸã€‚ç‰¹ã«ã€æœã®é€šå‹¤ãƒ©ãƒƒã‚·ãƒ¥æ™‚ã«ã¯ä¸»è¦ãªå¹¹ç·šé“è·¯ã§ã®è»Šä¸¡ã®æµã‚ŒãŒè‘—ã—ãé…ããªã£ã¦ãŠã‚Šã€é€šå‹¤æ™‚é–“ãŒå¹³å‡ã§30åˆ†ä»¥ä¸Šå»¶ã³ã‚‹ã“ã¨...
2026-01-31 01:17:49 - llm_service - INFO - [DEBUG] Full LLM response for correction:
{
  "theme": "æ™‚äº‹",
  "topic_label": "G",
  "excerpt_type": "P1_ONLY",
  "japanese_paragraphs": [
    "æœ€è¿‘ã®èª¿æŸ»ã«ã‚ˆã‚‹ã¨ã€æ—¥æœ¬ã®éƒ½å¸‚éƒ¨ã§ã¯äº¤é€šæ¸‹æ»ãŒæ‚ªåŒ–ã—ã¦ã„ã‚‹ã“ã¨ãŒæ˜ã‚‰ã‹ã«ãªã£ãŸã€‚ç‰¹ã«ã€æœã®é€šå‹¤ãƒ©ãƒƒã‚·ãƒ¥æ™‚ã«ã¯ä¸»è¦ãªå¹¹ç·šé“è·¯ã§ã®è»Šä¸¡ã®æµã‚ŒãŒè‘—ã—ãé…ããªã£ã¦ãŠã‚Šã€é€šå‹¤æ™‚é–“ãŒå¹³å‡ã§30åˆ†ä»¥ä¸Šå»¶ã³ã‚‹ã“ã¨ãŒå ±å‘Šã•ã‚Œã¦ã„ã‚‹ã€‚ã“ã®çŠ¶æ³ã¯ã€çµŒæ¸ˆæ´»å‹•ã®åŠ¹ç‡ã‚’ä½ä¸‹ã•ã›ã‚‹ã ã‘ã§ãªãã€ä½æ°‘ã®ã‚¹ãƒˆãƒ¬ã‚¹ãƒ¬ãƒ™ãƒ«ã‚’ä¸Šæ˜‡ã•ã›ã‚‹è¦å› ã¨ã‚‚ãªã£ã¦ã„ã‚‹ã€‚"
  ],
  "hints": [
    {"en": "traffic congestion", "ja": "äº¤é€šæ¸‹æ»", "kana": "ã‚³ã‚¦ãƒ„ã‚¦ã‚¸ãƒ¥ã‚¦ã‚¿ã‚¤", "pos": "åè©", "usage": "Traffic congestion in urban areas is worsening."},
    {"en": "urban areas", "ja": "éƒ½å¸‚éƒ¨", "kana": "ãƒˆã‚·ãƒ–", "pos": "åè©", "usage": "Urban areas are facing increased traffic congestion."},
    {"en": "commute time", "ja": "é€šå‹¤æ™‚é–“", "kana": "ãƒ„ã‚¦ã‚­ãƒ³ã‚¸ã‚«ãƒ³", "pos": "åè©", "usage": "Average commute time has increased by over 30 minutes."},
    {"en": "economic activity", "ja": "çµŒæ¸ˆæ´»å‹•", "kana": "ã‚±ã‚¤ã‚¶ã‚¤ã‚«ãƒ„ãƒ‰ã‚¦", "pos": "åè©", "usage": "Traffic congestion affects economic activity negatively."},
    {"en": "stress level", "ja": "ã‚¹ãƒˆãƒ¬ã‚¹ãƒ¬ãƒ™ãƒ«", "kana": "ã‚¹ãƒˆãƒ¬ã‚¹ãƒ¬ãƒ™ãƒ«", "pos": "åè©", "usage": "Higher stress levels are reported among residents."}
  ],
  "target_words": {"min": 100, "max": 120}
}
2026-01-31 01:17:49 - llm_service - INFO - Cleaned JSON (attempt 1): {
  "theme": "æ™‚äº‹",
  "topic_label": "G",
  "excerpt_type": "P1_ONLY",
  "japanese_paragraphs": [
    "æœ€è¿‘ã®èª¿æŸ»ã«ã‚ˆã‚‹ã¨ã€æ—¥æœ¬ã®éƒ½å¸‚éƒ¨ã§ã¯äº¤é€šæ¸‹æ»ãŒæ‚ªåŒ–ã—ã¦ã„ã‚‹ã“ã¨ãŒæ˜ã‚‰ã‹ã«ãªã£ãŸã€‚ç‰¹ã«ã€æœã®é€šå‹¤ãƒ©ãƒƒã‚·ãƒ¥æ™‚ã«ã¯ä¸»è¦ãªå¹¹ç·šé“è·¯ã§ã®è»Šä¸¡ã®æµã‚ŒãŒè‘—ã—ãé…ããªã£ã¦ãŠã‚Šã€é€šå‹¤æ™‚é–“ãŒå¹³å‡ã§30åˆ†ä»¥ä¸Šå»¶ã³ã‚‹ã“ã¨ãŒå ±å‘Šã•ã‚Œã¦ã„ã‚‹ã€‚ã“ã®çŠ¶æ³ã¯ã€çµŒæ¸ˆæ´»å‹•ã®åŠ¹ç‡ã‚’ä½ä¸‹ã•ã›ã‚‹ã ã‘ã§ãªãã€ä½æ°‘ã®ã‚¹ãƒˆãƒ¬ã‚¹ãƒ¬ãƒ™ãƒ«ã‚’ä¸Šæ˜‡ã•ã›ã‚‹è¦å› ã¨ã‚‚ãªã£ã¦ã„ã‚‹ã€‚"
  ],
  "hints": [
    {"en": "traffic ...
2026-01-31 01:17:49 - llm_service - INFO - âœ… excerpt_typeæ¤œè¨¼æˆåŠŸ: P1_ONLY
2026-01-31 01:17:49 - llm_service - INFO - âœ… themeæ¤œè¨¼æˆåŠŸ: æ™‚äº‹
2026-01-31 01:17:49 - llm_service - INFO - Successfully generated question: æ™‚äº‹, excerpt_type: P1_ONLY
2026-01-31 01:17:49 - database - INFO - Question saved: q_20260131_39bf29e8 - æ™‚äº‹ (P1_ONLY)
2026-01-31 01:17:49 - database - INFO - Theme recorded: æ™‚äº‹ (mode: general)
2026-01-31 01:17:49 - werkzeug - INFO - 127.0.0.1 - - [31/Jan/2026 01:17:49] "POST /api/question HTTP/1.1" 200 -
2026-01-31 01:19:08 - llm_service - INFO - Step 1 - Punctuation normalized (first 100 chars): According to a recent survey, traffic congestion has been worsening in urban areas of Japan.
in part...
2026-01-31 01:19:08 - llm_service - INFO - Step 2 - User input normalized (first 100 chars): According to a recent survey, traffic congestion has been worsening in urban areas of Japan. In part...
2026-01-31 01:19:08 - llm_service - INFO - Question text for correction: æœ€è¿‘ã®èª¿æŸ»ã«ã‚ˆã‚‹ã¨ã€æ—¥æœ¬ã®éƒ½å¸‚éƒ¨ã§ã¯äº¤é€šæ¸‹æ»ãŒæ‚ªåŒ–ã—ã¦ã„ã‚‹ã“ã¨ãŒæ˜ã‚‰ã‹ã«ãªã£ãŸã€‚
ç‰¹ã«ã€æœã®é€šå‹¤ãƒ©ãƒƒã‚·ãƒ¥æ™‚ã«ã¯ä¸»è¦ãªå¹¹ç·šé“è·¯ã§ã®è»Šä¸¡ã®æµã‚ŒãŒè‘—ã—ãé…ããªã£ã¦ãŠã‚Šã€é€šå‹¤æ™‚é–“ãŒå¹³å‡ã§30åˆ†ä»¥ä¸Šå»¶ã³ã‚‹ã“ã¨ãŒå ±å‘Šã•ã‚Œã¦ã„ã‚‹ã€‚
ã“ã®çŠ¶æ³ã¯ã€çµŒæ¸ˆæ´»å‹•ã®åŠ¹ç‡ã‚’ä½ä¸‹ã•ã›ã‚‹ã ã‘ã§ãªãã€ä½æ°‘ã®ã‚¹ãƒˆãƒ¬ã‚¹ãƒ¬ãƒ™ãƒ«ã‚’ä¸Šæ˜‡ã•ã›ã‚‹è¦å› ã¨ã‚‚ãªã£ã¦ã„ã‚‹ã€‚...
2026-01-31 01:19:08 - llm_service - INFO - Required points determined from Japanese text: 3 sentences
2026-01-31 01:19:08 - llm_service - INFO - Required points for this correction: 3
2026-01-31 01:19:08 - llm_service - INFO - Word count: 66
2026-01-31 01:19:08 - llm_service - INFO - Correction attempt 1/3
2026-01-31 01:19:25 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-31 01:19:25 - llm_service - INFO - OpenAI API response (attempt 1): 
{
  "original": "According to a recent survey, traffic congestion has been worsening in urban areas of Japan. In particular, during the morning commuting rush hour, the flow of vehicles on major arte...
2026-01-31 01:19:25 - llm_service - INFO - Full LLM response for correction (length: 5447 chars)
2026-01-31 01:19:25 - llm_service - INFO - Response first 500 chars: 
{
  "original": "According to a recent survey, traffic congestion has been worsening in urban areas of Japan. In particular, during the morning commuting rush hour, the flow of vehicles on major arterial roads slows down significantly, and average commute times are reported to increase by more than 30 minutes. This situation not only reduces the efficiency of economic activity but also contributes to higher stress levels among residents.",
  "corrected": "According to a recent survey, traffic c
2026-01-31 01:19:25 - llm_service - INFO - Response last 500 chars: She loves to travel during holidays. (å½¼å¥³ã¯ä¼‘æ—¥ã«æ—…è¡Œã™ã‚‹ã®ãŒå¥½ãã§ã™ã€‚)\n\n3æ–‡ç›®: This situation not only reduces the efficiency of economic activity but also contributes to higher stress levels among residents.\nï¼ˆã“ã®çŠ¶æ³ã¯ã€çµŒæ¸ˆæ´»å‹•ã®åŠ¹ç‡ã‚’ä½ä¸‹ã•ã›ã‚‹ã ã‘ã§ãªãã€ä½æ°‘ã®ã‚¹ãƒˆãƒ¬ã‚¹ãƒ¬ãƒ™ãƒ«ã‚’ä¸Šæ˜‡ã•ã›ã‚‹è¦å› ã¨ã‚‚ãªã£ã¦ã„ã‚‹ã€‚ï¼‰\nreduceï¼ˆå‹•è©ï¼šæ¸›ã‚‰ã™ï¼šæ„å›³çš„ã«é‡ã‚’æ¸›å°‘ã•ã›ã‚‹ï¼‰ï¼decreaseï¼ˆå‹•è©ï¼šæ¸›å°‘ã™ã‚‹ï¼šè‡ªç„¶ã«å°‘ãªããªã‚‹ï¼‰ã§ã€reduceã¯ä¸»ä½“çš„ãªè¡Œå‹•ã«ã‚ˆã‚‹å‰Šæ¸›ã€decreaseã¯è‡ªç„¶ãªæ¸›å°‘ã‚’æŒ‡ã—ã¾ã™ã€‚\nã€å‚è€ƒã€‘reduce stressï¼ˆã‚¹ãƒˆãƒ¬ã‚¹ã‚’æ¸›ã‚‰ã™ï¼‰ï¼decrease naturallyï¼ˆè‡ªç„¶ã«æ¸›å°‘ã™ã‚‹ï¼‰\nä¾‹: Exercise reduces stress. (é‹å‹•ã¯ã‚¹ãƒˆãƒ¬ã‚¹ã‚’æ¸›ã‚‰ã™ã€‚)ï¼The temperature decreased overnight. (æ°—æ¸©ãŒä¸€æ™©ã§ä¸‹ãŒã£ãŸã€‚)"
}
2026-01-31 01:19:25 - llm_service - INFO - Full response saved to: /workspaces/miyazaki_igaku_100words/debug/llm_response_1.json
2026-01-31 01:19:25 - llm_service - WARNING - Skipping point 1: before 'ã€å…¨ä½“è©•ä¾¡ã€‘' not found in student answer
2026-01-31 01:19:25 - llm_service - INFO - Before normalization: 3 points
2026-01-31 01:19:25 - points_normalizer - INFO - Starting points normalization: 3 points
2026-01-31 01:19:25 - points_normalizer - INFO - Student answer split into 3 sentences
2026-01-31 01:19:25 - points_normalizer - INFO - Original user input split into 2 sentences
2026-01-31 01:19:25 - points_normalizer - INFO - Processing point 1: before='According to a recent survey, traffic congestion h...', level='âœ…æ­£ã—ã„è¡¨ç¾'
2026-01-31 01:19:25 - points_normalizer - INFO - Point 1: Normalized before='According to a recent survey, traffic congestion h...'
2026-01-31 01:19:25 - points_normalizer - INFO - Point 1: Found in sentence 1: 'According to a recent survey, traffic congestion h...'
2026-01-31 01:19:25 - points_normalizer - INFO - Point 1: Original user input: 'According to a recent survey, traffic congestion h...'
2026-01-31 01:19:25 - points_normalizer - INFO - Point 1: Normalized successfully (sentence_no=1)
2026-01-31 01:19:25 - points_normalizer - INFO - Processing point 2: before='In particular, during the morning commuting rush h...', level='âœ…æ­£ã—ã„è¡¨ç¾'
2026-01-31 01:19:25 - points_normalizer - INFO - Point 2: Normalized before='In particular, during the morning commuting rush h...'
2026-01-31 01:19:25 - points_normalizer - INFO - Point 2: Found in sentence 2: 'In particular, during the morning commuting rush h...'
2026-01-31 01:19:25 - points_normalizer - INFO - Point 2: Original user input: 'This situation not only reduces the efficiency of ...'
2026-01-31 01:19:25 - points_normalizer - INFO - Point 2: Normalized successfully (sentence_no=2)
2026-01-31 01:19:25 - points_normalizer - INFO - Processing point 3: before='This situation not only reduces the efficiency of ...', level='âœ…æ­£ã—ã„è¡¨ç¾'
2026-01-31 01:19:25 - points_normalizer - INFO - Point 3: Normalized before='This situation not only reduces the efficiency of ...'
2026-01-31 01:19:25 - points_normalizer - INFO - Point 3: Found in sentence 3: 'This situation not only reduces the efficiency of ...'
2026-01-31 01:19:25 - points_normalizer - INFO - Point 3: Normalized successfully (sentence_no=3)
2026-01-31 01:19:25 - points_normalizer - INFO - Points normalization complete: 3 points
2026-01-31 01:19:25 - llm_service - INFO - After normalization: 3 points
2026-01-31 01:19:25 - llm_service - INFO - Points check: current=3, non-evaluation=3, required=3
2026-01-31 01:19:25 - llm_service - INFO - âœ… Correction successful: 3 points
2026-01-31 01:19:25 - database - INFO - Submission saved: s_20260131_7f142200 (mode: general, no scoring)
2026-01-31 01:19:25 - werkzeug - INFO - 127.0.0.1 - - [31/Jan/2026 01:19:25] "POST /api/correct-multi HTTP/1.1" 200 -
